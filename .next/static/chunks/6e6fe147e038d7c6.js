(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t,r,n;var i,o,s,a,l,u,c,d,h,f=e.i(43476),p=e.i(71645),m=e.i(57688),g=e.i(67881),v=e.i(74080);function y(e,[t,r]){return Math.min(r,Math.max(t,e))}function x(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function b(e,t=[]){let r=[],n=()=>{let t=r.map(e=>p.createContext(e));return function(r){let n=r?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let i=p.createContext(n),o=r.length;r=[...r,n];let s=t=>{let{scope:r,children:n,...s}=t,a=r?.[e]?.[o]||i,l=p.useMemo(()=>s,Object.values(s));return(0,f.jsx)(a.Provider,{value:l,children:n})};return s.displayName=t+"Provider",[s,function(r,s){let a=s?.[e]?.[o]||i,l=p.useContext(a);if(l)return l;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}"undefined"!=typeof window&&window.document&&window.document.createElement;var w=e.i(20783),S=e.i(91918),C=new WeakMap;function E(e,t){var r,n;let i,o,s;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let a=(r=e,n=t,i=r.length,(s=(o=R(n))>=0?o:i+o)<0||s>=i?-1:s);return -1===a?void 0:e[a]}function R(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],C.set(this,!0)}set(e,t){return C.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,r){let n,i=this.has(t),o=this.#e.length,s=R(e),a=s>=0?s:o+s,l=a<0||a>=o?-1:a;if(l===this.size||i&&l===this.size-1||-1===l)return this.set(t,r),this;let u=this.size+ +!i;s<0&&a++;let c=[...this.#e],d=!1;for(let e=a;e<u;e++)if(a===e){let o=c[e];c[e]===t&&(o=c[e+1]),i&&this.delete(t),n=this.get(o),this.set(t,r)}else{d||c[e-1]!==t||(d=!0);let r=c[d?e:e-1],i=n;n=this.get(r),this.delete(r),this.set(r,i)}return this}with(t,r,n){let i=new e(this);return i.insert(t,r,n),i}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let n=this.#e.indexOf(e);return -1===n?this:this.insert(n,t,r)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let n=this.#e.indexOf(e);return -1===n?this:this.insert(n+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=E(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=E(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return E(this.#e,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let n=r+t;return n<0&&(n=0),n>=this.size&&(n=this.size-1),this.at(n)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let n=r+t;return n<0&&(n=0),n>=this.size&&(n=this.size-1),this.keyAt(n)}find(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return n;r++}}findIndex(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return r;r++}return -1}filter(t,r){let n=[],i=0;for(let e of this)Reflect.apply(t,r,[e,i,this])&&n.push(e),i++;return new e(n)}map(t,r){let n=[],i=0;for(let e of this)n.push([e[0],Reflect.apply(t,r,[e,i,this])]),i++;return new e(n)}reduce(...e){let[t,r]=e,n=0,i=r??this.at(0);for(let r of this)i=0===n&&1===e.length?r:Reflect.apply(t,this,[i,r,n,this]),n++;return i}reduceRight(...e){let[t,r]=e,n=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let i=this.at(r);n=r===this.size-1&&1===e.length?i:Reflect.apply(t,this,[n,i,r,this])}return n}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),n=this.get(r);t.set(r,n)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let n=new e,i=this.size-1;if(void 0===t)return n;t<0&&(t+=this.size),void 0!==r&&r>0&&(i=r-1);for(let e=t;e<=i;e++){let t=this.keyAt(e),r=this.get(t);n.set(t,r)}return n}every(e,t){let r=0;for(let n of this){if(!Reflect.apply(e,t,[n,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return!0;r++}return!1}});var j=p.createContext(void 0),k=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,S.createSlot)(`Primitive.${t}`),n=p.forwardRef((e,n)=>{let{asChild:i,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,f.jsx)(i?r:t,{...o,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function N(e){let t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...e)=>t.current?.(...e),[])}var L="dismissableLayer.update",T=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),P=p.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=e,u=p.useContext(T),[c,h]=p.useState(null),m=c?.ownerDocument??globalThis?.document,[,g]=p.useState({}),v=(0,w.useComposedRefs)(t,e=>h(e)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(b),C=c?y.indexOf(c):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,R=C>=S,j=function(e,t=globalThis?.document){let r=N(e),n=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){D("dismissableLayer.pointerDownOutside",r,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...u.branches].some(e=>e.contains(t));R&&!r&&(i?.(e),s?.(e),e.defaultPrevented||a?.())},m),P=function(e,t=globalThis?.document){let r=N(e),n=p.useRef(!1);return p.useEffect(()=>{let e=e=>{e.target&&!n.current&&D("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;![...u.branches].some(e=>e.contains(t))&&(o?.(e),s?.(e),e.defaultPrevented||a?.())},m);return!function(e,t=globalThis?.document){let r=N(e);p.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{C===u.layers.size-1&&(n?.(e),!e.defaultPrevented&&a&&(e.preventDefault(),a()))},m),p.useEffect(()=>{if(c)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(d=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),M(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=d)}},[c,m,r,u]),p.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),M())},[c,u]),p.useEffect(()=>{let e=()=>g({});return document.addEventListener(L,e),()=>document.removeEventListener(L,e)},[]),(0,f.jsx)(k.div,{...l,ref:v,style:{pointerEvents:E?R?"auto":"none":void 0,...e.style},onFocusCapture:x(e.onFocusCapture,P.onFocusCapture),onBlurCapture:x(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:x(e.onPointerDownCapture,j.onPointerDownCapture)})});function M(){let e=new CustomEvent(L);document.dispatchEvent(e)}function D(e,t,r,{discrete:n}){let i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&i.addEventListener(e,t,{once:!0}),n)i&&v.flushSync(()=>i.dispatchEvent(o));else i.dispatchEvent(o)}P.displayName="DismissableLayer",p.forwardRef((e,t)=>{let r=p.useContext(T),n=p.useRef(null),i=(0,w.useComposedRefs)(t,n);return p.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,f.jsx)(k.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var A=0;function O(){p.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??W()),document.body.insertAdjacentElement("beforeend",e[1]??W()),A++,()=>{1===A&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),A--}},[])}function W(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var I="focusScope.autoFocusOnMount",_="focusScope.autoFocusOnUnmount",B={bubbles:!1,cancelable:!0},H=p.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,l]=p.useState(null),u=N(i),c=N(o),d=p.useRef(null),h=(0,w.useComposedRefs)(t,e=>l(e)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let e=function(e){if(m.paused||!a)return;let t=e.target;a.contains(t)?d.current=t:F(d.current,{select:!0})},t=function(e){if(m.paused||!a)return;let t=e.relatedTarget;null!==t&&(a.contains(t)||F(d.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&F(a)});return a&&r.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,a,m.paused]),p.useEffect(()=>{if(a){V.add(m);let e=document.activeElement;if(!a.contains(e)){let t=new CustomEvent(I,B);a.addEventListener(I,u),a.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(F(n,{select:t}),document.activeElement!==r)return}(z(a).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&F(a))}return()=>{a.removeEventListener(I,u),setTimeout(()=>{let t=new CustomEvent(_,B);a.addEventListener(_,c),a.dispatchEvent(t),t.defaultPrevented||F(e??document.body,{select:!0}),a.removeEventListener(_,c),V.remove(m)},0)}}},[a,u,c,m]);let g=p.useCallback(e=>{if(!r&&!n||m.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){var o;let t,n=e.currentTarget,[s,a]=[U(t=z(o=n),o),U(t.reverse(),o)];s&&a?e.shiftKey||i!==a?e.shiftKey&&i===s&&(e.preventDefault(),r&&F(a,{select:!0})):(e.preventDefault(),r&&F(s,{select:!0})):i===n&&e.preventDefault()}},[r,n,m.paused]);return(0,f.jsx)(k.div,{tabIndex:-1,...s,ref:h,onKeyDown:g})});function z(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function U(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function F(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}H.displayName="FocusScope";var V=(n=[],{add(e){let t=n[0];e!==t&&t?.pause(),(n=$(n,e)).unshift(e)},remove(e){n=$(n,e),n[0]?.resume()}});function $(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var G=globalThis?.document?p.useLayoutEffect:()=>{},K=p[" useId ".trim().toString()]||(()=>void 0),X=0;function q(e){let[t,r]=p.useState(K());return G(()=>{e||r(e=>e??String(X++))},[e]),e||(t?`radix-${t}`:"")}let Y=["top","right","bottom","left"],Z=Math.min,J=Math.max,Q=Math.round,ee=Math.floor,et=e=>({x:e,y:e}),er={left:"right",right:"left",bottom:"top",top:"bottom"},en={start:"end",end:"start"};function ei(e,t){return"function"==typeof e?e(t):e}function eo(e){return e.split("-")[0]}function es(e){return e.split("-")[1]}function ea(e){return"x"===e?"y":"x"}function el(e){return"y"===e?"height":"width"}let eu=new Set(["top","bottom"]);function ec(e){return eu.has(eo(e))?"y":"x"}function ed(e){return e.replace(/start|end/g,e=>en[e])}let eh=["left","right"],ef=["right","left"],ep=["top","bottom"],em=["bottom","top"];function eg(e){return e.replace(/left|right|bottom|top/g,e=>er[e])}function ev(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function ey(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function ex(e,t,r){let n,{reference:i,floating:o}=e,s=ec(t),a=ea(ec(t)),l=el(a),u=eo(t),c="y"===s,d=i.x+i.width/2-o.width/2,h=i.y+i.height/2-o.height/2,f=i[l]/2-o[l]/2;switch(u){case"top":n={x:d,y:i.y-o.height};break;case"bottom":n={x:d,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:h};break;case"left":n={x:i.x-o.width,y:h};break;default:n={x:i.x,y:i.y}}switch(es(t)){case"start":n[a]-=f*(r&&c?-1:1);break;case"end":n[a]+=f*(r&&c?-1:1)}return n}let eb=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=ex(u,n,l),h=n,f={},p=0;for(let r=0;r<a.length;r++){let{name:o,fn:m}=a[r],{x:g,y:v,data:y,reset:x}=await m({x:c,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:u,platform:s,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=v?v:d,f={...f,[o]:{...f[o],...y}},x&&p<=50&&(p++,"object"==typeof x&&(x.placement&&(h=x.placement),x.rects&&(u=!0===x.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:d}=ex(u,h,l)),r=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}};async function ew(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=ei(t,e),p=ev(f),m=a[h?"floating"===d?"reference":"floating":d],g=ey(await o.getClippingRect({element:null==(r=await (null==o.isElement?void 0:o.isElement(m)))||r?m:m.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===d?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,y=await (null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),x=await (null==o.isElement?void 0:o.isElement(y))&&await (null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},b=ey(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-b.top+p.top)/x.y,bottom:(b.bottom-g.bottom+p.bottom)/x.y,left:(g.left-b.left+p.left)/x.x,right:(b.right-g.right+p.right)/x.x}}function eS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function eC(e){return Y.some(t=>e[t]>=0)}let eE=new Set(["left","top"]);async function eR(e,t){let{placement:r,platform:n,elements:i}=e,o=await (null==n.isRTL?void 0:n.isRTL(i.floating)),s=eo(r),a=es(r),l="y"===ec(r),u=eE.has(s)?-1:1,c=o&&l?-1:1,d=ei(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}function ej(){return"undefined"!=typeof window}function ek(e){return eT(e)?(e.nodeName||"").toLowerCase():"#document"}function eN(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eL(e){var t;return null==(t=(eT(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eT(e){return!!ej()&&(e instanceof Node||e instanceof eN(e).Node)}function eP(e){return!!ej()&&(e instanceof Element||e instanceof eN(e).Element)}function eM(e){return!!ej()&&(e instanceof HTMLElement||e instanceof eN(e).HTMLElement)}function eD(e){return!!ej()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof eN(e).ShadowRoot)}let eA=new Set(["inline","contents"]);function eO(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=eG(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!eA.has(i)}let eW=new Set(["table","td","th"]),eI=[":popover-open",":modal"];function e_(e){return eI.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let eB=["transform","translate","scale","rotate","perspective"],eH=["transform","translate","scale","rotate","perspective","filter"],ez=["paint","layout","strict","content"];function eU(e){let t=eF(),r=eP(e)?eG(e):e;return eB.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||eH.some(e=>(r.willChange||"").includes(e))||ez.some(e=>(r.contain||"").includes(e))}function eF(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let eV=new Set(["html","body","#document"]);function e$(e){return eV.has(ek(e))}function eG(e){return eN(e).getComputedStyle(e)}function eK(e){return eP(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eX(e){if("html"===ek(e))return e;let t=e.assignedSlot||e.parentNode||eD(e)&&e.host||eL(e);return eD(t)?t.host:t}function eq(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=eX(t);return e$(r)?t.ownerDocument?t.ownerDocument.body:t.body:eM(r)&&eO(r)?r:e(r)}(e),o=i===(null==(n=e.ownerDocument)?void 0:n.body),s=eN(i);if(o){let e=eY(s);return t.concat(s,s.visualViewport||[],eO(i)?i:[],e&&r?eq(e):[])}return t.concat(i,eq(i,[],r))}function eY(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eZ(e){let t=eG(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=eM(e),o=i?e.offsetWidth:r,s=i?e.offsetHeight:n,a=Q(r)!==o||Q(n)!==s;return a&&(r=o,n=s),{width:r,height:n,$:a}}function eJ(e){return eP(e)?e:e.contextElement}function eQ(e){let t=eJ(e);if(!eM(t))return et(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:o}=eZ(t),s=(o?Q(r.width):r.width)/n,a=(o?Q(r.height):r.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}let e0=et(0);function e1(e){let t=eN(e);return eF()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:e0}function e2(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),s=eJ(e),a=et(1);t&&(n?eP(n)&&(a=eQ(n)):a=eQ(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===eN(s))&&i)?e1(s):et(0),u=(o.left+l.x)/a.x,c=(o.top+l.y)/a.y,d=o.width/a.x,h=o.height/a.y;if(s){let e=eN(s),t=n&&eP(n)?eN(n):n,r=e,i=eY(r);for(;i&&n&&t!==r;){let e=eQ(i),t=i.getBoundingClientRect(),n=eG(i),o=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,c*=e.y,d*=e.x,h*=e.y,u+=o,c+=s,i=eY(r=eN(i))}}return ey({width:d,height:h,x:u,y:c})}function e5(e,t){let r=eK(e).scrollLeft;return t?t.left+r:e2(eL(e)).left+r}function e3(e,t){let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-e5(e,r),y:r.top+t.scrollTop}}let e4=new Set(["absolute","fixed"]);function e6(e,t,r){var n;let i;if("viewport"===t)i=function(e,t){let r=eN(e),n=eL(e),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;let e=eF();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}let u=e5(n);if(u<=0){let e=n.ownerDocument,t=e.body,r=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,s=Math.abs(n.clientWidth-t.clientWidth-i);s<=25&&(o-=s)}else u<=25&&(o+=u);return{width:o,height:s,x:a,y:l}}(e,r);else if("document"===t){let t,r,o,s,a,l,u;n=eL(e),t=eL(n),r=eK(n),o=n.ownerDocument.body,s=J(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=J(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),l=-r.scrollLeft+e5(n),u=-r.scrollTop,"rtl"===eG(o).direction&&(l+=J(t.clientWidth,o.clientWidth)-s),i={width:s,height:a,x:l,y:u}}else if(eP(t)){let e,n,o,s,a,l;n=(e=e2(t,!0,"fixed"===r)).top+t.clientTop,o=e.left+t.clientLeft,s=eM(t)?eQ(t):et(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,i={width:a,height:l,x:o*s.x,y:n*s.y}}else{let r=e1(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return ey(i)}function e9(e){return"static"===eG(e).position}function e7(e,t){if(!eM(e)||"fixed"===eG(e).position)return null;if(t)return t(e);let r=e.offsetParent;return eL(e)===r&&(r=r.ownerDocument.body),r}function e8(e,t){var r;let n=eN(e);if(e_(e))return n;if(!eM(e)){let t=eX(e);for(;t&&!e$(t);){if(eP(t)&&!e9(t))return t;t=eX(t)}return n}let i=e7(e,t);for(;i&&(r=i,eW.has(ek(r)))&&e9(i);)i=e7(i,t);return i&&e$(i)&&e9(i)&&!eU(i)?n:i||function(e){let t=eX(e);for(;eM(t)&&!e$(t);){if(eU(t))return t;if(e_(t))break;t=eX(t)}return null}(e)||n}let te=async function(e){let t=this.getOffsetParent||e8,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=eM(t),i=eL(t),o="fixed"===r,s=e2(e,!0,o,t),a={scrollLeft:0,scrollTop:0},l=et(0);if(n||!n&&!o)if(("body"!==ek(t)||eO(i))&&(a=eK(t)),n){let e=e2(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=e5(i));o&&!n&&i&&(l.x=e5(i));let u=!i||n||o?et(0):e3(i,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},tt={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,o="fixed"===i,s=eL(n),a=!!t&&e_(t.floating);if(n===s||a&&o)return r;let l={scrollLeft:0,scrollTop:0},u=et(1),c=et(0),d=eM(n);if((d||!d&&!o)&&(("body"!==ek(n)||eO(s))&&(l=eK(n)),eM(n))){let e=e2(n);u=eQ(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}let h=!s||d||o?et(0):e3(s,l);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:r.y*u.y-l.scrollTop*u.y+c.y+h.y}},getDocumentElement:eL,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,o=[..."clippingAncestors"===r?e_(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=eq(e,[],!1).filter(e=>eP(e)&&"body"!==ek(e)),i=null,o="fixed"===eG(e).position,s=o?eX(e):e;for(;eP(s)&&!e$(s);){let t=eG(s),r=eU(s);r||"fixed"!==t.position||(i=null),(o?!r&&!i:!r&&"static"===t.position&&!!i&&e4.has(i.position)||eO(s)&&!r&&function e(t,r){let n=eX(t);return!(n===r||!eP(n)||e$(n))&&("fixed"===eG(n).position||e(n,r))}(e,s))?n=n.filter(e=>e!==s):i=t,s=eX(s)}return t.set(e,n),n}(t,this._c):[].concat(r),n],s=o[0],a=o.reduce((e,r)=>{let n=e6(t,r,i);return e.top=J(n.top,e.top),e.right=Z(n.right,e.right),e.bottom=Z(n.bottom,e.bottom),e.left=J(n.left,e.left),e},e6(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:e8,getElementRects:te,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=eZ(e);return{width:t,height:r}},getScale:eQ,isElement:eP,isRTL:function(e){return"rtl"===eG(e).direction}};function tr(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let tn=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=ei(e,t)||{};if(null==u)return{};let d=ev(c),h={x:r,y:n},f=ea(ec(i)),p=el(f),m=await s.getDimensions(u),g="y"===f,v=g?"clientHeight":"clientWidth",y=o.reference[p]+o.reference[f]-h[f]-o.floating[p],x=h[f]-o.reference[f],b=await (null==s.getOffsetParent?void 0:s.getOffsetParent(u)),w=b?b[v]:0;w&&await (null==s.isElement?void 0:s.isElement(b))||(w=a.floating[v]||o.floating[p]);let S=w/2-m[p]/2-1,C=Z(d[g?"top":"left"],S),E=Z(d[g?"bottom":"right"],S),R=w-m[p]-E,j=w/2-m[p]/2+(y/2-x/2),k=J(C,Z(j,R)),N=!l.arrow&&null!=es(i)&&j!==k&&o.reference[p]/2-(j<C?C:E)-m[p]/2<0,L=N?j<C?j-C:j-R:0;return{[f]:h[f]+L,data:{[f]:k,centerOffset:j-k-L,...N&&{alignmentOffset:L}},reset:N}}});var ti="undefined"!=typeof document?p.useLayoutEffect:function(){};function to(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!to(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!to(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function ts(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ta(e,t){let r=ts(e);return Math.round(t*r)/r}function tl(e){let t=p.useRef(e);return ti(()=>{t.current=e}),t}var tu=p.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...o}=e;return(0,f.jsx)(k.svg,{...o,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,f.jsx)("polygon",{points:"0,0 30,0 15,10"})})});tu.displayName="Arrow";var tc="Popper",[td,th]=b(tc),[tf,tp]=td(tc),tm=e=>{let{__scopePopper:t,children:r}=e,[n,i]=p.useState(null);return(0,f.jsx)(tf,{scope:t,anchor:n,onAnchorChange:i,children:r})};tm.displayName=tc;var tg="PopperAnchor",tv=p.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,o=tp(tg,r),s=p.useRef(null),a=(0,w.useComposedRefs)(t,s),l=p.useRef(null);return p.useEffect(()=>{let e=l.current;l.current=n?.current||s.current,e!==l.current&&o.onAnchorChange(l.current)}),n?null:(0,f.jsx)(k.div,{...i,ref:a})});tv.displayName=tg;var ty="PopperContent",[tx,tb]=td(ty),tw=p.forwardRef((e,t)=>{var r,n,i,o,s,a,l,u,c,d,h,m,g,y,x,b,S,C,E,R,j;let{__scopePopper:L,side:T="bottom",sideOffset:P=0,align:M="center",alignOffset:D=0,arrowPadding:A=0,avoidCollisions:O=!0,collisionBoundary:W=[],collisionPadding:I=0,sticky:_="partial",hideWhenDetached:B=!1,updatePositionStrategy:H="optimized",onPlaced:z,...U}=e,F=tp(ty,L),[V,$]=p.useState(null),K=(0,w.useComposedRefs)(t,e=>$(e)),[X,q]=p.useState(null),Y=function(e){let[t,r]=p.useState(void 0);return G(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(X),Q=Y?.width??0,et=Y?.height??0,er="number"==typeof I?I:{top:0,right:0,bottom:0,left:0,...I},en=Array.isArray(W)?W:[W],eu=en.length>0,ev={padding:er,boundary:en.filter(tR),altBoundary:eu},{refs:ey,floatingStyles:ex,placement:ej,isPositioned:ek,middlewareData:eN}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=p.useState(n);to(h,n)||f(n);let[m,g]=p.useState(null),[y,x]=p.useState(null),b=p.useCallback(e=>{e!==E.current&&(E.current=e,g(e))},[]),w=p.useCallback(e=>{e!==R.current&&(R.current=e,x(e))},[]),S=o||m,C=s||y,E=p.useRef(null),R=p.useRef(null),j=p.useRef(c),k=null!=l,N=tl(l),L=tl(i),T=tl(u),P=p.useCallback(()=>{var e,n;let i,o,s;if(!E.current||!R.current)return;let a={placement:t,strategy:r,middleware:h};L.current&&(a.platform=L.current),(e=E.current,n=R.current,i=new Map,s={...(o={platform:tt,...a}).platform,_c:i},eb(e,n,{...o,platform:s})).then(e=>{let t={...e,isPositioned:!1!==T.current};M.current&&!to(j.current,t)&&(j.current=t,v.flushSync(()=>{d(t)}))})},[h,t,r,L,T]);ti(()=>{!1===u&&j.current.isPositioned&&(j.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[u]);let M=p.useRef(!1);ti(()=>(M.current=!0,()=>{M.current=!1}),[]),ti(()=>{if(S&&(E.current=S),C&&(R.current=C),S&&C){if(N.current)return N.current(S,C,P);P()}},[S,C,P,N,k]);let D=p.useMemo(()=>({reference:E,floating:R,setReference:b,setFloating:w}),[b,w]),A=p.useMemo(()=>({reference:S,floating:C}),[S,C]),O=p.useMemo(()=>{let e={position:r,left:0,top:0};if(!A.floating)return e;let t=ta(A.floating,c.x),n=ta(A.floating,c.y);return a?{...e,transform:"translate("+t+"px, "+n+"px)",...ts(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,a,A.floating,c.x,c.y]);return p.useMemo(()=>({...c,update:P,refs:D,elements:A,floatingStyles:O}),[c,P,D,A,O])}({strategy:"fixed",placement:T+("center"!==M?"-"+M:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:u=!1}=n,c=eJ(e),d=o||s?[...c?eq(c):[],...eq(t)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let h=c&&l?function(e,t){let r,n=null,i=eL(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();let u=e.getBoundingClientRect(),{left:c,top:d,width:h,height:f}=u;if(a||t(),!h||!f)return;let p={rootMargin:-ee(d)+"px "+-ee(i.clientWidth-(c+h))+"px "+-ee(i.clientHeight-(d+f))+"px "+-ee(c)+"px",threshold:J(0,Z(1,l))||1},m=!0;function g(t){let n=t[0].intersectionRatio;if(n!==l){if(!m)return s();n?s(!1,n):r=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==n||tr(u,e.getBoundingClientRect())||s(),m=!1}try{n=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(g,p)}n.observe(e)}(!0),o}(c,r):null,f=-1,p=null;a&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),c&&!u&&p.observe(c),p.observe(t));let m=u?e2(e):null;return u&&function t(){let n=e2(e);m&&!tr(m,n)&&r(),m=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,u&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===H}),elements:{reference:F.anchor},middleware:[{...{name:"offset",options:i=r={mainAxis:P+et,alignmentAxis:D},async fn(e){var t,r;let{x:n,y:o,placement:s,middlewareData:a}=e,l=await eR(e,i);return s===(null==(t=a.offset)?void 0:t.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:s}}}},options:[r,n]},O&&{...{name:"shift",options:c=l={mainAxis:!0,crossAxis:!1,limiter:"partial"===_?{...(void 0===(a=o)&&(a={}),{options:a,fn(e){let{x:t,y:r,placement:n,rects:i,middlewareData:o}=e,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=ei(a,e),c={x:t,y:r},d=ec(n),h=ea(d),f=c[h],p=c[d],m=ei(s,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+g.mainAxis,r=i.reference[h]+i.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(u){var v,y;let e="y"===h?"width":"height",t=eE.has(eo(n)),r=i.reference[d]-i.floating[e]+(t&&(null==(v=o.offset)?void 0:v[d])||0)+(t?0:g.crossAxis),s=i.reference[d]+i.reference[e]+(t?0:(null==(y=o.offset)?void 0:y[d])||0)-(t?g.crossAxis:0);p<r?p=r:p>s&&(p=s)}return{[h]:f,[d]:p}}}),options:[o,s]}:void 0,...ev},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...a}=ei(c,e),l={x:t,y:r},u=await ew(e,a),d=ec(eo(n)),h=ea(d),f=l[h],p=l[d];if(i){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=f+u[e],n=f-u[t];f=J(r,Z(f,n))}if(o){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",r=p+u[e],n=p-u[t];p=J(r,Z(p,n))}let m=s.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[h]:i,[d]:o}}}}},options:[l,u]},O&&{...{name:"flip",options:m=d={...ev},async fn(e){var t,r,n,i,o,s,a,l;let u,c,d,{placement:h,middlewareData:f,rects:p,initialPlacement:g,platform:v,elements:y}=e,{mainAxis:x=!0,crossAxis:b=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:E=!0,...R}=ei(m,e);if(null!=(t=f.arrow)&&t.alignmentOffset)return{};let j=eo(h),k=ec(g),N=eo(g)===g,L=await (null==v.isRTL?void 0:v.isRTL(y.floating)),T=w||(N||!E?[eg(g)]:(u=eg(g),[ed(g),u,ed(u)])),P="none"!==C;!w&&P&&T.push(...(c=es(g),d=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?ef:eh;return t?eh:ef;case"left":case"right":return t?ep:em;default:return[]}}(eo(g),"start"===C,L),c&&(d=d.map(e=>e+"-"+c),E&&(d=d.concat(d.map(ed)))),d));let M=[g,...T],D=await ew(e,R),A=[],O=(null==(r=f.flip)?void 0:r.overflows)||[];if(x&&A.push(D[j]),b){let e,t,r,n,i=(s=h,a=p,void 0===(l=L)&&(l=!1),e=es(s),r=el(t=ea(ec(s))),n="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",a.reference[r]>a.floating[r]&&(n=eg(n)),[n,eg(n)]);A.push(D[i[0]],D[i[1]])}if(O=[...O,{placement:h,overflows:A}],!A.every(e=>e<=0)){let e=((null==(n=f.flip)?void 0:n.index)||0)+1,t=M[e];if(t&&("alignment"!==b||k===ec(t)||O.every(e=>ec(e.placement)!==k||e.overflows[0]>0)))return{data:{index:e,overflows:O},reset:{placement:t}};let r=null==(i=O.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(S){case"bestFit":{let e=null==(o=O.filter(e=>{if(P){let t=ec(e.placement);return t===k||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(r=e);break}case"initialPlacement":r=g}if(h!==r)return{reset:{placement:r}}}return{}}},options:[d,h]},{...{name:"size",options:x=g={...ev,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:o}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${r}px`),s.setProperty("--radix-popper-available-height",`${n}px`),s.setProperty("--radix-popper-anchor-width",`${i}px`),s.setProperty("--radix-popper-anchor-height",`${o}px`)}},async fn(e){var t,r;let n,i,{placement:o,rects:s,platform:a,elements:l}=e,{apply:u=()=>{},...c}=ei(x,e),d=await ew(e,c),h=eo(o),f=es(o),p="y"===ec(o),{width:m,height:g}=s.floating;"top"===h||"bottom"===h?(n=h,i=f===(await (null==a.isRTL?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(i=h,n="end"===f?"top":"bottom");let v=g-d.top-d.bottom,y=m-d.left-d.right,b=Z(g-d[n],v),w=Z(m-d[i],y),S=!e.middlewareData.shift,C=b,E=w;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(E=y),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(C=v),S&&!f){let e=J(d.left,0),t=J(d.right,0),r=J(d.top,0),n=J(d.bottom,0);p?E=m-2*(0!==e||0!==t?e+t:J(d.left,d.right)):C=g-2*(0!==r||0!==n?r+n:J(d.top,d.bottom))}await u({...e,availableWidth:E,availableHeight:C});let R=await a.getDimensions(l.floating);return m!==R.width||g!==R.height?{reset:{rects:!0}}:{}}},options:[g,y]},X&&{...{name:"arrow",options:C=b={element:X,padding:A},fn(e){let{element:t,padding:r}="function"==typeof C?C(e):C;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?tn({element:t.current,padding:r}).fn(e):{}:t?tn({element:t,padding:r}).fn(e):{}}},options:[b,S]},tj({arrowWidth:Q,arrowHeight:et}),B&&{...{name:"hide",options:j=E={strategy:"referenceHidden",...ev},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...n}=ei(j,e);switch(r){case"referenceHidden":{let r=eS(await ew(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:eC(r)}}}case"escaped":{let r=eS(await ew(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:eC(r)}}}default:return{}}}},options:[E,R]}]}),[eT,eP]=tk(ej),eM=N(z);G(()=>{ek&&eM?.()},[ek,eM]);let eD=eN.arrow?.x,eA=eN.arrow?.y,eO=eN.arrow?.centerOffset!==0,[eW,eI]=p.useState();return G(()=>{V&&eI(window.getComputedStyle(V).zIndex)},[V]),(0,f.jsx)("div",{ref:ey.setFloating,"data-radix-popper-content-wrapper":"",style:{...ex,transform:ek?ex.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eW,"--radix-popper-transform-origin":[eN.transformOrigin?.x,eN.transformOrigin?.y].join(" "),...eN.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,f.jsx)(tx,{scope:L,placedSide:eT,onArrowChange:q,arrowX:eD,arrowY:eA,shouldHideArrow:eO,children:(0,f.jsx)(k.div,{"data-side":eT,"data-align":eP,...U,ref:K,style:{...U.style,animation:ek?void 0:"none"}})})})});tw.displayName=ty;var tS="PopperArrow",tC={top:"bottom",right:"left",bottom:"top",left:"right"},tE=p.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=tb(tS,r),o=tC[i.placedSide];return(0,f.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,f.jsx)(tu,{...n,ref:t,style:{...n.style,display:"block"}})})});function tR(e){return null!==e}tE.displayName=tS;var tj=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,s=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,u]=tk(r),c={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+s/2,h=(i.arrow?.y??0)+a/2,f="",p="";return"bottom"===l?(f=o?c:`${d}px`,p=`${-a}px`):"top"===l?(f=o?c:`${d}px`,p=`${n.floating.height+a}px`):"right"===l?(f=`${-a}px`,p=o?c:`${h}px`):"left"===l&&(f=`${n.floating.width+a}px`,p=o?c:`${h}px`),{data:{x:f,y:p}}}});function tk(e){let[t,r="center"]=e.split("-");return[t,r]}var tN=p.forwardRef((e,t)=>{let{container:r,...n}=e,[i,o]=p.useState(!1);G(()=>o(!0),[]);let s=r||i&&globalThis?.document?.body;return s?v.default.createPortal((0,f.jsx)(k.div,{...n,ref:t}),s):null});tN.displayName="Portal",p[" useEffectEvent ".trim().toString()],p[" useInsertionEffect ".trim().toString()];var tL=p[" useInsertionEffect ".trim().toString()]||G;function tT({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[i,o,s]=function({defaultProp:e,onChange:t}){let[r,n]=p.useState(e),i=p.useRef(r),o=p.useRef(t);return tL(()=>{o.current=t},[t]),p.useEffect(()=>{i.current!==r&&(o.current?.(r),i.current=r)},[r,i]),[r,n,o]}({defaultProp:t,onChange:r}),a=void 0!==e,l=a?e:i;{let t=p.useRef(void 0!==e);p.useEffect(()=>{let e=t.current;if(e!==a){let t=a?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=a},[a,n])}return[l,p.useCallback(t=>{if(a){let r="function"==typeof t?t(e):t;r!==e&&s.current?.(r)}else o(t)},[a,e,o,s])]}Symbol("RADIX:SYNC_STATE");var tP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});p.forwardRef((e,t)=>(0,f.jsx)(k.span,{...e,ref:t,style:{...tP,...e.style}})).displayName="VisuallyHidden";var tM=new WeakMap,tD=new WeakMap,tA={},tO=0,tW=function(e){return e&&(e.host||tW(e.parentNode))},tI=function(e,t,r,n){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=tW(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});tA[r]||(tA[r]=new WeakMap);var o=tA[r],s=[],a=new Set,l=new Set(i),u=function(e){!e||a.has(e)||(a.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(a.has(e))c(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(tM.get(e)||0)+1,u=(o.get(e)||0)+1;tM.set(e,l),o.set(e,u),s.push(e),1===l&&i&&tD.set(e,!0),1===u&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),a.clear(),tO++,function(){s.forEach(function(e){var t=tM.get(e)-1,i=o.get(e)-1;tM.set(e,t),o.set(e,i),t||(tD.has(e)||e.removeAttribute(n),tD.delete(e)),i||e.removeAttribute(r)}),--tO||(tM=new WeakMap,tM=new WeakMap,tD=new WeakMap,tA={})}},t_=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),tI(n,i,r,"aria-hidden")):function(){return null}},tB=function(){return(tB=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function tH(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var tz=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),tU="width-before-scroll-bar";function tF(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var tV="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,t$=new WeakMap,tG=(void 0===i&&(i={}),(void 0===o&&(o=function(e){return e}),s=[],a=!1,l={read:function(){if(a)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:null},useMedium:function(e){var t=o(e,a);return s.push(t),function(){s=s.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(a=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){a=!0;var t=[];if(s.length){var r=s;s=[],r.forEach(e),t=s}var n=function(){var r=t;t=[],r.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}}).options=tB({async:!0,ssr:!1},i),l),tK=function(){},tX=p.forwardRef(function(e,t){var r,n,i,o,s=p.useRef(null),a=p.useState({onScrollCapture:tK,onWheelCapture:tK,onTouchMoveCapture:tK}),l=a[0],u=a[1],c=e.forwardProps,d=e.children,h=e.className,f=e.removeScrollBar,m=e.enabled,g=e.shards,v=e.sideCar,y=e.noRelative,x=e.noIsolation,b=e.inert,w=e.allowPinchZoom,S=e.as,C=e.gapMode,E=tH(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=(r=[s,t],n=function(e){return r.forEach(function(t){return tF(t,e)})},(i=(0,p.useState)(function(){return{value:null,callback:n,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=n,o=i.facade,tV(function(){var e=t$.get(o);if(e){var t=new Set(e),n=new Set(r),i=o.current;t.forEach(function(e){n.has(e)||tF(e,null)}),n.forEach(function(e){t.has(e)||tF(e,i)})}t$.set(o,r)},[r]),o),j=tB(tB({},E),l);return p.createElement(p.Fragment,null,m&&p.createElement(v,{sideCar:tG,removeScrollBar:f,shards:g,noRelative:y,noIsolation:x,inert:b,setCallbacks:u,allowPinchZoom:!!w,lockRef:s,gapMode:C}),c?p.cloneElement(p.Children.only(d),tB(tB({},j),{ref:R})):p.createElement(void 0===S?"div":S,tB({},j,{className:h,ref:R}),d))});tX.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},tX.classNames={fullWidth:tU,zeroRight:tz};var tq=function(e){var t=e.sideCar,r=tH(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return p.createElement(n,tB({},r))};tq.isSideCarExport=!0;var tY=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=h||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var n,i;(n=t).styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tZ=function(){var e=tY();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tJ=function(){var e=tZ();return function(t){return e(t.styles,t.dynamic),null}},tQ={left:0,top:0,right:0,gap:0},t0=function(e){return parseInt(e||"",10)||0},t1=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[t0(r),t0(n),t0(i)]},t2=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return tQ;var t=t1(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},t5=tJ(),t3="data-scroll-locked",t4=function(e,t,r,n){var i=e.left,o=e.top,s=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(t3,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(tz," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(tU," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(tz," .").concat(tz," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(tU," .").concat(tU," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(t3,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},t6=function(){var e=parseInt(document.body.getAttribute(t3)||"0",10);return isFinite(e)?e:0},t9=function(){p.useEffect(function(){return document.body.setAttribute(t3,(t6()+1).toString()),function(){var e=t6()-1;e<=0?document.body.removeAttribute(t3):document.body.setAttribute(t3,e.toString())}},[])},t7=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;t9();var o=p.useMemo(function(){return t2(i)},[i]);return p.createElement(t5,{styles:t4(o,!t,i,r?"":"!important")})},t8=!1;if("undefined"!=typeof window)try{var re=Object.defineProperty({},"passive",{get:function(){return t8=!0,!0}});window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch(e){t8=!1}var rt=!!t8&&{passive:!1},rr=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},rn=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),ri(e,n)){var i=ro(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body)return!1},ri=function(e,t){return"v"===e?rr(t,"overflowY"):rr(t,"overflowX")},ro=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},rs=function(e,t,r,n,i){var o,s=(o=window.getComputedStyle(t).direction,"h"===e&&"rtl"===o?-1:1),a=s*n,l=r.target,u=t.contains(l),c=!1,d=a>0,h=0,f=0;do{if(!l)break;var p=ro(e,l),m=p[0],g=p[1]-p[2]-s*m;(m||g)&&ri(e,l)&&(h+=g,f+=m);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!u&&l!==document.body||u&&(t.contains(l)||t===l))return d&&(i&&1>Math.abs(h)||!i&&a>h)?c=!0:!d&&(i&&1>Math.abs(f)||!i&&-a>f)&&(c=!0),c},ra=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rl=function(e){return[e.deltaX,e.deltaY]},ru=function(e){return e&&"current"in e?e.current:e},rc=0,rd=[];let rh=(u=function(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),i=p.useState(rc++)[0],o=p.useState(tJ)[0],s=p.useRef(e);p.useEffect(function(){s.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(ru),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=p.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var i,o=ra(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-o[0],u="deltaY"in e?e.deltaY:a[1]-o[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===c||f.contains(c)))return!1;var p=rn(d,c);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=rn(d,c)),!p)return!1;if(!n.current&&"changedTouches"in e&&(l||u)&&(n.current=i),!i)return!0;var m=n.current||i;return rs(m,t,e,"h"===m?l:u,!0)},[]),l=p.useCallback(function(e){if(rd.length&&rd[rd.length-1]===o){var r="deltaY"in e?rl(e):ra(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var i=(s.current.shards||[]).map(ru).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?a(e,i[0]):!s.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),u=p.useCallback(function(e,r,n,i){var o={name:e,delta:r,target:n,should:i,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),c=p.useCallback(function(e){r.current=ra(e),n.current=void 0},[]),d=p.useCallback(function(t){u(t.type,rl(t),t.target,a(t,e.lockRef.current))},[]),h=p.useCallback(function(t){u(t.type,ra(t),t.target,a(t,e.lockRef.current))},[]);p.useEffect(function(){return rd.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,rt),document.addEventListener("touchmove",l,rt),document.addEventListener("touchstart",c,rt),function(){rd=rd.filter(function(e){return e!==o}),document.removeEventListener("wheel",l,rt),document.removeEventListener("touchmove",l,rt),document.removeEventListener("touchstart",c,rt)}},[]);var f=e.removeScrollBar,m=e.inert;return p.createElement(p.Fragment,null,m?p.createElement(o,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,f?p.createElement(t7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},tG.useMedium(u),tq);var rf=p.forwardRef(function(e,t){return p.createElement(tX,tB({},e,{ref:t,sideCar:rh}))});rf.classNames=tX.classNames;var rp=[" ","Enter","ArrowUp","ArrowDown"],rm=[" ","Enter"],rg="Select",[rv,ry,rx]=function(e){let t=e+"CollectionProvider",[r,n]=b(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{let{scope:t,children:r}=e,n=p.default.useRef(null),o=p.default.useRef(new Map).current;return(0,f.jsx)(i,{scope:t,itemMap:o,collectionRef:n,children:r})};s.displayName=t;let a=e+"CollectionSlot",l=(0,S.createSlot)(a),u=p.default.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=o(a,r),s=(0,w.useComposedRefs)(t,i.collectionRef);return(0,f.jsx)(l,{ref:s,children:n})});u.displayName=a;let c=e+"CollectionItemSlot",d="data-radix-collection-item",h=(0,S.createSlot)(c),m=p.default.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,s=p.default.useRef(null),a=(0,w.useComposedRefs)(t,s),l=o(c,r);return p.default.useEffect(()=>(l.itemMap.set(s,{ref:s,...i}),()=>void l.itemMap.delete(s))),(0,f.jsx)(h,{...{[d]:""},ref:a,children:n})});return m.displayName=c,[{Provider:s,Slot:u,ItemSlot:m},function(t){let r=o(e+"CollectionConsumer",t);return p.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}(rg),[rb,rw]=b(rg,[rx,th]),rS=th(),[rC,rE]=rb(rg),[rR,rj]=rb(rg),rk=e=>{let t,{__scopeSelect:r,children:n,open:i,defaultOpen:o,onOpenChange:s,value:a,defaultValue:l,onValueChange:u,dir:c,name:d,autoComplete:h,disabled:m,required:g,form:v}=e,y=rS(r),[x,b]=p.useState(null),[w,S]=p.useState(null),[C,E]=p.useState(!1),R=(t=p.useContext(j),c||t||"ltr"),[k,N]=tT({prop:i,defaultProp:o??!1,onChange:s,caller:rg}),[L,T]=tT({prop:a,defaultProp:l,onChange:u,caller:rg}),P=p.useRef(null),M=!x||v||!!x.closest("form"),[D,A]=p.useState(new Set),O=Array.from(D).map(e=>e.props.value).join(";");return(0,f.jsx)(tm,{...y,children:(0,f.jsxs)(rC,{required:g,scope:r,trigger:x,onTriggerChange:b,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:E,contentId:q(),value:L,onValueChange:T,open:k,onOpenChange:N,dir:R,triggerPointerDownPosRef:P,disabled:m,children:[(0,f.jsx)(rv.Provider,{scope:r,children:(0,f.jsx)(rR,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:p.useCallback(e=>{A(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:n})}),M?(0,f.jsxs)(ni,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:e=>T(e.target.value),disabled:m,form:v,children:[void 0===L?(0,f.jsx)("option",{value:""}):null,Array.from(D)]},O):null]})})};rk.displayName=rg;var rN="SelectTrigger",rL=p.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...i}=e,o=rS(r),s=rE(rN,r),a=s.disabled||n,l=(0,w.useComposedRefs)(t,s.onTriggerChange),u=ry(r),c=p.useRef("touch"),[d,h,m]=ns(e=>{let t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===s.value),n=na(t,e,r);void 0!==n&&s.onValueChange(n.value)}),g=e=>{a||(s.onOpenChange(!0),m()),e&&(s.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,f.jsx)(tv,{asChild:!0,...o,children:(0,f.jsx)(k.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":no(s.value)?"":void 0,...i,ref:l,onClick:x(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==c.current&&g(e)}),onPointerDown:x(i.onPointerDown,e=>{c.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:x(i.onKeyDown,e=>{let t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&rp.includes(e.key)&&(g(),e.preventDefault())})})})});rL.displayName=rN;var rT="SelectValue",rP=p.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:o,placeholder:s="",...a}=e,l=rE(rT,r),{onValueNodeHasChildrenChange:u}=l,c=void 0!==o,d=(0,w.useComposedRefs)(t,l.onValueNodeChange);return G(()=>{u(c)},[u,c]),(0,f.jsx)(k.span,{...a,ref:d,style:{pointerEvents:"none"},children:no(l.value)?(0,f.jsx)(f.Fragment,{children:s}):o})});rP.displayName=rT;var rM=p.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,f.jsx)(k.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});rM.displayName="SelectIcon";var rD=e=>(0,f.jsx)(tN,{asChild:!0,...e});rD.displayName="SelectPortal";var rA="SelectContent",rO=p.forwardRef((e,t)=>{let r=rE(rA,e.__scopeSelect),[n,i]=p.useState();return(G(()=>{i(new DocumentFragment)},[]),r.open)?(0,f.jsx)(rB,{...e,ref:t}):n?v.createPortal((0,f.jsx)(rW,{scope:e.__scopeSelect,children:(0,f.jsx)(rv.Slot,{scope:e.__scopeSelect,children:(0,f.jsx)("div",{children:e.children})})}),n):null});rO.displayName=rA;var[rW,rI]=rb(rA),r_=(0,S.createSlot)("SelectContent.RemoveScroll"),rB=p.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y,...b}=e,S=rE(rA,r),[C,E]=p.useState(null),[R,j]=p.useState(null),k=(0,w.useComposedRefs)(t,e=>E(e)),[N,L]=p.useState(null),[T,M]=p.useState(null),D=ry(r),[A,W]=p.useState(!1),I=p.useRef(!1);p.useEffect(()=>{if(C)return t_(C)},[C]),O();let _=p.useCallback(e=>{let[t,...r]=D().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let r of e)if(r===i||(r?.scrollIntoView({block:"nearest"}),r===t&&R&&(R.scrollTop=0),r===n&&R&&(R.scrollTop=R.scrollHeight),r?.focus(),document.activeElement!==i))return},[D,R]),B=p.useCallback(()=>_([N,C]),[_,N,C]);p.useEffect(()=>{A&&B()},[A,B]);let{onOpenChange:z,triggerPointerDownPosRef:U}=S;p.useEffect(()=>{if(C){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(U.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(U.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():C.contains(r.target)||z(!1),document.removeEventListener("pointermove",t),U.current=null};return null!==U.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[C,z,U]),p.useEffect(()=>{let e=()=>z(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[z]);let[F,V]=ns(e=>{let t=D().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=na(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),$=p.useCallback((e,t,r)=>{let n=!I.current&&!r;(void 0!==S.value&&S.value===t||n)&&(L(e),n&&(I.current=!0))},[S.value]),G=p.useCallback(()=>C?.focus(),[C]),K=p.useCallback((e,t,r)=>{let n=!I.current&&!r;(void 0!==S.value&&S.value===t||n)&&M(e)},[S.value]),X="popper"===n?rz:rH,q=X===rz?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y}:{};return(0,f.jsx)(rW,{scope:r,content:C,viewport:R,onViewportChange:j,itemRefCallback:$,selectedItem:N,onItemLeave:G,itemTextRefCallback:K,focusSelectedItem:B,selectedItemText:T,position:n,isPositioned:A,searchRef:F,children:(0,f.jsx)(rf,{as:r_,allowPinchZoom:!0,children:(0,f.jsx)(H,{asChild:!0,trapped:S.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:x(i,e=>{S.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,f.jsx)(P,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:(0,f.jsx)(X,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:e=>e.preventDefault(),...b,...q,onPlaced:()=>W(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:x(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||V(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=D().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>_(t)),e.preventDefault()}})})})})})})});rB.displayName="SelectContentImpl";var rH=p.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...i}=e,o=rE(rA,r),s=rI(rA,r),[a,l]=p.useState(null),[u,c]=p.useState(null),d=(0,w.useComposedRefs)(t,e=>c(e)),h=ry(r),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:b,focusSelectedItem:S}=s,C=p.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&v&&x&&b){let e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),i=b.getBoundingClientRect();if("rtl"!==o.dir){let n=i.left-t.left,o=r.left-n,s=e.left-o,l=e.width+s,u=Math.max(l,t.width),c=y(o,[10,Math.max(10,window.innerWidth-10-u)]);a.style.minWidth=l+"px",a.style.left=c+"px"}else{let n=t.right-i.right,o=window.innerWidth-r.right-n,s=window.innerWidth-e.right-o,l=e.width+s,u=Math.max(l,t.width),c=y(o,[10,Math.max(10,window.innerWidth-10-u)]);a.style.minWidth=l+"px",a.style.right=c+"px"}let s=h(),l=window.innerHeight-20,c=v.scrollHeight,d=window.getComputedStyle(u),f=parseInt(d.borderTopWidth,10),p=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),w=f+p+c+parseInt(d.paddingBottom,10)+g,S=Math.min(5*x.offsetHeight,w),C=window.getComputedStyle(v),E=parseInt(C.paddingTop,10),R=parseInt(C.paddingBottom,10),j=e.top+e.height/2-10,k=x.offsetHeight/2,N=f+p+(x.offsetTop+k);if(N<=j){let e=s.length>0&&x===s[s.length-1].ref.current;a.style.bottom="0px";let t=Math.max(l-j,k+(e?R:0)+(u.clientHeight-v.offsetTop-v.offsetHeight)+g);a.style.height=N+t+"px"}else{let e=s.length>0&&x===s[0].ref.current;a.style.top="0px";let t=Math.max(j,f+v.offsetTop+(e?E:0)+k);a.style.height=t+(w-N)+"px",v.scrollTop=N-j+v.offsetTop}a.style.margin="10px 0",a.style.minHeight=S+"px",a.style.maxHeight=l+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,o.trigger,o.valueNode,a,u,v,x,b,o.dir,n]);G(()=>C(),[C]);let[E,R]=p.useState();G(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);let j=p.useCallback(e=>{e&&!0===g.current&&(C(),S?.(),g.current=!1)},[C,S]);return(0,f.jsx)(rU,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:(0,f.jsx)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:(0,f.jsx)(k.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});rH.displayName="SelectItemAlignedPosition";var rz=p.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=10,...o}=e,s=rS(r);return(0,f.jsx)(tw,{...s,...o,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rz.displayName="SelectPopperPosition";var[rU,rF]=rb(rA,{}),rV="SelectViewport",r$=p.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...i}=e,o=rI(rV,r),s=rF(rV,r),a=(0,w.useComposedRefs)(t,o.onViewportChange),l=p.useRef(0);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,f.jsx)(rv.Slot,{scope:r,children:(0,f.jsx)(k.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:x(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=s;if(n?.current&&r){let e=Math.abs(l.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,i=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(i<n){let o=i+e,s=Math.min(n,o),a=o-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=a>0?a:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});r$.displayName=rV;var rG="SelectGroup",[rK,rX]=rb(rG),rq=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=q();return(0,f.jsx)(rK,{scope:r,id:i,children:(0,f.jsx)(k.div,{role:"group","aria-labelledby":i,...n,ref:t})})});rq.displayName=rG;var rY="SelectLabel",rZ=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=rX(rY,r);return(0,f.jsx)(k.div,{id:i.id,...n,ref:t})});rZ.displayName=rY;var rJ="SelectItem",[rQ,r0]=rb(rJ),r1=p.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:i=!1,textValue:o,...s}=e,a=rE(rJ,r),l=rI(rJ,r),u=a.value===n,[c,d]=p.useState(o??""),[h,m]=p.useState(!1),g=(0,w.useComposedRefs)(t,e=>l.itemRefCallback?.(e,n,i)),v=q(),y=p.useRef("touch"),b=()=>{i||(a.onValueChange(n),a.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,f.jsx)(rQ,{scope:r,value:n,disabled:i,textId:v,isSelected:u,onItemTextChange:p.useCallback(e=>{d(t=>t||(e?.textContent??"").trim())},[]),children:(0,f.jsx)(rv.ItemSlot,{scope:r,value:n,disabled:i,textValue:c,children:(0,f.jsx)(k.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:g,onFocus:x(s.onFocus,()=>m(!0)),onBlur:x(s.onBlur,()=>m(!1)),onClick:x(s.onClick,()=>{"mouse"!==y.current&&b()}),onPointerUp:x(s.onPointerUp,()=>{"mouse"===y.current&&b()}),onPointerDown:x(s.onPointerDown,e=>{y.current=e.pointerType}),onPointerMove:x(s.onPointerMove,e=>{y.current=e.pointerType,i?l.onItemLeave?.():"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:x(s.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:x(s.onKeyDown,e=>{(l.searchRef?.current===""||" "!==e.key)&&(rm.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});r1.displayName=rJ;var r2="SelectItemText",r5=p.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,...o}=e,s=rE(r2,r),a=rI(r2,r),l=r0(r2,r),u=rj(r2,r),[c,d]=p.useState(null),h=(0,w.useComposedRefs)(t,e=>d(e),l.onItemTextChange,e=>a.itemTextRefCallback?.(e,l.value,l.disabled)),m=c?.textContent,g=p.useMemo(()=>(0,f.jsx)("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=u;return G(()=>(y(g),()=>x(g)),[y,x,g]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.span,{id:l.textId,...o,ref:h}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?v.createPortal(o.children,s.valueNode):null]})});r5.displayName=r2;var r3="SelectItemIndicator",r4=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return r0(r3,r).isSelected?(0,f.jsx)(k.span,{"aria-hidden":!0,...n,ref:t}):null});r4.displayName=r3;var r6="SelectScrollUpButton",r9=p.forwardRef((e,t)=>{let r=rI(r6,e.__scopeSelect),n=rF(r6,e.__scopeSelect),[i,o]=p.useState(!1),s=(0,w.useComposedRefs)(t,n.onScrollButtonChange);return G(()=>{if(r.viewport&&r.isPositioned){let e=function(){o(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,f.jsx)(ne,{...e,ref:s,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});r9.displayName=r6;var r7="SelectScrollDownButton",r8=p.forwardRef((e,t)=>{let r=rI(r7,e.__scopeSelect),n=rF(r7,e.__scopeSelect),[i,o]=p.useState(!1),s=(0,w.useComposedRefs)(t,n.onScrollButtonChange);return G(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;o(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,f.jsx)(ne,{...e,ref:s,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});r8.displayName=r7;var ne=p.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...i}=e,o=rI("SelectScrollButton",r),s=p.useRef(null),a=ry(r),l=p.useCallback(()=>{null!==s.current&&(window.clearInterval(s.current),s.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),G(()=>{let e=a().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[a]),(0,f.jsx)(k.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:x(i.onPointerDown,()=>{null===s.current&&(s.current=window.setInterval(n,50))}),onPointerMove:x(i.onPointerMove,()=>{o.onItemLeave?.(),null===s.current&&(s.current=window.setInterval(n,50))}),onPointerLeave:x(i.onPointerLeave,()=>{l()})})}),nt=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,f.jsx)(k.div,{"aria-hidden":!0,...n,ref:t})});nt.displayName="SelectSeparator";var nr="SelectArrow",nn=p.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=rS(r),o=rE(nr,r),s=rI(nr,r);return o.open&&"popper"===s.position?(0,f.jsx)(tE,{...i,...n,ref:t}):null});nn.displayName=nr;var ni=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let i,o=p.useRef(null),s=(0,w.useComposedRefs)(n,o),a=(i=p.useRef({value:t,previous:t}),p.useMemo(()=>(i.current.value!==t&&(i.current.previous=i.current.value,i.current.value=t),i.current.previous),[t]));return p.useEffect(()=>{let e=o.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(a!==t&&r){let n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[a,t]),(0,f.jsx)(k.select,{...r,style:{...tP,...r.style},ref:s,defaultValue:t})});function no(e){return""===e||void 0===e}function ns(e){let t=N(e),r=p.useRef(""),n=p.useRef(0),i=p.useCallback(e=>{let i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,o]}function na(e,t,r){var n,i;let o=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1,a=(n=e,i=Math.max(s,0),n.map((e,t)=>n[(i+t)%n.length]));1===o.length&&(a=a.filter(e=>e!==r));let l=a.find(e=>e.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==r?l:void 0}ni.displayName="SelectBubbleInput",e.s(["Arrow",()=>nn,"Content",()=>rO,"Group",()=>rq,"Icon",()=>rM,"Item",()=>r1,"ItemIndicator",()=>r4,"ItemText",()=>r5,"Label",()=>rZ,"Portal",()=>rD,"Root",()=>rk,"ScrollDownButton",()=>r8,"ScrollUpButton",()=>r9,"Select",()=>rk,"SelectArrow",()=>nn,"SelectContent",()=>rO,"SelectGroup",()=>rq,"SelectIcon",()=>rM,"SelectItem",()=>r1,"SelectItemIndicator",()=>r4,"SelectItemText",()=>r5,"SelectLabel",()=>rZ,"SelectPortal",()=>rD,"SelectScrollDownButton",()=>r8,"SelectScrollUpButton",()=>r9,"SelectSeparator",()=>nt,"SelectTrigger",()=>rL,"SelectValue",()=>rP,"SelectViewport",()=>r$,"Separator",()=>nt,"Trigger",()=>rL,"Value",()=>rP,"Viewport",()=>r$,"createSelectScope",()=>rw],29402);var nl=e.i(29402),nl=nl,nu=e.i(75254);let nc=(0,nu.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),nd=(0,nu.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),nh=(0,nu.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var nf=e.i(47163);let np=nl.Root;nl.Group;let nm=nl.Value,ng=p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(nl.Trigger,{ref:n,className:(0,nf.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,f.jsx)(nl.Icon,{asChild:!0,children:(0,f.jsx)(nd,{className:"h-4 w-4 opacity-50"})})]}));ng.displayName=nl.Trigger.displayName;let nv=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(nl.ScrollUpButton,{ref:r,className:(0,nf.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,f.jsx)(nh,{className:"h-4 w-4"})}));nv.displayName=nl.ScrollUpButton.displayName;let ny=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(nl.ScrollDownButton,{ref:r,className:(0,nf.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,f.jsx)(nd,{className:"h-4 w-4"})}));ny.displayName=nl.ScrollDownButton.displayName;let nx=p.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>(0,f.jsx)(nl.Portal,{children:(0,f.jsxs)(nl.Content,{ref:i,className:(0,nf.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,f.jsx)(nv,{}),(0,f.jsx)(nl.Viewport,{className:(0,nf.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,f.jsx)(ny,{})]})}));nx.displayName=nl.Content.displayName,p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(nl.Label,{ref:r,className:(0,nf.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=nl.Label.displayName;let nb=p.forwardRef(({className:e,children:t,...r},n)=>(0,f.jsxs)(nl.Item,{ref:n,className:(0,nf.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,f.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,f.jsx)(nl.ItemIndicator,{children:(0,f.jsx)(nc,{className:"h-4 w-4"})})}),(0,f.jsx)(nl.ItemText,{children:t})]}));function nw({value:e,onChange:t,levels:r}){return(0,f.jsx)("div",{className:"flex w-full gap-1 sm:gap-2",children:r.map(r=>(0,f.jsx)("button",{type:"button",onClick:()=>t(r),className:(0,nf.cn)("flex-1 rounded-lg py-2 sm:py-3 text-xs sm:text-sm font-medium transition-all",e===r?"bg-primary text-primary-foreground shadow-sm":"bg-muted text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:r},r))})}nb.displayName=nl.Item.displayName,p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(nl.Separator,{ref:r,className:(0,nf.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=nl.Separator.displayName;var nS=e.i(96374);function nC({language:e}){let t,r=(t=nS.LANGUAGE_TO_FLAG[e])?`/flags/l/${t}.svg`:null;return(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,f.jsx)(m.default,{src:r,alt:`${e} flag`,width:20,height:15,className:"rounded-sm"}),(0,f.jsx)("span",{children:e})]})}function nE({config:e,onChange:t,onSubmit:r,onReset:n,hasSession:i,isStarting:o}){let s=[...nS.LANGUAGES].sort();return i?(0,f.jsxs)("div",{className:"flex items-center justify-between border-b border-border px-4 py-2",children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,f.jsxs)("span",{children:[(0,f.jsx)("span",{className:"font-medium text-foreground",children:e.foreignLanguage})," "," ",e.nativeLanguage]}),(0,f.jsx)("span",{className:"text-muted-foreground/50",children:""}),(0,f.jsxs)("span",{children:["Level:"," ",(0,f.jsx)("span",{className:"font-medium text-foreground",children:e.studentLevel})]})]}),(0,f.jsx)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:n,className:"h-7 px-3 text-xs",children:"Reset"})]}):(0,f.jsx)("div",{className:"flex min-h-[480px] items-center justify-center p-6",children:(0,f.jsxs)("form",{onSubmit:r,className:"w-full max-w-xl space-y-8",children:[(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Start your language practice"}),(0,f.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Choose your languages and level to begin"})]}),(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Learning"}),(0,f.jsxs)(np,{value:e.foreignLanguage,onValueChange:t("foreignLanguage"),children:[(0,f.jsx)(ng,{className:"w-full",children:(0,f.jsx)(nm,{children:(0,f.jsx)(nC,{language:e.foreignLanguage})})}),(0,f.jsx)(nx,{className:"max-h-[300px]",children:s.map(e=>(0,f.jsx)(nb,{value:e,children:(0,f.jsx)(nC,{language:e})},e))})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Native Language"}),(0,f.jsxs)(np,{value:e.nativeLanguage,onValueChange:t("nativeLanguage"),children:[(0,f.jsx)(ng,{className:"w-full",children:(0,f.jsx)(nm,{children:(0,f.jsx)(nC,{language:e.nativeLanguage})})}),(0,f.jsx)(nx,{className:"max-h-[300px]",children:s.map(e=>(0,f.jsx)(nb,{value:e,children:(0,f.jsx)(nC,{language:e})},e))})]})]})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Proficiency Level"}),(0,f.jsx)(nw,{value:e.studentLevel,onChange:t("studentLevel"),levels:nS.LEVELS}),(0,f.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["A1"===e.studentLevel&&"Beginner - Basic phrases and vocabulary","A2"===e.studentLevel&&"Elementary - Simple conversations","B1"===e.studentLevel&&"Intermediate - Everyday topics","B2"===e.studentLevel&&"Upper Intermediate - Complex discussions","C1"===e.studentLevel&&"Advanced - Fluent expression","C2"===e.studentLevel&&"Mastery - Near-native proficiency"]})]})]}),(0,f.jsx)("div",{className:"flex justify-center pt-2",children:(0,f.jsx)(g.Button,{type:"submit",disabled:o,size:"lg",className:"px-8",children:o?"Starting...":"Let's Chat"})})]})})}var nR=e.i(84614),nj=e=>{var t;let r,n,{present:i,children:o}=e,s=function(e){var t,r;let[n,i]=p.useState(),o=p.useRef(null),s=p.useRef(e),a=p.useRef("none"),[l,u]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},p.useReducer((e,t)=>r[e][t]??e,t));return p.useEffect(()=>{let e=nk(o.current);a.current="mounted"===l?e:"none"},[l]),G(()=>{let t=o.current,r=s.current;if(r!==e){let n=a.current,i=nk(t);e?u("MOUNT"):"none"===i||t?.display==="none"?u("UNMOUNT"):r&&n!==i?u("ANIMATION_OUT"):u("UNMOUNT"),s.current=e}},[e,u]),G(()=>{if(n){let e,t=n.ownerDocument.defaultView??window,r=r=>{let i=nk(o.current).includes(CSS.escape(r.animationName));if(r.target===n&&i&&(u("ANIMATION_END"),!s.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},i=e=>{e.target===n&&(a.current=nk(o.current))};return n.addEventListener("animationstart",i),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(e=>{o.current=e?getComputedStyle(e):null,i(e)},[])}}(i),a="function"==typeof o?o({present:s.isPresent}):p.Children.only(o),l=(0,w.useComposedRefs)(s.ref,(t=a,(n=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(n=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof o||s.isPresent?p.cloneElement(a,{ref:l}):null};function nk(e){return e?.animationName||"none"}nj.displayName="Presence";var nN="Dialog",[nL,nT]=b(nN),[nP,nM]=nL(nN),nD=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=p.useRef(null),l=p.useRef(null),[u,c]=tT({prop:n,defaultProp:i??!1,onChange:o,caller:nN});return(0,f.jsx)(nP,{scope:t,triggerRef:a,contentRef:l,contentId:q(),titleId:q(),descriptionId:q(),open:u,onOpenChange:c,onOpenToggle:p.useCallback(()=>c(e=>!e),[c]),modal:s,children:r})};nD.displayName=nN;var nA="DialogTrigger",nO=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=nM(nA,r),o=(0,w.useComposedRefs)(t,i.triggerRef);return(0,f.jsx)(k.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":n1(i.open),...n,ref:o,onClick:x(e.onClick,i.onOpenToggle)})});nO.displayName=nA;var nW="DialogPortal",[nI,n_]=nL(nW,{forceMount:void 0}),nB=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:i}=e,o=nM(nW,t);return(0,f.jsx)(nI,{scope:t,forceMount:r,children:p.Children.map(n,e=>(0,f.jsx)(nj,{present:r||o.open,children:(0,f.jsx)(tN,{asChild:!0,container:i,children:e})}))})};nB.displayName=nW;var nH="DialogOverlay",nz=p.forwardRef((e,t)=>{let r=n_(nH,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=nM(nH,e.__scopeDialog);return o.modal?(0,f.jsx)(nj,{present:n||o.open,children:(0,f.jsx)(nF,{...i,ref:t})}):null});nz.displayName=nH;var nU=(0,S.createSlot)("DialogOverlay.RemoveScroll"),nF=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=nM(nH,r);return(0,f.jsx)(rf,{as:nU,allowPinchZoom:!0,shards:[i.contentRef],children:(0,f.jsx)(k.div,{"data-state":n1(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),nV="DialogContent",n$=p.forwardRef((e,t)=>{let r=n_(nV,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,o=nM(nV,e.__scopeDialog);return(0,f.jsx)(nj,{present:n||o.open,children:o.modal?(0,f.jsx)(nG,{...i,ref:t}):(0,f.jsx)(nK,{...i,ref:t})})});n$.displayName=nV;var nG=p.forwardRef((e,t)=>{let r=nM(nV,e.__scopeDialog),n=p.useRef(null),i=(0,w.useComposedRefs)(t,r.contentRef,n);return p.useEffect(()=>{let e=n.current;if(e)return t_(e)},[]),(0,f.jsx)(nX,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:x(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:x(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:x(e.onFocusOutside,e=>e.preventDefault())})}),nK=p.forwardRef((e,t)=>{let r=nM(nV,e.__scopeDialog),n=p.useRef(!1),i=p.useRef(!1);return(0,f.jsx)(nX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let o=t.target;r.triggerRef.current?.contains(o)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),nX=p.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=nM(nV,r),l=p.useRef(null),u=(0,w.useComposedRefs)(t,l);return O(),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(H,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:o,children:(0,f.jsx)(P,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":n1(a.open),...s,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n4,{titleId:a.titleId}),(0,f.jsx)(n6,{contentRef:l,descriptionId:a.descriptionId})]})]})}),nq="DialogTitle",nY=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=nM(nq,r);return(0,f.jsx)(k.h2,{id:i.titleId,...n,ref:t})});nY.displayName=nq;var nZ="DialogDescription",nJ=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=nM(nZ,r);return(0,f.jsx)(k.p,{id:i.descriptionId,...n,ref:t})});nJ.displayName=nZ;var nQ="DialogClose",n0=p.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=nM(nQ,r);return(0,f.jsx)(k.button,{type:"button",...n,ref:t,onClick:x(e.onClick,()=>i.onOpenChange(!1))})});function n1(e){return e?"open":"closed"}n0.displayName=nQ;var n2="DialogTitleWarning",[n5,n3]=(c={contentName:nV,titleName:nq,docsSlug:"dialog"},t=p.createContext(c),(r=e=>{let{children:r,...n}=e,i=p.useMemo(()=>n,Object.values(n));return(0,f.jsx)(t.Provider,{value:i,children:r})}).displayName=n2+"Provider",[r,function(e){let r=p.useContext(t);if(r)return r;if(void 0!==c)return c;throw Error(`\`${e}\` must be used within \`${n2}\``)}]),n4=({titleId:e})=>{let t=n3(n2),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},n6=({contentRef:e,descriptionId:t})=>{let r=n3("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return p.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null};e.s(["Close",()=>n0,"Content",()=>n$,"Description",()=>nJ,"Dialog",()=>nD,"DialogClose",()=>n0,"DialogContent",()=>n$,"DialogDescription",()=>nJ,"DialogOverlay",()=>nz,"DialogPortal",()=>nB,"DialogTitle",()=>nY,"DialogTrigger",()=>nO,"Overlay",()=>nz,"Portal",()=>nB,"Root",()=>nD,"Title",()=>nY,"Trigger",()=>nO,"WarningProvider",()=>n5,"createDialogScope",()=>nT],26999);var n9=e.i(26999),n9=n9,n7=e.i(25913);let n8=(0,nu.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ie=n9.Root;n9.Trigger,n9.Close;let it=n9.Portal,ir=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(n9.Overlay,{className:(0,nf.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));ir.displayName=n9.Overlay.displayName;let ii=(0,n7.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),io=p.forwardRef(({side:e="right",className:t,children:r,...n},i)=>(0,f.jsxs)(it,{children:[(0,f.jsx)(ir,{}),(0,f.jsxs)(n9.Content,{ref:i,className:(0,nf.cn)(ii({side:e}),t),...n,children:[r,(0,f.jsxs)(n9.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,f.jsx)(n8,{className:"h-4 w-4"}),(0,f.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));io.displayName=n9.Content.displayName;let is=({className:e,...t})=>(0,f.jsx)("div",{className:(0,nf.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});is.displayName="SheetHeader";let ia=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(n9.Title,{ref:r,className:(0,nf.cn)("text-lg font-semibold text-foreground",e),...t}));ia.displayName=n9.Title.displayName;let il=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)(n9.Description,{ref:r,className:(0,nf.cn)("text-sm text-muted-foreground",e),...t}));function iu({label:e,description:t,selected:r,onClick:n}){return(0,f.jsxs)("button",{type:"button",onClick:n,className:(0,nf.cn)("flex flex-1 flex-col items-center gap-2 rounded-lg border p-4 transition-all",r?"border-primary bg-primary/5 text-primary":"border-border bg-background text-muted-foreground hover:border-muted-foreground/50 hover:bg-muted/50"),children:[(0,f.jsx)(nR.User,{className:(0,nf.cn)("h-6 w-6",r&&"text-primary")}),(0,f.jsx)("span",{className:"font-medium",children:e}),(0,f.jsx)("span",{className:"text-xs opacity-70",children:t})]})}function ic({open:e,onOpenChange:t,tutorGender:r,studentGender:n,onTutorGenderChange:i,onStudentGenderChange:o}){return(0,f.jsx)(ie,{open:e,onOpenChange:t,children:(0,f.jsxs)(io,{side:"right",className:"w-full sm:max-w-sm",children:[(0,f.jsxs)(is,{children:[(0,f.jsx)(ia,{children:"Voice Settings"}),(0,f.jsx)(il,{children:"Choose the voice gender for your tutor and for playback of your corrected messages."})]}),(0,f.jsxs)("div",{className:"mt-8 space-y-8",children:[(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Tutor Voice"}),(0,f.jsx)("p",{className:"text-xs text-muted-foreground",children:"The voice used for AI messages and tutor responses."}),(0,f.jsxs)("div",{className:"flex gap-3",children:[(0,f.jsx)(iu,{label:"Male",description:"Deeper voice",selected:"male"===r,onClick:()=>i("male")}),(0,f.jsx)(iu,{label:"Female",description:"Higher voice",selected:"female"===r,onClick:()=>i("female")})]})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Your Voice (for corrections)"}),(0,f.jsx)("p",{className:"text-xs text-muted-foreground",children:"The voice used when playing back your corrected messages."}),(0,f.jsxs)("div",{className:"flex gap-3",children:[(0,f.jsx)(iu,{label:"Male",description:"Deeper voice",selected:"male"===n,onClick:()=>o("male")}),(0,f.jsx)(iu,{label:"Female",description:"Higher voice",selected:"female"===n,onClick:()=>o("female")})]})]})]}),(0,f.jsx)("div",{className:"mt-8",children:(0,f.jsx)(g.Button,{onClick:()=>t(!1),className:"w-full",children:"Done"})})]})})}il.displayName=n9.Description.displayName;var id=e.i(28991);function ih(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class ip{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),null==r?void 0:r.once){let r=(...n)=>{this.un(e,r),t(...n)};return this.listeners[e].add(r),()=>this.un(e,r)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var r;null==(r=this.listeners[e])||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}}let im={decode:function(e,t){return ih(this,void 0,void 0,function*(){let r=new AudioContext({sampleRate:t});try{return yield r.decodeAudioData(e)}finally{r.close()}})},createBuffer:function(e,t){if(!e||0===e.length)throw Error("channelData must be a non-empty array");if(t<=0)throw Error("duration must be greater than 0");if("number"==typeof e[0]&&(e=[e]),!e[0]||0===e[0].length)throw Error("channelData must contain non-empty channel arrays");!function(e){let t=e[0];if(t.some(e=>e>1||e<-1)){let r=t.length,n=0;for(let e=0;e<r;e++){let r=Math.abs(t[e]);r>n&&(n=r)}for(let t of e)for(let e=0;e<r;e++)t[e]/=n}}(e);let r=e.map(e=>e instanceof Float32Array?e:Float32Array.from(e));return{duration:t,length:r[0].length,sampleRate:r[0].length/t,numberOfChannels:r.length,getChannelData:e=>{let t=r[e];if(!t)throw Error(`Channel ${e} not found`);return t},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function ig(e,t,r){let n=function e(t,r){let n=r.xmlns?document.createElementNS(r.xmlns,t):document.createElement(t);for(let[t,i]of Object.entries(r))if("children"===t&&i)for(let[t,r]of Object.entries(i))r instanceof Node?n.appendChild(r):"string"==typeof r?n.appendChild(document.createTextNode(r)):n.appendChild(e(t,r));else"style"===t?Object.assign(n.style,i):"textContent"===t?n.textContent=i:n.setAttribute(t,i.toString());return n}(e,t||{});return null==r||r.appendChild(n),n}var iv=Object.freeze({__proto__:null,createElement:ig,default:ig});let iy={fetchBlob:function(e,t,r){return ih(this,void 0,void 0,function*(){let n=yield fetch(e,r);if(n.status>=400)throw Error(`Failed to fetch ${e}: ${n.status} (${n.statusText})`);return function(e,t){ih(this,void 0,void 0,function*(){if(!e.body||!e.headers)return;let r=e.body.getReader(),n=Number(e.headers.get("Content-Length"))||0,i=0,o=e=>{t(Math.round((i+=(null==e?void 0:e.length)||0)/n*100))};try{for(;;){let e=yield r.read();if(e.done)break;o(e.value)}}catch(e){console.warn("Progress tracking error:",e)}})}(n.clone(),t),n.blob()})}};function ix(e){let t=e,r=new Set;return{get value(){return t},set(e){Object.is(t,e)||(t=e,r.forEach(e=>e(t)))},update(e){this.set(e(t))},subscribe:e=>(r.add(e),()=>r.delete(e))}}function ib(e,t){let r=ix(e());return t.forEach(t=>t.subscribe(()=>{let t=e();Object.is(r.value,t)||r.set(t)})),{get value(){return r.value},subscribe:e=>r.subscribe(e)}}function iw(e,t){let r,n=()=>{r&&(r(),r=void 0),r=e()},i=t.map(e=>e.subscribe(n));return n(),()=>{r&&(r(),r=void 0),i.forEach(e=>e())}}class iS extends ip{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=ix(!1),this._currentTime=ix(0),this._duration=ix(0),this._volume=ix(this.media.volume),this._muted=ix(this.media.muted),this._playbackRate=ix(this.media.playbackRate||1),this._seeking=ix(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),null!=e.playbackRate&&this.onMediaEvent("canplay",()=>{null!=e.playbackRate&&(this.media.playbackRate=e.playbackRate)},{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",()=>{this._isPlaying.set(!0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",()=>{this._isPlaying.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",()=>{this._isPlaying.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",()=>{this._currentTime.set(this.media.currentTime)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",()=>{this._duration.set(this.media.duration||0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",()=>{this._duration.set(this.media.duration||0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",()=>{this._seeking.set(!0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",()=>{this._seeking.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",()=>{this._playbackRate.set(this.media.playbackRate)}))}onMediaEvent(e,t,r){return this.media.addEventListener(e,t,r),()=>this.media.removeEventListener(e,t,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){let e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return""!==this.media.canPlayType(e)}setSrc(e,t){let r=this.getSrc();if(e&&r===e)return;this.revokeSrc();let n=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(r&&this.media.removeAttribute("src"),n||e)try{this.media.src=n}catch(t){this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach(e=>e()),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach(e=>e()),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return ih(this,void 0,void 0,function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw e}})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){null!=t&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function iC(e,t,r){let n=t-e.left,i=r-e.top;return[n/e.width,i/e.height]}function iE(e){return!!(e.barWidth||e.barGap||e.barAlign)}function iR(e,t){if(!iE(t))return e;let r=t.barWidth||.5,n=r+(t.barGap||r/2);return 0===n?e:Math.floor(e/n)*n}function ij({scrollLeft:e,totalWidth:t,numCanvases:r}){if(0===t)return[0];let n=Math.floor(e/t*r);return[n-1,n,n+1]}function ik(e){let t=e._cleanup;"function"==typeof t&&t()}class iN extends ip{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const r=this.parentFromOptionsContainer(e.container);this.parent=r;const[n,i]=this.initHtml();r.appendChild(n),this.container=n,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),t&&i.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if("string"==typeof e?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw Error("Container not found");return t}initEvents(){var e;let t,r,n,i;this.wrapper.addEventListener("click",e=>{let[t,r]=iC(this.wrapper.getBoundingClientRect(),e.clientX,e.clientY);this.emit("click",t,r)}),this.wrapper.addEventListener("dblclick",e=>{let[t,r]=iC(this.wrapper.getBoundingClientRect(),e.clientX,e.clientY);this.emit("dblclick",t,r)}),!0!==this.options.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollStream=(r=ib(()=>(function(e){let{scrollLeft:t,scrollWidth:r,clientWidth:n}=e;return 0===r?{startX:0,endX:1}:{startX:Math.max(0,Math.min(1,t/r)),endX:Math.max(0,Math.min(1,(t+n)/r))}})(t.value),[t=ix({scrollLeft:(e=this.scrollContainer).scrollLeft,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth})]),n=ib(()=>{var e;return{left:(e=t.value).scrollLeft,right:e.scrollLeft+e.clientWidth}},[t]),i=()=>{t.set({scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth})},e.addEventListener("scroll",i,{passive:!0}),{scrollData:t,percentages:r,bounds:n,cleanup:()=>{e.removeEventListener("scroll",i),ik(t)}});let o=iw(()=>{let{startX:e,endX:t}=this.scrollStream.percentages.value,{left:r,right:n}=this.scrollStream.bounds.value;this.emit("scroll",e,t,r,n)},[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(o),"function"==typeof ResizeObserver){let e=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{e().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){let e=this.parent.clientWidth;e===this.lastContainerWidth&&"auto"!==this.options.height||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=function(e,t={}){let{threshold:r=3,mouseButton:n=0,touchDelay:i=100}=t,o=ix(null),s=new Map,a=matchMedia("(pointer: coarse)").matches,l=()=>{},u=t=>{if(t.button!==n||(s.set(t.pointerId,t),s.size>1))return;let u=t.clientX,c=t.clientY,d=!1,h=Date.now(),{left:f,top:p}=e.getBoundingClientRect(),m=e=>{if(e.defaultPrevented||s.size>1||a&&Date.now()-h<i)return;let t=e.clientX,n=e.clientY,l=t-u,m=n-c;(d||Math.abs(l)>r||Math.abs(m)>r)&&(e.preventDefault(),e.stopPropagation(),d||(o.set({type:"start",x:u-f,y:c-p}),d=!0),o.set({type:"move",x:t-f,y:n-p,deltaX:l,deltaY:m}),u=t,c=n)},g=e=>{if(s.delete(e.pointerId),d){let t=e.clientX,r=e.clientY;o.set({type:"end",x:t-f,y:r-p})}l()},v=e=>{s.delete(e.pointerId),e.relatedTarget&&e.relatedTarget!==document.documentElement||g(e)},y=e=>{d&&(e.stopPropagation(),e.preventDefault())},x=e=>{e.defaultPrevented||s.size>1||d&&e.preventDefault()};document.addEventListener("pointermove",m),document.addEventListener("pointerup",g),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",y,{capture:!0}),l=()=>{document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",x),setTimeout(()=>{document.removeEventListener("click",y,{capture:!0})},10)}};return e.addEventListener("pointerdown",u),{signal:o,cleanup:()=>{l(),e.removeEventListener("pointerdown",u),s.clear(),ik(o)}}}(this.wrapper);let e=iw(()=>{var e;let t=this.dragStream.signal.value;if(!t)return;let r=this.wrapper.getBoundingClientRect().width,n=(e=t.x/r)<0?0:e>1?1:e;"start"===t.type?(this.isDragging=!0,this.emit("dragstart",n)):"move"===t.type?this.emit("drag",n):"end"===t.type&&(this.isDragging=!1,this.emit("dragend",n))},[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){let e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=this.options.cspNonce&&"string"==typeof this.options.cspNonce?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){let t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}!0!==e.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){let{scrollWidth:t}=this.scrollContainer;this.setScroll(t*e)}destroy(){var e;this.subscriptions.forEach(e=>e()),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),null==(e=this.unsubscribeOnScroll)||e.forEach(e=>e()),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,r,n=()=>{t&&(clearTimeout(t),t=void 0),r&&(r(),r=void 0)};return this.timeouts.push(n),()=>new Promise((i,o)=>{n(),r=o,t=setTimeout(()=>{t=void 0,r=void 0,i()},e)})}getHeight(e,t){var r;let n=(null==(r=this.audioData)?void 0:r.numberOfChannels)||1;return function({optionsHeight:e,optionsSplitChannels:t,parentHeight:r,numberOfChannels:n,defaultHeight:i=128}){if(null==e)return i;let o=Number(e);if(!isNaN(o))return o;if("auto"===e){let e=r||i;return(null==t?void 0:t.every(e=>!e.overlay))?e/n:e}return i}({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:n,defaultHeight:128})}convertColorValues(e,t){return function(e,t,r){if(!Array.isArray(e))return e||"";if(0===e.length)return"#999";if(e.length<2)return e[0]||"";let n=document.createElement("canvas"),i=n.getContext("2d"),o=null!=r?r:n.height*t,s=i.createLinearGradient(0,0,0,o||t),a=1/(e.length-1);return e.forEach((e,t)=>{s.addColorStop(t*a,e)}),s}(e,this.getPixelRatio(),null==t?void 0:t.canvas.height)}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,r,n){let{width:i,height:o}=r.canvas,{halfHeight:s,barWidth:a,barRadius:l,barIndexScale:u,barSpacing:c,barMinHeight:d}=function({width:e,height:t,length:r,options:n,pixelRatio:i}){let o=n.barWidth?n.barWidth*i:1,s=n.barGap?n.barGap*i:n.barWidth?o/2:0,a=o+s||1;return{halfHeight:t/2,barWidth:o,barGap:s,barRadius:n.barRadius||0,barMinHeight:n.barMinHeight?n.barMinHeight*i:0,barIndexScale:r>0?e/a/r:0,barSpacing:a}}({width:i,height:o,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),h=function({channelData:e,barIndexScale:t,barSpacing:r,barWidth:n,halfHeight:i,vScale:o,canvasHeight:s,barAlign:a,barMinHeight:l}){let u=e[0]||[],c=e[1]||u,d=u.length,h=[],f=0,p=0,m=0;for(let e=0;e<=d;e++){let d=Math.round(e*t);if(d>f){let{topHeight:e,totalHeight:t}=function({maxTop:e,maxBottom:t,halfHeight:r,vScale:n,barMinHeight:i=0,barAlign:o}){let s=Math.round(e*r*n),a=s+Math.round(t*r*n)||1;return a<i&&(a=i,o||(s=a/2)),{topHeight:s,totalHeight:a}}({maxTop:p,maxBottom:m,halfHeight:i,vScale:o,barMinHeight:l,barAlign:a}),u=function({barAlign:e,halfHeight:t,topHeight:r,totalHeight:n,canvasHeight:i}){return"top"===e?0:"bottom"===e?i-n:t-r}({barAlign:a,halfHeight:i,topHeight:e,totalHeight:t,canvasHeight:s});h.push({x:f*r,y:u,width:n,height:t}),f=d,p=0,m=0}let g=Math.abs(u[e]||0),v=Math.abs(c[e]||0);g>p&&(p=g),v>m&&(m=v)}return h}({channelData:e,barIndexScale:u,barSpacing:c,barWidth:a,halfHeight:s,vScale:n,canvasHeight:o,barAlign:t.barAlign,barMinHeight:d});for(let e of(r.beginPath(),h))l&&"roundRect"in r?r.roundRect(e.x,e.y,e.width,e.height,l):r.rect(e.x,e.y,e.width,e.height);r.fill(),r.closePath()}renderLineWaveform(e,t,r,n){let{width:i,height:o}=r.canvas,s=function({channelData:e,width:t,height:r,vScale:n}){let i=r/2,o=e[0]||[];return[o,e[1]||o].map((e,r)=>{let o=e.length,s=o?t/o:0,a=0===r?-1:1,l=[{x:0,y:i}],u=0,c=0;for(let t=0;t<=o;t++){let r=Math.round(t*s);if(r>u){let e=i+(Math.round(c*i*n)||1)*a;l.push({x:u,y:e}),u=r,c=0}let o=Math.abs(e[t]||0);o>c&&(c=o)}return l.push({x:u,y:i}),l})}({channelData:e,width:i,height:o,vScale:n});for(let e of(r.beginPath(),s))if(e.length){r.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++){let n=e[t];r.lineTo(n.x,n.y)}}r.fill(),r.closePath()}renderWaveform(e,t,r){if(r.fillStyle=this.convertColorValues(t.waveColor,r),t.renderFunction)return void t.renderFunction(e,r);let n=function({channelData:e,barHeight:t,normalize:r,maxPeak:n}){var i;let o=t||1;if(!r)return o;let s=e[0];if(!s||0===s.length)return o;let a=null!=n?n:0;if(!n)for(let e=0;e<s.length;e++){let t=Math.abs(null!=(i=s[e])?i:0);t>a&&(a=t)}return a?o/a:o}({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});iE(t)?this.renderBarWaveform(e,t,r,n):this.renderLineWaveform(e,t,r,n)}renderSingleCanvas(e,t,r,n,i,o,s){let a=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*a),l.height=Math.round(n*a),l.style.width=`${r}px`,l.style.height=`${n}px`,l.style.left=`${Math.round(i)}px`,o.appendChild(l);let u=l.getContext("2d");if(t.renderFunction?(u.fillStyle=this.convertColorValues(t.waveColor,u),t.renderFunction(e,u)):this.renderWaveform(e,t,u),l.width>0&&l.height>0){let e=l.cloneNode(),r=e.getContext("2d");r.drawImage(l,0,0),r.globalCompositeOperation="source-in",r.fillStyle=this.convertColorValues(t.progressColor,r),r.fillRect(0,0,l.width,l.height),s.appendChild(e)}}renderMultiCanvas(e,t,r,n,i,o){let s=this.getPixelRatio(),{clientWidth:a}=this.scrollContainer,l=r/s,u=function({clientWidth:e,totalWidth:t,options:r}){return iR(Math.min(8e3,e,t),r)}({clientWidth:a,totalWidth:l,options:t}),c={};if(0===u)return;let d=r=>{if(r<0||r>=h||c[r])return;c[r]=!0;let s=r*u,a=Math.min(l-s,u);if((a=iR(a,t))<=0)return;let d=function({channelData:e,offset:t,clampedWidth:r,totalWidth:n}){return e.map(e=>{let i=Math.floor(t/n*e.length),o=Math.floor((t+r)/n*e.length);return e.slice(i,o)})}({channelData:e,offset:s,clampedWidth:a,totalWidth:l});this.renderSingleCanvas(d,t,a,n,s,i,o)},h=Math.ceil(l/u);if(!this.isScrollable){for(let e=0;e<h;e++)d(e);return}if(ij({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:l,numCanvases:h}).forEach(e=>d(e)),h>1){let e=this.on("scroll",()=>{let{scrollLeft:e}=this.scrollContainer;Object.keys(c).length>10&&(i.innerHTML="",o.innerHTML="",c={}),ij({scrollLeft:e,totalWidth:l,numCanvases:h}).forEach(e=>d(e))});this.unsubscribeOnScroll.push(e)}}renderChannel(e,t,r,n){var{overlay:i}=t,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(t,["overlay"]);let s=document.createElement("div"),a=this.getHeight(o.height,o.splitChannels);s.style.height=`${a}px`,i&&n>0&&(s.style.marginTop=`-${a}px`),this.canvasWrapper.style.minHeight=`${a}px`,this.canvasWrapper.appendChild(s);let l=s.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(e,o,r,a,s,l)}render(e){return ih(this,void 0,void 0,function*(){var t;this.timeouts.forEach(e=>e()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);let r=this.getPixelRatio(),n=this.scrollContainer.clientWidth,{scrollWidth:i,isScrollable:o,useParentWidth:s,width:a}=function({duration:e,minPxPerSec:t=0,parentWidth:r,fillParent:n,pixelRatio:i}){let o=Math.ceil(e*t),s=o>r,a=!!(n&&!s);return{scrollWidth:o,isScrollable:s,useParentWidth:a,width:(a?r:o)*i}}({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:n,fillParent:this.options.fillParent,pixelRatio:r});if(this.isScrollable=o,this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let r=0;r<e.numberOfChannels;r++){let n=Object.assign(Object.assign({},this.options),null==(t=this.options.splitChannels)?void 0:t[r]);this.renderChannel([e.getChannelData(r)],n,a,r)}else{let t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(e=>e()),this.unsubscribeOnScroll=[],!this.audioData)return;let{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){let e,{right:r}=this.progressWrapper.getBoundingClientRect(),n=((e=2*(r-t))<0?Math.floor(e):Math.ceil(e))/2;this.scrollContainer.scrollLeft+=n}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){let{scrollLeft:r,scrollWidth:n,clientWidth:i}=this.scrollContainer,o=e*n,s=r+i,a=i/2;if(this.isDragging)o+30>s?this.scrollContainer.scrollLeft+=30:o-30<r&&(this.scrollContainer.scrollLeft-=30);else{(o<r||o>s)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?a:0));let e=o-r-a;t&&this.options.autoCenter&&e>0&&(this.scrollContainer.scrollLeft+=e)}}renderProgress(e,t){if(isNaN(e))return;let r=100*e;this.canvasWrapper.style.clipPath=`polygon(${r}% 0%, 100% 0%, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,r){return ih(this,void 0,void 0,function*(){let n=this.canvasWrapper.querySelectorAll("canvas");if(!n.length)throw Error("No waveform data");return"dataURL"===r?Promise.resolve(Array.from(n).map(r=>r.toDataURL(e,t))):Promise.all(Array.from(n).map(r=>new Promise((n,i)=>{r.toBlob(e=>{e?n(e):i(Error("Could not export image"))},e,t)})))})}}class iL extends ip{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;let e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class iT extends ip{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ih(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){(this.currentSrc=e,this._duration=void 0,e)?fetch(e).then(t=>{if(t.status>=400)throw Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()}).then(t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t)).then(t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}).catch(e=>{console.error("WebAudioPlayer load error:",e)}):(this.buffer=null,this.emit("emptied"))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,null==(e=this.bufferNode)||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ih(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){let t=e-this.currentTime,r=this.bufferNode;null==r||r.stop(this.audioContext.currentTime+t),null==r||r.addEventListener("ended",()=>{r===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(e){return ih(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){let t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return null!=(e=this._duration)?e:(null==(t=this.buffer)?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){let e=[];if(!this.buffer)return e;let t=this.buffer.numberOfChannels;for(let r=0;r<t;r++)e.push(this.buffer.getChannelData(r));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}let iP={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class iM extends iS{static create(e){return new iM(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||("WebAudio"===e.backend?new iT:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},iP,e);const{state:r,actions:n}=function(e){var t,r,n,i,o,s;let a=null!=(t=null==e?void 0:e.currentTime)?t:ix(0),l=null!=(r=null==e?void 0:e.duration)?r:ix(0),u=null!=(n=null==e?void 0:e.isPlaying)?n:ix(!1),c=null!=(i=null==e?void 0:e.isSeeking)?i:ix(!1),d=null!=(o=null==e?void 0:e.volume)?o:ix(1),h=null!=(s=null==e?void 0:e.playbackRate)?s:ix(1),f=ix(null),p=ix(null),m=ix(""),g=ix(0),v=ix(0),y=ib(()=>!u.value,[u]),x=ib(()=>null!==f.value,[f]),b=ib(()=>x.value&&l.value>0,[x,l]),w=ib(()=>a.value,[a]),S=ib(()=>l.value>0?a.value/l.value:0,[a,l]);return{state:{currentTime:a,duration:l,isPlaying:u,isPaused:y,isSeeking:c,volume:d,playbackRate:h,audioBuffer:f,peaks:p,url:m,zoom:g,scrollPosition:v,canPlay:x,isReady:b,progress:w,progressPercent:S},actions:{setCurrentTime:e=>{let t=Math.max(0,Math.min(l.value||1/0,e));a.set(t)},setDuration:e=>{l.set(Math.max(0,e))},setPlaying:e=>{u.set(e)},setSeeking:e=>{c.set(e)},setVolume:e=>{let t=Math.max(0,Math.min(1,e));d.set(t)},setPlaybackRate:e=>{let t=Math.max(.1,Math.min(16,e));h.set(t)},setAudioBuffer:e=>{f.set(e),e&&l.set(e.duration)},setPeaks:e=>{p.set(e)},setUrl:e=>{m.set(e)},setZoom:e=>{g.set(Math.max(0,e))},setScrollPosition:e=>{v.set(Math.max(0,e))}}}}({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=r,this.wavesurferActions=n,this.timer=new iL;const i=t?void 0:this.getMediaElement();this.renderer=new iN(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");let{peaks:e,duration:t}=this.options;(o||e&&t)&&this.load(o,e,t).catch(e=>{this.emit("error",e instanceof Error?e:Error(String(e)))})})}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){let e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),null!=this.stopAtPosition&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}}))}initReactiveState(){var e,t;let r,n,i;this.reactiveCleanups.push((e=this.wavesurferState,t={emit:this.emit.bind(this)},(r=[]).push(iw(()=>{let r=e.isPlaying.value;t.emit(r?"play":"pause")},[e.isPlaying])),r.push(iw(()=>{let r=e.currentTime.value;t.emit("timeupdate",r),e.isPlaying.value&&t.emit("audioprocess",r)},[e.currentTime,e.isPlaying])),r.push(iw(()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)},[e.isSeeking,e.currentTime])),n=!1,r.push(iw(()=>{e.isReady.value&&!n&&(n=!0,t.emit("ready",e.duration.value))},[e.isReady,e.duration])),i=!1,r.push(iw(()=>{let r=e.isPlaying.value,n=e.currentTime.value,o=e.duration.value,s=o>0&&n>=o;i&&!r&&s&&t.emit("finish"),i=r&&s},[e.isPlaying,e.currentTime,e.duration])),r.push(iw(()=>{let r=e.zoom.value;r>0&&t.emit("zoom",r)},[e.zoom])),()=>{r.forEach(e=>e())}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{let e=this.updateProgress();this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var e;this.emit("error",null!=(e=this.getMediaElement().error)?e:Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t,r,n)=>{let i=this.getDuration();this.emit("scroll",e*i,t*i,r,n)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",e=>{this.emit("dragstart",e)}),this.renderer.on("dragend",e=>{this.emit("dragend",e)}),this.renderer.on("resize",()=>{this.emit("resize")}));{let e,t=this.renderer.on("drag",t=>{var r;if(!this.options.interact)return;this.renderer.renderProgress(t),clearTimeout(e);let n=0,i=this.options.dragToSeek;this.isPlaying()?n=0:!0===i?n=200:i&&"object"==typeof i&&(n=null!=(r=i.debounceTime)?r:200),e=setTimeout(()=>{this.seekTo(t)},n),this.emit("interaction",t*this.getDuration()),this.emit("drag",t)});this.subscriptions.push(()=>{clearTimeout(e),t()})}}initPlugins(){var e;(null==(e=this.options.plugins)?void 0:e.length)&&this.options.plugins.forEach(e=>{this.registerPlugin(e)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=im.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=im.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),null!=e.mediaControls&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);let t=e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e),this.subscriptions=this.subscriptions.filter(e=>e!==t)});return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter(t=>t!==e),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){let t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,r,n){return ih(this,void 0,void 0,function*(){var i;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,null==(i=this.abortController)||i.abort(),this.abortController=null,!t&&!r){let r=this.options.fetchParams||{};window.AbortController&&!r.signal&&(this.abortController=new AbortController,r.signal=this.abortController.signal);let n=e=>this.emit("loading",e);t=yield iy.fetchBlob(e,n,r);let i=this.options.blobMimeType;i&&(t=new Blob([t],{type:i}))}this.setSrc(e,t);let o=yield new Promise(e=>{let t=n||this.getDuration();t?e(t):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>e(this.getDuration()),{once:!0}))});if(!e&&!t){let e=this.getMediaElement();e instanceof iT&&(e.duration=o)}if(r)this.decodedData=im.createBuffer(r,o||0);else if(t){let e=yield t.arrayBuffer();this.decodedData=yield im.decode(e,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(e,t,r){return ih(this,void 0,void 0,function*(){try{return yield this.loadAudio(e,void 0,t,r)}catch(e){throw this.emit("error",e),e}})}loadBlob(e,t,r){return ih(this,void 0,void 0,function*(){try{return yield this.loadAudio("",e,t,r)}catch(e){throw this.emit("error",e),e}})}zoom(e){if(!this.decodedData)throw Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:r=1e4}={}){if(!this.decodedData)throw Error("The audio has not been decoded yet");let n=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let e=0;e<n;e++){let n=this.decodedData.getChannelData(e),o=[],s=n.length/t;for(let e=0;e<t;e++){let t=n.slice(Math.floor(e*s),Math.ceil((e+1)*s)),i=0;for(let e=0;e<t.length;e++){let r=t[e];Math.abs(r)>Math.abs(i)&&(i=r)}o.push(Math.round(i*r)/r)}i.push(o)}return i}getDuration(){let e=super.getDuration()||0;return(0===e||e===1/0)&&this.decodedData&&(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){let t=this.getDuration()*e;this.setTime(t)}play(e,t){let r=Object.create(null,{play:{get:()=>super.play}});return ih(this,void 0,void 0,function*(){null!=e&&this.setTime(e);let n=yield r.play.call(this);return null!=t&&(this.media instanceof iT?this.media.stopAt(t):this.stopAtPosition=t),n})}playPause(){return ih(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return ih(this,arguments,void 0,function*(e="image/png",t=1,r="dataURL"){return this.renderer.exportImage(e,t,r)})}destroy(){var e;this.emit("destroy"),null==(e=this.abortController)||e.abort(),this.plugins.forEach(e=>e.destroy()),this.subscriptions.forEach(e=>e()),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach(e=>e()),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}function iD(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}iM.BasePlugin=class extends ip{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e()),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},iM.dom=iv,"function"==typeof SuppressedError&&SuppressedError;class iA{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),null==r?void 0:r.once){let r=(...n)=>{this.un(e,r),t(...n)};return this.listeners[e].add(r),()=>this.un(e,r)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var r;null==(r=this.listeners[e])||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}}class iO extends iA{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e()),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}class iW extends iA{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;let e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}let iI=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class i_ extends iO{constructor(e){var t,r,n,i,o,s;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:null!=(t=e.audioBitsPerSecond)?t:128e3,scrollingWaveform:null!=(r=e.scrollingWaveform)&&r,scrollingWaveformWindow:null!=(n=e.scrollingWaveformWindow)?n:5,continuousWaveform:null!=(i=e.continuousWaveform)&&i,renderRecordedAudio:null==(o=e.renderRecordedAudio)||o,mediaRecorderTimeslice:null!=(s=e.mediaRecorderTimeslice)?s:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.micStream=null,this.recordedBlobUrl=null,this.timer=new iW,this.subscriptions.push(this.timer.on("tick",()=>{let e=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+e,this.emit("record-progress",this.duration)}))}static create(e){return new i_(e||{})}renderMicStream(e){let t=new AudioContext,r=t.createMediaStreamSource(e),n=t.createAnalyser();r.connect(n),(this.options.continuousWaveform||this.options.scrollingWaveform)&&(n.fftSize=32);let i=n.frequencyBinCount,o=new Float32Array(i),s=0;this.wavesurfer&&(null!=this.originalOptions||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.normalize=!0,this.wavesurfer.options.maxPeak=1));let a=setInterval(()=>{var e,t,r,a;if(!this.isWaveformPaused){if(n.getFloatTimeDomainData(o),this.options.scrollingWaveform){let e=Math.floor(100*(this.options.scrollingWaveformWindow||0)),t=0;for(let e=0;e<i;e++){let r=Math.abs(o[e]);r>t&&(t=r)}this.dataWindow||(this.dataWindow=new Float32Array(e));let r=new Float32Array(e);if(this.dataWindow&&this.dataWindow.length>0){let t=e-1,n=this.dataWindow.slice(-t);r.set(n,0)}r[e-1]=t,this.dataWindow=r}else if(this.options.continuousWaveform){if(!this.dataWindow){let r=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):(null!=(t=null==(e=this.wavesurfer)?void 0:e.getWidth())?t:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(r)}let r=0;for(let e=0;e<i;e++){let t=Math.abs(o[e]);t>r&&(r=t)}if(s+1>this.dataWindow.length){let e=new Float32Array(2*this.dataWindow.length);e.set(this.dataWindow,0),this.dataWindow=e}this.dataWindow[s]=r,s++}else this.dataWindow=o;if(this.wavesurfer){let e=(null!=(a=null==(r=this.dataWindow)?void 0:r.length)?a:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:e).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(e=>{console.error("Error rendering real-time recording data:",e)})}}},10);return{onDestroy:()=>{clearInterval(a),null==r||r.disconnect(),null==t||t.close()},onEnd:()=>{this.isWaveformPaused=!0,this.stopMic()}}}startMic(e){return iD(this,void 0,void 0,function*(){let t;this.micStream&&this.stopMic();try{t=yield navigator.mediaDevices.getUserMedia({audio:null==e||e})}catch(e){throw Error("Error accessing the microphone: "+e.message)}let r=this.renderMicStream(t);return this.micStream=r,this.unsubscribeDestroy=this.once("destroy",r.onDestroy),this.unsubscribeRecordEnd=this.once("record-end",r.onEnd),this.stream=t,t})}stopMic(){var e,t,r;null==(e=this.micStream)||e.onDestroy(),null==(t=this.unsubscribeDestroy)||t.call(this),null==(r=this.unsubscribeRecordEnd)||r.call(this),this.micStream=null,this.unsubscribeDestroy=void 0,this.unsubscribeRecordEnd=void 0,this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return iD(this,void 0,void 0,function*(){let t=this.stream||(yield this.startMic(e));this.dataWindow=null;let r=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||iI.find(e=>MediaRecorder.isTypeSupported(e)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();let n=[];r.ondataavailable=e=>{e.data.size>0&&n.push(e.data),this.emit("record-data-available",e.data)};let i=e=>{var t;let i=new Blob(n,{type:r.mimeType});this.emit(e,i),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),this.recordedBlobUrl&&URL.revokeObjectURL(this.recordedBlobUrl),this.recordedBlobUrl=URL.createObjectURL(i),null==(t=this.wavesurfer)||t.load(this.recordedBlobUrl))};r.onpause=()=>i("record-pause"),r.onstop=()=>i("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var e;return"recording"===(null==(e=this.mediaRecorder)?void 0:e.state)}isPaused(){var e;return"paused"===(null==(e=this.mediaRecorder)?void 0:e.state)}isActive(){var e;return"inactive"!==(null==(e=this.mediaRecorder)?void 0:e.state)}stopRecording(){var e;this.isActive()&&(null==(e=this.mediaRecorder)||e.stop(),this.timer.stop())}pauseRecording(){var e,t;this.isRecording()&&(this.isWaveformPaused=!0,null==(e=this.mediaRecorder)||e.requestData(),null==(t=this.mediaRecorder)||t.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var e;this.isPaused()&&(this.isWaveformPaused=!1,null==(e=this.mediaRecorder)||e.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return iD(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(e=>"audioinput"===e.kind))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic(),this.recordedBlobUrl&&(URL.revokeObjectURL(this.recordedBlobUrl),this.recordedBlobUrl=null)}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var iB=e.i(63178);let iH=e.i(47167).default.env.NEXT_PUBLIC_API_BASE_URL??"http://localhost:8000",iz=e=>{if(!e)return null;try{return JSON.parse(e)}catch{return e}},iU=e=>JSON.stringify(Object.entries(e).reduce((e,[t,r])=>(null!=r&&(e[t]=r),e),{})),iF=e=>`${iH}${e}`,iV=async e=>{let t=await fetch(iF("/api/chat/text"),{method:"POST",headers:{"Content-Type":"application/json"},body:iU({foreign_language:e.foreignLanguage,native_language:e.nativeLanguage,student_level:e.studentLevel,tutor_gender:e.tutorGender,student_gender:e.studentGender})});if(!t.ok)throw Error(await t.text()||"Unable to start chat session");return await t.json()},i$=async(e,t)=>{let r=new FormData;r.append("audio_file",e,"message.webm"),r.append("foreign_language",t);let n=await fetch(iF("/api/transcribe"),{method:"POST",body:r});if(!n.ok)throw Error(await n.text()||"Transcription failed");return(await n.json()).text},iG=(0,nu.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),iK=(0,nu.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),iX=(0,nu.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),iq=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("textarea",{className:(0,nf.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));iq.displayName="Textarea";let iY=({className:e,...t})=>(0,f.jsx)("form",{className:(0,nf.cn)("w-full overflow-hidden rounded-xl border bg-background shadow-xs",e),...t}),iZ=({onChange:e,className:t,placeholder:r="What would you like to know?",minHeight:n=48,maxHeight:i=164,disableAutoResize:o=!1,resizeOnNewLinesOnly:s=!1,...a})=>(0,f.jsx)(iq,{className:(0,nf.cn)("w-full resize-none rounded-none border-none p-3 shadow-none outline-hidden ring-0",o||s?"field-sizing-fixed":"field-sizing-content max-h-[6lh]","bg-transparent dark:bg-transparent","focus-visible:ring-0",t),name:"message",onChange:t=>{e?.(t)},onKeyDown:e=>{if("Enter"===e.key){if(e.nativeEvent.isComposing||e.shiftKey)return;e.preventDefault();let t=e.currentTarget.form;t&&t.requestSubmit()}},placeholder:r,...a}),iJ=({className:e,...t})=>(0,f.jsx)("div",{className:(0,nf.cn)("flex items-center justify-between p-1",e),...t}),iQ=({className:e,...t})=>(0,f.jsx)("div",{className:(0,nf.cn)("flex items-center gap-1","[&_button:first-child]:rounded-bl-xl",e),...t}),i0=({className:e,variant:t="default",size:r="icon",status:n,children:i,...o})=>{let s=(0,f.jsx)(iK,{className:"size-4"});return"submitted"===n?s=(0,f.jsx)(iG,{className:"size-4 animate-spin"}):"streaming"===n?s=(0,f.jsx)(iX,{className:"size-4"}):"error"===n&&(s=(0,f.jsx)(n8,{className:"size-4"})),(0,f.jsx)(g.Button,{className:(0,nf.cn)("gap-1.5 rounded-lg",e),size:r,type:"submit",variant:t,...o,children:i??s})},i1=({size:e=16})=>(0,f.jsxs)("svg",{height:e,strokeLinejoin:"round",style:{color:"currentcolor"},viewBox:"0 0 16 16",width:e,children:[(0,f.jsx)("path",{d:"M2.5 0.5V0H3.5V0.5C3.5 1.60457 4.39543 2.5 5.5 2.5H6V3V3.5H5.5C4.39543 3.5 3.5 4.39543 3.5 5.5V6H3H2.5V5.5C2.5 4.39543 1.60457 3.5 0.5 3.5H0V3V2.5H0.5C1.60457 2.5 2.5 1.60457 2.5 0.5Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M14.5 4.5V5H13.5V4.5C13.5 3.94772 13.0523 3.5 12.5 3.5H12V3V2.5H12.5C13.0523 2.5 13.5 2.05228 13.5 1.5V1H14H14.5V1.5C14.5 2.05228 14.9477 2.5 15.5 2.5H16V3V3.5H15.5C14.9477 3.5 14.5 3.94772 14.5 4.5Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M8.40706 4.92939L8.5 4H9.5L9.59294 4.92939C9.82973 7.29734 11.7027 9.17027 14.0706 9.40706L15 9.5V10.5L14.0706 10.5929C11.7027 10.8297 9.82973 12.7027 9.59294 15.0706L9.5 16H8.5L8.40706 15.0706C8.17027 12.7027 6.29734 10.8297 3.92939 10.5929L3 10.5V9.5L3.92939 9.40706C6.29734 9.17027 8.17027 7.29734 8.40706 4.92939Z",fill:"currentColor"})]}),i2=({size:e=16})=>(0,f.jsx)("svg",{height:e,style:{color:"currentcolor"},viewBox:"0 0 24 24",width:e,fill:"currentColor",children:(0,f.jsx)("path",{d:"M12 15a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v6a3 3 0 0 0 3 3zm6-3a1 1 0 0 1 2 0 8 8 0 0 1-7 7.94V22h-2v-2.06A8 8 0 0 1 4 12a1 1 0 0 1 2 0 6 6 0 0 0 12 0z"})}),i5=({size:e=16})=>(0,f.jsx)("svg",{height:e,style:{color:"currentcolor"},viewBox:"0 0 24 24",width:e,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,f.jsx)("path",{d:"M20 6L9 17l-5-5"})}),i3=({size:e=16})=>(0,f.jsxs)("svg",{height:e,style:{color:"currentcolor"},viewBox:"0 0 24 24",width:e,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,f.jsx)("circle",{cx:"12",cy:"8",r:"5"}),(0,f.jsx)("path",{d:"M20 21a8 8 0 1 0-16 0"})]}),i4=({size:e=16,...t})=>(0,f.jsx)("svg",{height:e,strokeLinejoin:"round",style:{color:"currentcolor",...t.style},viewBox:"0 0 16 16",width:e,...t,children:(0,f.jsx)("path",{clipRule:"evenodd",d:"M8.70711 1.39644C8.31659 1.00592 7.68342 1.00592 7.2929 1.39644L2.21968 6.46966L1.68935 6.99999L2.75001 8.06065L3.28034 7.53032L7.25001 3.56065V14.25V15H8.75001V14.25V3.56065L12.7197 7.53032L13.25 8.06065L14.3107 6.99999L13.7803 6.46966L8.70711 1.39644Z",fill:"currentColor",fillRule:"evenodd"})}),i6=({size:e=16,...t})=>(0,f.jsx)("svg",{height:e,style:{color:"currentcolor",...t.style},viewBox:"0 0 16 16",width:e,...t,children:(0,f.jsx)("path",{clipRule:"evenodd",d:"M3 3H13V13H3V3Z",fill:"currentColor",fillRule:"evenodd"})});function i9({disabled:e,hasSession:t,isStreaming:r,onSendText:n,foreignLanguage:i,onOpenGenderSettings:o}){let{resolvedTheme:s}=(0,iB.useTheme)(),a="dark"===s?"#ffffff":"#475569",[l,u]=(0,p.useState)(""),[c,d]=(0,p.useState)("idle"),[h,m]=(0,p.useState)(null),[v,y]=(0,p.useState)(!1),[x,b]=(0,p.useState)(null),w=(0,p.useRef)(null),S=(0,p.useRef)(null),C=(0,p.useRef)([]),E=(0,p.useRef)(0),R=(0,p.useRef)(!1),j=(0,p.useRef)(null),k=(0,p.useRef)(null),N=(0,p.useRef)(null),L=(0,p.useRef)(null),T=(0,p.useRef)(!1),P=(0,p.useRef)(null),M=(0,p.useRef)(null),[D,A]=(0,p.useState)(!1),O=()=>{S.current?.getTracks().forEach(e=>e.stop()),S.current=null},W=(0,p.useCallback)(()=>{L.current?.destroy(),L.current=null,N.current?.destroy(),N.current=null},[]),I=(0,p.useCallback)(async e=>{y(!0),m(null);try{let t=await i$(e,i);if(!t)throw Error("No transcription received");b(e),u(e=>e+t),d("idle"),T.current=!1}catch(e){m(e instanceof Error?e.message:"Unable to transcribe audio."),T.current=!1,d("idle")}finally{y(!1)}},[i]),_=(0,p.useCallback)(e=>{w.current&&(W(),w.current.onstop=()=>{if(O(),R.current){C.current=[],R.current=!1,d("idle"),w.current=null;return}if(0===C.current.length){d("idle"),w.current=null;return}if(!e){C.current=[],d("idle"),w.current=null;return}let t=new Blob(C.current,{type:"audio/webm"});if(C.current=[],0===t.size){d("idle"),w.current=null;return}I(t),w.current=null},w.current.stop())},[W,I]),B=(0,p.useCallback)(()=>{"recording"===c&&(T.current=!0,_(!0))},[_,c]),H=(0,p.useCallback)(()=>{_(!1)},[_]),z=async()=>{if(e||!t)return void m("Start the tutor session before recording.");if(P.current&&(URL.revokeObjectURL(P.current),P.current=null),b(null),"undefined"==typeof MediaRecorder||"undefined"==typeof navigator||!navigator.mediaDevices?.getUserMedia)return void m("Your browser does not support audio recording.");try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});S.current=e;let t=new MediaRecorder(e,{mimeType:"audio/webm"});m(null),d("recording"),R.current=!1,E.current=0,C.current=[],t.ondataavailable=e=>{if(e.data&&0!==e.data.size){if(E.current+=e.data.size,E.current>0xa00000){R.current=!0,m("Recording stopped: 10MB audio limit reached."),_(!1);return}C.current.push(e.data)}},t.onerror=()=>{m("Microphone error occurred."),_(!1)},w.current=t,t.start(250)}catch(e){m(e instanceof DOMException&&"NotAllowedError"===e.name?"Microphone permissions are required to record audio.":"Unable to access the microphone."),O(),w.current=null,d("idle")}};(0,p.useEffect)(()=>{if("recording"!==c)return void W();if(!S.current||!k.current)return;let e=i_.create({renderRecordedAudio:!1,scrollingWaveform:!0,scrollingWaveformWindow:.5,continuousWaveform:!0,continuousWaveformDuration:.5,mediaRecorderTimeslice:20}),t=iM.create({container:k.current,height:26,waveColor:a,progressColor:a,cursorWidth:0,barHeight:1.7,barWidth:4,barGap:2,barRadius:4,interact:!1,minPxPerSec:300,normalize:!1,autoScroll:!0,autoCenter:!0,fillParent:!0,hideScrollbar:!0,plugins:[e]});return e.renderMicStream(S.current),N.current=t,L.current=e,()=>{W()}},[a,W,c]),(0,p.useEffect)(()=>()=>{O(),w.current?.stop(),W(),P.current&&URL.revokeObjectURL(P.current)},[W]),(0,p.useEffect)(()=>(x?(P.current&&URL.revokeObjectURL(P.current),P.current=URL.createObjectURL(x),P.current&&(M.current=new Audio(P.current))):(P.current&&(URL.revokeObjectURL(P.current),P.current=null),M.current&&(M.current.pause(),M.current=null),A(!1)),()=>{P.current&&URL.revokeObjectURL(P.current)}),[x]),(0,p.useEffect)(()=>{let e=M.current;if(!e)return;let t=()=>A(!0),r=()=>A(!1),n=()=>A(!1);return e.addEventListener("play",t),e.addEventListener("pause",r),e.addEventListener("ended",n),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",r),e.removeEventListener("ended",n)}},[x]);let U=(0,p.useCallback)(async()=>{let e=M.current;if(e&&x)if(e.paused)try{await e.play()}catch(e){console.error("Error playing audio:",e)}else e.pause()},[x]),F=async()=>{let t=l.trim();if(t&&!e&&"idle"===c&&!r)try{await n(t),u(""),P.current&&(URL.revokeObjectURL(P.current),P.current=null),b(null),M.current&&(M.current.pause(),M.current=null),A(!1)}catch(e){m(e instanceof Error?e.message:"Unable to send message.")}},V=e||"idle"!==c||v,$=e||v||r,G="idle"===c&&l.trim()&&!v&&!r;return(0,f.jsxs)("div",{className:"relative flex w-full flex-col gap-3",children:[x&&(0,f.jsx)("div",{className:"flex items-center justify-center",children:(0,f.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm",onClick:U,className:"gap-1.5",children:[D?(0,f.jsx)(i6,{size:14}):(0,f.jsx)("svg",{viewBox:"0 0 24 24",className:"h-3.5 w-3.5",fill:"currentColor",children:(0,f.jsx)("path",{d:"M7 4.5v15l11-7.5z"})}),(0,f.jsx)("span",{children:"Transcribed audio"})]})}),(0,f.jsxs)(iY,{className:"rounded-xl border border-border bg-background p-3 shadow-xs transition-all duration-200 focus-within:border-border hover:border-muted-foreground/50",onSubmit:e=>{e.preventDefault(),G&&F()},children:["recording"===c?(0,f.jsx)("div",{className:"flex items-center gap-2 py-2",children:(0,f.jsx)("div",{ref:k,className:"flex-1 overflow-hidden",style:{minHeight:"26px"}})}):(0,f.jsx)("div",{className:"flex flex-row items-start gap-1 sm:gap-2",children:(0,f.jsx)(iZ,{autoFocus:!0,className:"grow resize-none border-0 border-none bg-transparent p-2 text-sm outline-none ring-0 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0","data-testid":"korli-input",disableAutoResize:!1,maxHeight:200,minHeight:44,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),G&&F())},placeholder:t?"Type your message...":"Start the session to begin chatting",ref:j,rows:1,value:l,disabled:V})}),(0,f.jsxs)(iJ,{className:"border-t-0 p-0 shadow-none",children:[(0,f.jsx)(iQ,{className:"gap-0 sm:gap-0.5",children:"recording"===c?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:H,disabled:v,className:"h-8 w-8 rounded-lg p-1 text-destructive hover:bg-destructive/10 hover:text-destructive",children:(0,f.jsx)(n8,{size:16})}),v?(0,f.jsx)("div",{className:"flex h-8 w-8 items-center justify-center",children:(0,f.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent"})}):(0,f.jsx)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:B,className:"h-8 w-8 rounded-lg p-1 text-green-600 hover:bg-green-600/10 hover:text-green-600 dark:text-green-400 dark:hover:text-green-400",children:(0,f.jsx)(i5,{size:16})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:o,disabled:!t,className:"h-8 w-8 rounded-lg p-1",children:(0,f.jsx)(i3,{size:16})}),v?(0,f.jsx)("div",{className:"flex h-8 w-8 items-center justify-center",children:(0,f.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent"})}):(0,f.jsx)(g.Button,{type:"button",variant:"ghost",size:"sm",onClick:z,disabled:$||!t,className:"h-8 w-8 rounded-lg p-1",children:(0,f.jsx)(i2,{size:16})})]})}),r?(0,f.jsx)(g.Button,{type:"button",size:"sm",onClick:()=>{},className:"h-8 w-8 rounded-full bg-foreground p-1 text-background hover:bg-foreground/90",children:(0,f.jsx)(i6,{size:14})}):(0,f.jsx)(i0,{className:"h-8 w-8 rounded-full bg-primary text-primary-foreground transition-colors duration-200 hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground","data-testid":"send-button",disabled:!G,children:(0,f.jsx)(i4,{size:14})})]})]}),h&&(0,f.jsx)("p",{className:"text-xs text-destructive",children:h})]})}var i7=e.i(63639),i8=e.i(98919);let oe=(0,nu.default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),ot=(0,nu.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function or({src:e,label:t,size:r="md"}){let n=(0,p.useRef)(null),[i,o]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e=n.current;if(!e)return;let t=()=>o(!0),r=()=>o(!1),i=()=>o(!1);return e.addEventListener("play",t),e.addEventListener("pause",r),e.addEventListener("ended",i),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",r),e.removeEventListener("ended",i)}},[]),(0,p.useEffect)(()=>{let e=n.current;e&&(e.pause(),e.currentTime=0,o(!1))},[e]),(0,p.useEffect)(()=>{if("undefined"==typeof document)return;let e=e=>{let t=n.current;t&&e.target!==t&&t.pause()};return document.addEventListener("play",e,!0),()=>document.removeEventListener("play",e,!0)},[]);let s=async()=>{let t=n.current;if(t&&e){if(t.paused){try{await t.play()}catch(e){console.error(e)}return}t.pause()}};return(0,f.jsxs)(g.Button,{type:"button",variant:"outline",size:"sm"===r?"sm":"default",onClick:s,disabled:!e,className:(0,nf.cn)("gap-1.5","sm"===r&&"h-7 px-2 text-xs"),children:[i?(0,f.jsx)(oe,{className:(0,nf.cn)("h-3.5 w-3.5","md"===r&&"h-4 w-4")}):(0,f.jsx)(ot,{className:(0,nf.cn)("h-3.5 w-3.5","md"===r&&"h-4 w-4")}),t&&(0,f.jsx)("span",{className:"hidden sm:inline",children:t}),(0,f.jsx)("audio",{ref:n,src:e,preload:"none",className:"hidden"})]})}function on({message:e}){return"user"!==e.role?null:(0,f.jsx)("div",{className:"flex justify-end","data-message-id":e.id,children:(0,f.jsx)("div",{className:"max-w-[85%] sm:max-w-[70%]",children:(0,f.jsxs)("div",{className:"rounded-2xl bg-primary px-3 py-2 text-sm text-primary-foreground",children:[(0,f.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),"transcribing"===e.status&&(0,f.jsxs)("span",{className:"mt-2 inline-flex items-center gap-2 text-xs opacity-80",children:[(0,f.jsx)("span",{className:"h-2 w-2 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Transcribing audio"]})]})})})}function oi({message:e,showTranslation:t,onToggleTranslation:r,previousUserMessage:n,showCorrection:i,onToggleCorrection:o}){if("ai"!==e.role)return null;let s=!!e.translation,a=n?.role==="user"&&!!n.correction?.corrected,l=n?.role==="user"&&!!n.correction?.audioUrl;return(0,f.jsx)("div",{className:"flex justify-start","data-message-id":e.id,children:(0,f.jsxs)("div",{className:"flex w-full gap-3",children:[(0,f.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-full bg-background ring-1 ring-border",children:(0,f.jsx)(i1,{size:14})}),(0,f.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,f.jsxs)("div",{className:"text-sm leading-relaxed text-foreground",children:[(0,f.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),e.isStreaming&&!e.content&&(0,f.jsxs)("span",{className:"inline-flex items-center gap-2 text-xs text-muted-foreground",children:[(0,f.jsx)("span",{className:"h-2 w-2 animate-pulse rounded-full bg-primary"}),"Korli is responding"]})]}),(0,f.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,f.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:e.iconsLoading?(0,f.jsxs)("div",{className:"flex items-center gap-1.5 rounded-md px-2 py-1",children:[(0,f.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent"}),(0,f.jsx)("span",{className:"hidden text-xs text-muted-foreground sm:inline",children:"Loading..."})]}):(0,f.jsxs)(f.Fragment,{children:[s&&(0,f.jsxs)(g.Button,{type:"button",variant:t?"secondary":"outline",size:"sm",onClick:r,className:"h-7 gap-1.5 px-2 text-xs",children:[(0,f.jsx)(i7.Languages,{className:(0,nf.cn)("h-3.5 w-3.5",t&&"text-blue-600 dark:text-blue-400")}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Translate"})]}),e.audioUrl&&(0,f.jsx)(or,{src:e.audioUrl,label:"Play",size:"sm"}),a&&(0,f.jsxs)(g.Button,{type:"button",variant:i?"secondary":"outline",size:"sm",onClick:o,className:"h-7 gap-1.5 px-2 text-xs",children:[(0,f.jsx)(i8.Shield,{className:(0,nf.cn)("h-3.5 w-3.5",i&&"text-amber-600 dark:text-amber-400")}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Correction"})]})]})}),l&&!a&&n?.role==="user"&&(0,f.jsx)("div",{className:"ml-auto",children:(0,f.jsx)(or,{src:n.correction?.audioUrl,label:"Your message",size:"sm"})})]}),t&&e.translation&&(0,f.jsxs)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-950/50",children:[(0,f.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300",children:"Translation"}),(0,f.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-sm leading-relaxed text-foreground",children:e.translation})]}),i&&n?.role==="user"&&n.correction&&(0,f.jsxs)("div",{className:"relative rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-800 dark:bg-amber-950/50",children:[(0,f.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-amber-700 dark:text-amber-300",children:"Corrections"}),n.correction.audioUrl&&(0,f.jsx)("div",{className:"absolute right-3 top-3 sm:hidden",children:(0,f.jsx)(or,{src:n.correction.audioUrl,size:"sm"})}),n.correction.correctedMessage&&(0,f.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-sm font-medium leading-relaxed text-foreground",children:n.correction.correctedMessage}),n.correction.translation&&(0,f.jsx)("p",{className:"mt-0.5 whitespace-pre-wrap text-sm leading-relaxed text-muted-foreground",children:n.correction.translation}),n.correction.audioUrl&&(0,f.jsx)("div",{className:"mt-2 hidden sm:block",children:(0,f.jsx)(or,{src:n.correction.audioUrl,label:"Listen",size:"sm"})})]})]})]})})}function oo({message:e,showTranslation:t,showCorrection:r,onToggleTranslation:n,onToggleCorrection:i,previousUserMessage:o}){return"user"===e.role?(0,f.jsx)(on,{message:e}):(0,f.jsx)(oi,{message:e,showTranslation:t,showCorrection:r,onToggleTranslation:n,onToggleCorrection:i,previousUserMessage:o})}function os({messages:e,activeOverlay:t,onToggleOverlay:r}){let n=(0,p.useRef)(null);return((0,p.useEffect)(()=>{let e=n.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},[e]),(0,p.useEffect)(()=>{let e=n.current;e&&t&&setTimeout(()=>{let r=e.querySelector(`[data-message-id="${t.messageId}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"nearest"})},50)},[t]),0===e.length)?(0,f.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-muted-foreground",children:[(0,f.jsx)("p",{className:"text-lg font-semibold",children:"Your tutor is ready"}),(0,f.jsx)("p",{className:"max-w-sm text-sm",children:"Start typing or recording to begin your conversation"})]}):(0,f.jsx)("div",{ref:n,className:"flex-1 overflow-y-auto rounded-xl bg-muted/30 px-4 py-3",children:(0,f.jsx)("div",{className:"flex flex-col gap-4",children:e.map((n,i)=>{let o;if("ai"===n.role&&i>0){for(let t=i-1;t>=0;t--)if("user"===e[t].role){o=e[t];break}}return(0,f.jsx)(oo,{message:n,previousUserMessage:o,showTranslation:t?.messageId===n.id&&"translation"===t.type,showCorrection:t?.messageId===n.id&&"correction"===t.type,onToggleTranslation:"ai"===n.role?()=>r(n.id,"translation"):void 0,onToggleCorrection:"ai"===n.role?()=>r(n.id,"correction"):void 0},n.id)})})})}let oa=e=>{"undefined"!=typeof URL&&"function"==typeof URL.revokeObjectURL&&e.forEach(e=>{"user"===e.role&&e.userAudio?.localUrl&&URL.revokeObjectURL(e.userAudio.localUrl)})},ol={foreignLanguage:"Spanish",nativeLanguage:"English",studentLevel:"B1",tutorGender:"female",studentGender:"male"};function ou(){let{threadId:e,config:t,messages:r,activeOverlay:n,isStarting:i,isStreaming:o,error:s,startConversation:a,sendTextMessage:l,toggleOverlay:u,resetChat:c}=(()=>{let[e,t]=(0,p.useState)([]),[r,n]=(0,p.useState)(null),[i,o]=(0,p.useState)(null),[s,a]=(0,p.useState)(null),[l,u]=(0,p.useState)({isStarting:!1,isStreaming:!1}),[c,d]=(0,p.useState)(null),h=(0,p.useRef)([]),f=(0,p.useRef)(null),m=(0,p.useRef)(null),g=(0,p.useRef)(null),v=(0,p.useRef)(null),y=(0,p.useRef)(null);(0,p.useEffect)(()=>{h.current=e},[e]),(0,p.useEffect)(()=>()=>{f.current?.(),oa(h.current)},[]);let x=(0,p.useCallback)(()=>{if(g.current){let e=g.current,r=v.current;t(t=>t.map(t=>t.id!==e||"ai"!==t.role?t:{...t,translation:r?.translation??t.translation,audioUrl:r?.audioUrl??t.audioUrl,isStreaming:!1,iconsLoading:!1}))}if(m.current&&y.current){let e=m.current,r=y.current;t(t=>t.map(t=>t.id!==e||"user"!==t.role?t:{...t,correction:{corrected:!!r.corrected,correctedMessage:r.correctedMessage??t.correction?.correctedMessage,translation:r.translation??t.correction?.translation,audioUrl:r.audioUrl??t.correction?.audioUrl},status:"complete"}))}f.current?.(),f.current=null,m.current=null,g.current=null,v.current=null,y.current=null,u(e=>e.isStreaming?{...e,isStreaming:!1}:e)},[]),b=(0,p.useCallback)(e=>{console.error(e),d(e.message||"Streaming request failed"),x()},[x]),w=(0,p.useCallback)(()=>{x()},[x]),S=(0,p.useCallback)((e,t)=>{a(r=>r&&r.messageId===e&&r.type===t?null:{messageId:e,type:t})},[]),C=(0,p.useCallback)(()=>{f.current?.(),f.current=null,m.current=null,g.current=null,v.current=null,y.current=null,t(e=>(oa(e),[])),n(null),o(null),a(null),u({isStarting:!1,isStreaming:!1}),d(null)},[]),E=(0,p.useCallback)(e=>{let r=m.current;r&&t(t=>t.map(t=>t.id!==r||"user"!==t.role?t:e(t)))},[]),R=(0,p.useCallback)(e=>{g.current=e,v.current=null,t(t=>t.some(t=>t.id===e)?t:[...t,{id:e,role:"ai",content:"",createdAt:Date.now(),translation:void 0,isStreaming:!0,iconsLoading:!0}])},[]),j=(0,p.useCallback)((e,r)=>{r&&t(t=>{let n=!1,i=t.map(t=>t.id!==e||"ai"!==t.role?t:(n=!0,{...t,content:`${t.content}${r}`}));return n||(g.current=e,i.push({id:e,role:"ai",content:r,translation:void 0,createdAt:Date.now(),isStreaming:!0,iconsLoading:!0})),i})},[]),k=(0,p.useCallback)(e=>{!e||"object"!=typeof e||e.id&&(g.current=e.id,v.current={translation:e.translation,audioUrl:e.audio_url},t(t=>t.find(t=>t.id===e.id&&"ai"===t.role)?t.map(t=>t.id!==e.id||"ai"!==t.role?t:{...t,content:t.content||e.ai_message||""}):[...t,{id:e.id,role:"ai",content:e.ai_message??"",translation:void 0,createdAt:Date.now(),isStreaming:!0,iconsLoading:!0}]))},[]),N=(0,p.useCallback)(e=>{e&&"object"==typeof e&&(y.current={corrected:e.corrected,correctedMessage:e.corrected_message??e.correctedMessage,translation:e.translation,audioUrl:e.audio_url??e.audioUrl})},[]),L=(0,p.useCallback)(e=>{if(!e||"object"!=typeof e||!e.text)return;let t=e.text;E(e=>({...e,content:t,status:"transcribing"===e.status?"pending":e.status}))},[E]),T=(0,p.useCallback)(e=>{switch(e.event){case"thread":e.data&&"string"==typeof e.data.thread_id&&n(e.data.thread_id);break;case"assistant_start":e.data&&"string"==typeof e.data.id&&R(e.data.id);break;case"assistant_delta":{let t=e.data;t?.id&&"foreign"===t.channel&&"string"==typeof t.text&&j(t.id,t.text)}break;case"assistant_end":k(e.data);break;case"correction":N(e.data);break;case"transcript":L(e.data);break;case"done":x()}},[x,j,k,R,N,L]),P=(0,p.useCallback)(async e=>{f.current?.(),f.current=null,m.current=null,g.current=null,v.current=null,y.current=null,a(null),u({isStarting:!0,isStreaming:!1}),d(null),t(e=>(oa(e),[]));try{let r=await iV(e);n(r.thread_id),o(e),t([{id:r.thread_id?`assistant-${r.thread_id}`:(0,nf.generateUUID)(),role:"ai",content:r.ai_message?.content??"",translation:r.ai_message?.translation,audioUrl:r.ai_message?.audio_url,createdAt:Date.now(),isStreaming:!1}])}catch(e){throw d(e instanceof Error?e.message:"Unable to start chat"),e}finally{u(e=>({...e,isStarting:!1}))}},[]),M=(0,p.useCallback)(async(e,n,o)=>{var s,c,d,h;let p,x;if(!r||!i)throw Error("Start the session before sending a message.");let S=e.trim();if(!S||l.isStreaming)return;let C=(0,nf.generateUUID)();m.current=C,g.current=null,v.current=null,y.current=null;let E={id:C,role:"user",type:"text",content:S,createdAt:Date.now(),status:"pending"};t(e=>[...e,E]),a(null),u(e=>({...e,isStreaming:!0})),s={threadId:r,message:S,foreignLanguage:i.foreignLanguage,tutorGender:n,studentGender:o},c={onEvent:T,onError:b,onComplete:w},p={thread_id:s.threadId,message:s.message,stream:!0,foreign_language:s.foreignLanguage},void 0!==s.tutorGender&&(p.tutor_gender=s.tutorGender),void 0!==s.studentGender&&(p.student_gender=s.studentGender),d=iF("/api/chat/text"),h={method:"POST",headers:{"Content-Type":"application/json"},body:iU(p)},x=new AbortController,(async()=>{try{let e=await fetch(d,{...h,signal:x.signal,headers:{Accept:"text/event-stream",...h.headers??{}}});if(!e.ok){let t=await e.text();throw Error(t||"Streaming request failed")}if(!e.body)throw Error("Streaming response body is unavailable");let t=e.body.getReader(),r=new TextDecoder("utf-8"),n="",i=async()=>{let{value:e,done:o}=await t.read();o?c.onComplete?.():(n+=r.decode(e,{stream:!0}),(()=>{let e=n.split(/\r?\n\r?\n/);for(let t of(n=e.pop()??"",e)){if(!t.trim())continue;let e=t.split(/\r?\n/),r="message",n=[];for(let t of e)if(!t.startsWith(":")){if(t.startsWith("event:")){r=t.slice(6).trim();continue}t.startsWith("data:")&&n.push(t.slice(5).trim())}let i=n.join("\n");c.onEvent({event:r,data:iz(i),raw:i})}})(),await i())};await i()}catch(e){if("AbortError"===e.name)return;c.onError?.(e)}})(),f.current=()=>x.abort()},[i,w,b,T,l.isStreaming,r]),D=(0,p.useCallback)(()=>d(null),[]);return{threadId:r,config:i,messages:e,activeOverlay:s,isStarting:l.isStarting,isStreaming:l.isStreaming,error:c,startConversation:P,sendTextMessage:M,toggleOverlay:S,resetChat:C,clearError:D}})(),[d,h]=(0,p.useState)(ol),[m,g]=(0,p.useState)("female"),[v,y]=(0,p.useState)("male"),[x,b]=(0,p.useState)(!1),w=!!e,S=(0,p.useCallback)(e=>t=>{h(r=>({...r,[e]:t}))},[]),C=(0,p.useCallback)(async e=>{e.preventDefault();try{await a({...d,tutorGender:m,studentGender:v})}catch(e){console.error("Failed to start session:",e)}},[d,m,v,a]),E=(0,p.useCallback)(()=>{c(),h(ol),g("female"),y("male")},[c]),R=(0,p.useCallback)(async e=>{await l(e,m,v)},[l,m,v]);return(0,f.jsxs)("div",{className:"flex h-dvh flex-col bg-background",children:[(0,f.jsx)(id.KorliHeader,{}),(0,f.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:w?(0,f.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,f.jsx)(nE,{config:t||d,onChange:S,onSubmit:C,onReset:E,hasSession:w,isStarting:i}),(0,f.jsx)("div",{className:"flex-1 overflow-hidden px-4 py-3",children:(0,f.jsx)("div",{className:"mx-auto flex h-full max-w-3xl flex-col",children:(0,f.jsx)(os,{messages:r,activeOverlay:n,onToggleOverlay:u})})}),(0,f.jsx)("div",{className:"border-t border-border bg-background px-4 py-3",children:(0,f.jsxs)("div",{className:"mx-auto max-w-3xl",children:[s&&(0,f.jsx)("p",{className:"mb-2 text-sm text-destructive",children:s}),(0,f.jsx)(i9,{disabled:i,hasSession:w,isStreaming:o,onSendText:R,foreignLanguage:t?.foreignLanguage||d.foreignLanguage,onOpenGenderSettings:()=>b(!0)})]})})]}):(0,f.jsx)(nE,{config:d,onChange:S,onSubmit:C,onReset:E,hasSession:w,isStarting:i})}),(0,f.jsx)(ic,{open:x,onOpenChange:b,tutorGender:m,studentGender:v,onTutorGenderChange:g,onStudentGenderChange:y})]})}function oc(){return(0,f.jsx)(ou,{})}e.s(["default",()=>oc],31713)}]);