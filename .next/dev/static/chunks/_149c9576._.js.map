{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function generateUUID(): string {\n  if (typeof crypto !== 'undefined' && 'randomUUID' in crypto) {\n    return crypto.randomUUID();\n  }\n  \n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport function getLocalStorage(key: string) {\n  if (typeof window !== 'undefined') {\n    return JSON.parse(localStorage.getItem(key) || '[]');\n  }\n  return [];\n}\n\nexport function sanitizeText(text: string) {\n  return text.replace('<has_function_call>', '');\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS;IACd,IAAI,OAAO,WAAW,eAAe,gBAAgB,QAAQ;QAC3D,OAAO,OAAO,UAAU;IAC1B;IAEA,OAAO,uCAAuC,OAAO,CAAC,SAAS,CAAC;QAC9D,MAAM,IAAI,AAAC,KAAK,MAAM,KAAK,KAAM;QACjC,MAAM,IAAI,MAAM,MAAM,IAAI,AAAC,IAAI,MAAO;QACtC,OAAO,EAAE,QAAQ,CAAC;IACpB;AACF;AAEO,SAAS,gBAAgB,GAAW;IACzC,wCAAmC;QACjC,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,QAAQ;IACjD;;;AAEF;AAEO,SAAS,aAAa,IAAY;IACvC,OAAO,KAAK,OAAO,CAAC,uBAAuB;AAC7C"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot as SlotPrimitive } from \"radix-ui\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? SlotPrimitive.Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2MAAa,CAAC,IAAI,GAAG;IAC5C,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Select as SelectPrimitive } from \"radix-ui\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/level-slider.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\ninterface LevelSliderProps {\n  value: string;\n  onChange: (value: string) => void;\n  levels: readonly string[];\n}\n\nexport function LevelSlider({ value, onChange, levels }: LevelSliderProps) {\n  return (\n    <div className=\"flex w-full gap-1 sm:gap-2\">\n      {levels.map((level) => (\n        <button\n          key={level}\n          type=\"button\"\n          onClick={() => onChange(level)}\n          className={cn(\n            \"flex-1 rounded-lg py-2 sm:py-3 text-xs sm:text-sm font-medium transition-all\",\n            value === level\n              ? \"bg-primary text-primary-foreground shadow-sm\"\n              : \"bg-muted text-muted-foreground hover:bg-accent hover:text-accent-foreground\"\n          )}\n        >\n          {level}\n        </button>\n      ))}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAoB;IACvE,qBACE,6LAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;gBAEC,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,qHAAE,EACX,gFACA,UAAU,QACN,iDACA;0BAGL;eAVI;;;;;;;;;;AAef;KApBgB"}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/lib/constants/languages.ts"],"sourcesContent":["export const LANGUAGES = [\n  'Afrikaans',\n  'Arabic',\n  'Armenian',\n  'Azerbaijani',\n  'Belarusian',\n  'Bosnian',\n  'Bulgarian',\n  'Catalan',\n  'Chinese',\n  'Croatian',\n  'Czech',\n  'Danish',\n  'Dutch',\n  'English',\n  'Estonian',\n  'Finnish',\n  'French',\n  'Galician',\n  'German',\n  'Greek',\n  'Hebrew',\n  'Hindi',\n  'Hungarian',\n  'Icelandic',\n  'Indonesian',\n  'Italian',\n  'Japanese',\n  'Kannada',\n  'Kazakh',\n  'Korean',\n  'Latvian',\n  'Lithuanian',\n  'Macedonian',\n  'Malay',\n  'Marathi',\n  'Maori',\n  'Nepali',\n  'Norwegian',\n  'Persian',\n  'Polish',\n  'Portuguese',\n  'Romanian',\n  'Russian',\n  'Serbian',\n  'Slovak',\n  'Slovenian',\n  'Spanish',\n  'Swahili',\n  'Swedish',\n  'Tagalog',\n  'Tamil',\n  'Thai',\n  'Turkish',\n  'Ukrainian',\n  'Urdu',\n  'Vietnamese',\n  'Welsh',\n] as const;\n\nexport type SupportedLanguage = (typeof LANGUAGES)[number];\n\n// Mapping of language names to country codes for flag display\nexport const LANGUAGE_TO_FLAG: Record<string, string> = {\n  Afrikaans: 'ZA',\n  Arabic: 'SA',\n  Armenian: 'AM',\n  Azerbaijani: 'AZ',\n  Belarusian: 'BY',\n  Bosnian: 'BA',\n  Bulgarian: 'BG',\n  Catalan: 'ES',\n  Chinese: 'CN',\n  Croatian: 'HR',\n  Czech: 'CZ',\n  Danish: 'DK',\n  Dutch: 'NL',\n  English: 'US',\n  Estonian: 'EE',\n  Finnish: 'FI',\n  French: 'FR',\n  Galician: 'ES',\n  German: 'DE',\n  Greek: 'GR',\n  Hebrew: 'IL',\n  Hindi: 'IN',\n  Hungarian: 'HU',\n  Icelandic: 'IS',\n  Indonesian: 'ID',\n  Italian: 'IT',\n  Japanese: 'JP',\n  Kannada: 'IN',\n  Kazakh: 'KZ',\n  Korean: 'KR',\n  Latvian: 'LV',\n  Lithuanian: 'LT',\n  Macedonian: 'MK',\n  Malay: 'MY',\n  Marathi: 'IN',\n  Maori: 'NZ',\n  Nepali: 'NP',\n  Norwegian: 'NO',\n  Persian: 'IR',\n  Polish: 'PL',\n  Portuguese: 'PT',\n  Romanian: 'RO',\n  Russian: 'RU',\n  Serbian: 'RS',\n  Slovak: 'SK',\n  Slovenian: 'SI',\n  Spanish: 'ES',\n  Swahili: 'KE',\n  Swedish: 'SE',\n  Tagalog: 'PH',\n  Tamil: 'LK',\n  Thai: 'TH',\n  Turkish: 'TR',\n  Ukrainian: 'UA',\n  Urdu: 'PK',\n  Vietnamese: 'VN',\n  Welsh: 'GB-WLS',\n};\n\nexport const LEVELS = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2'] as const;\n\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAKM,MAAM,mBAA2C;IACtD,WAAW;IACX,QAAQ;IACR,UAAU;IACV,aAAa;IACb,YAAY;IACZ,SAAS;IACT,WAAW;IACX,SAAS;IACT,SAAS;IACT,UAAU;IACV,OAAO;IACP,QAAQ;IACR,OAAO;IACP,SAAS;IACT,UAAU;IACV,SAAS;IACT,QAAQ;IACR,UAAU;IACV,QAAQ;IACR,OAAO;IACP,QAAQ;IACR,OAAO;IACP,WAAW;IACX,WAAW;IACX,YAAY;IACZ,SAAS;IACT,UAAU;IACV,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,SAAS;IACT,YAAY;IACZ,YAAY;IACZ,OAAO;IACP,SAAS;IACT,OAAO;IACP,QAAQ;IACR,WAAW;IACX,SAAS;IACT,QAAQ;IACR,YAAY;IACZ,UAAU;IACV,SAAS;IACT,SAAS;IACT,QAAQ;IACR,WAAW;IACX,SAAS;IACT,SAAS;IACT,SAAS;IACT,SAAS;IACT,OAAO;IACP,MAAM;IACN,SAAS;IACT,WAAW;IACX,MAAM;IACN,YAAY;IACZ,OAAO;AACT;AAEO,MAAM,SAAS;IAAC;IAAM;IAAM;IAAM;IAAM;IAAM;CAAK"}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/configuration-form.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FormEvent } from \"react\";\nimport Image from \"next/image\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { LevelSlider } from \"@/components/level-slider\";\nimport { LANGUAGE_TO_FLAG, LANGUAGES, LEVELS } from \"@/lib/constants/languages\";\nimport type { ChatConfig, StudentLevel } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ConfigurationFormProps {\n  config: ChatConfig;\n  onChange: (field: keyof ChatConfig) => (value: string) => void;\n  onSubmit: (event: FormEvent) => void;\n  onReset?: () => void;\n  hasSession: boolean;\n  isStarting: boolean;\n}\n\nfunction getFlagPath(language: string): string | null {\n  const countryCode = LANGUAGE_TO_FLAG[language];\n  if (!countryCode) return null;\n  return `/flags/l/${countryCode}.svg`;\n}\n\nfunction LanguageItem({ language }: { language: string }) {\n  const flagPath = getFlagPath(language);\n  \n  return (\n    <div className=\"flex items-center gap-2\">\n      {flagPath && (\n        <Image\n          src={flagPath}\n          alt={`${language} flag`}\n          width={20}\n          height={15}\n          className=\"rounded-sm\"\n        />\n      )}\n      <span>{language}</span>\n    </div>\n  );\n}\n\nexport function ConfigurationForm({\n  config,\n  onChange,\n  onSubmit,\n  onReset,\n  hasSession,\n  isStarting,\n}: ConfigurationFormProps) {\n  const sortedLanguages = [...LANGUAGES].sort();\n\n  if (hasSession) {\n    return (\n      <div className=\"flex items-center justify-between border-b border-border px-4 py-2\">\n        <div className=\"flex flex-wrap items-center gap-2 text-xs text-muted-foreground\">\n          <span>\n            <span className=\"font-medium text-foreground\">\n              {config.foreignLanguage}\n            </span>{\" \"}\n            → {config.nativeLanguage}\n          </span>\n          <span className=\"text-muted-foreground/50\">•</span>\n          <span>\n            Level:{\" \"}\n            <span className=\"font-medium text-foreground\">\n              {config.studentLevel}\n            </span>\n          </span>\n        </div>\n\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={onReset}\n          className=\"h-7 px-3 text-xs\"\n        >\n          Reset\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex min-h-[480px] items-center justify-center p-6\">\n      <form onSubmit={onSubmit} className=\"w-full max-w-xl space-y-8\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold text-foreground\">\n            Start your language practice\n          </h2>\n          <p className=\"mt-2 text-sm text-muted-foreground\">\n            Choose your languages and level to begin\n          </p>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-foreground\">\n                Learning\n              </label>\n              <Select\n                value={config.foreignLanguage}\n                onValueChange={onChange(\"foreignLanguage\")}\n              >\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue>\n                    <LanguageItem language={config.foreignLanguage} />\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectContent className=\"max-h-[300px]\">\n                  {sortedLanguages.map((lang) => (\n                    <SelectItem key={lang} value={lang}>\n                      <LanguageItem language={lang} />\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-foreground\">\n                Native Language\n              </label>\n              <Select\n                value={config.nativeLanguage}\n                onValueChange={onChange(\"nativeLanguage\")}\n              >\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue>\n                    <LanguageItem language={config.nativeLanguage} />\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectContent className=\"max-h-[300px]\">\n                  {sortedLanguages.map((lang) => (\n                    <SelectItem key={lang} value={lang}>\n                      <LanguageItem language={lang} />\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium text-foreground\">\n              Proficiency Level\n            </label>\n            <LevelSlider\n              value={config.studentLevel}\n              onChange={onChange(\"studentLevel\") as (value: string) => void}\n              levels={LEVELS}\n            />\n            <p className=\"text-xs text-muted-foreground text-center\">\n              {config.studentLevel === \"A1\" && \"Beginner - Basic phrases and vocabulary\"}\n              {config.studentLevel === \"A2\" && \"Elementary - Simple conversations\"}\n              {config.studentLevel === \"B1\" && \"Intermediate - Everyday topics\"}\n              {config.studentLevel === \"B2\" && \"Upper Intermediate - Complex discussions\"}\n              {config.studentLevel === \"C1\" && \"Advanced - Fluent expression\"}\n              {config.studentLevel === \"C2\" && \"Mastery - Near-native proficiency\"}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-center pt-2\">\n          <Button\n            type=\"submit\"\n            disabled={isStarting}\n            size=\"lg\"\n            className=\"px-8\"\n          >\n            {isStarting ? \"Starting...\" : \"Let's Chat\"}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 918, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Dialog as SheetPrimitive } from \"radix-ui\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,iNAAc,CAAC,IAAI;AAEjC,MAAM,eAAe,iNAAc,CAAC,OAAO;AAE3C,MAAM,aAAa,iNAAc,CAAC,KAAK;AAEvC,MAAM,cAAc,iNAAc,CAAC,MAAM;AAEzC,MAAM,6BAAe,2KAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,iNAAc,CAAC,OAAO;QACrB,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,iNAAc,CAAC,OAAO,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,0KAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,iNAAc,CAAC,OAAO;gBACrB,KAAK;gBACL,WAAW,IAAA,qHAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,6LAAC,iNAAc,CAAC,KAAK;wBAAC,WAAU;;0CAC9B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,iNAAc,CAAC,OAAO,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,iNAAc,CAAC,KAAK;QACnB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG,iNAAc,CAAC,KAAK,CAAC,WAAW;AAEzD,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,iNAAc,CAAC,WAAW;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,iNAAc,CAAC,WAAW,CAAC,WAAW"}},
    {"offset": {"line": 1094, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/gender-settings.tsx"],"sourcesContent":["\"use client\";\n\nimport { User } from \"lucide-react\";\n\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport type { GenderOption } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\n\ninterface GenderSettingsProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  tutorGender: GenderOption;\n  studentGender: GenderOption;\n  onTutorGenderChange: (gender: GenderOption) => void;\n  onStudentGenderChange: (gender: GenderOption) => void;\n}\n\ninterface GenderButtonProps {\n  label: string;\n  description: string;\n  selected: boolean;\n  onClick: () => void;\n}\n\nfunction GenderButton({ label, description, selected, onClick }: GenderButtonProps) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={cn(\n        \"flex flex-1 flex-col items-center gap-2 rounded-lg border p-4 transition-all\",\n        selected\n          ? \"border-primary bg-primary/5 text-primary\"\n          : \"border-border bg-background text-muted-foreground hover:border-muted-foreground/50 hover:bg-muted/50\"\n      )}\n    >\n      <User className={cn(\"h-6 w-6\", selected && \"text-primary\")} />\n      <span className=\"font-medium\">{label}</span>\n      <span className=\"text-xs opacity-70\">{description}</span>\n    </button>\n  );\n}\n\nexport function GenderSettings({\n  open,\n  onOpenChange,\n  tutorGender,\n  studentGender,\n  onTutorGenderChange,\n  onStudentGenderChange,\n}: GenderSettingsProps) {\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent side=\"right\" className=\"w-full sm:max-w-sm\">\n        <SheetHeader>\n          <SheetTitle>Voice Settings</SheetTitle>\n          <SheetDescription>\n            Choose the voice gender for your tutor and for playback of your\n            corrected messages.\n          </SheetDescription>\n        </SheetHeader>\n\n        <div className=\"mt-8 space-y-8\">\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium text-foreground\">\n              Tutor Voice\n            </label>\n            <p className=\"text-xs text-muted-foreground\">\n              The voice used for AI messages and tutor responses.\n            </p>\n            <div className=\"flex gap-3\">\n              <GenderButton\n                label=\"Male\"\n                description=\"Deeper voice\"\n                selected={tutorGender === \"male\"}\n                onClick={() => onTutorGenderChange(\"male\")}\n              />\n              <GenderButton\n                label=\"Female\"\n                description=\"Higher voice\"\n                selected={tutorGender === \"female\"}\n                onClick={() => onTutorGenderChange(\"female\")}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium text-foreground\">\n              Your Voice (for corrections)\n            </label>\n            <p className=\"text-xs text-muted-foreground\">\n              The voice used when playing back your corrected messages.\n            </p>\n            <div className=\"flex gap-3\">\n              <GenderButton\n                label=\"Male\"\n                description=\"Deeper voice\"\n                selected={studentGender === \"male\"}\n                onClick={() => onStudentGenderChange(\"male\")}\n              />\n              <GenderButton\n                label=\"Female\"\n                description=\"Higher voice\"\n                selected={studentGender === \"female\"}\n                onClick={() => onStudentGenderChange(\"female\")}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-8\">\n          <Button\n            onClick={() => onOpenChange(false)}\n            className=\"w-full\"\n          >\n            Done\n          </Button>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAOA;AAEA;AAbA;;;;;;AA+BA,SAAS,aAAa,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,OAAO,EAAqB;IAChF,qBACE,6LAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW,IAAA,qHAAE,EACX,gFACA,WACI,6CACA;;0BAGN,6LAAC,6MAAI;gBAAC,WAAW,IAAA,qHAAE,EAAC,WAAW,YAAY;;;;;;0BAC3C,6LAAC;gBAAK,WAAU;0BAAe;;;;;;0BAC/B,6LAAC;gBAAK,WAAU;0BAAsB;;;;;;;;;;;;AAG5C;KAjBS;AAmBF,SAAS,eAAe,EAC7B,IAAI,EACJ,YAAY,EACZ,WAAW,EACX,aAAa,EACb,mBAAmB,EACnB,qBAAqB,EACD;IACpB,qBACE,6LAAC,sIAAK;QAAC,MAAM;QAAM,cAAc;kBAC/B,cAAA,6LAAC,6IAAY;YAAC,MAAK;YAAQ,WAAU;;8BACnC,6LAAC,4IAAW;;sCACV,6LAAC,2IAAU;sCAAC;;;;;;sCACZ,6LAAC,iJAAgB;sCAAC;;;;;;;;;;;;8BAMpB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAM,WAAU;8CAAsC;;;;;;8CAGvD,6LAAC;oCAAE,WAAU;8CAAgC;;;;;;8CAG7C,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,OAAM;4CACN,aAAY;4CACZ,UAAU,gBAAgB;4CAC1B,SAAS,IAAM,oBAAoB;;;;;;sDAErC,6LAAC;4CACC,OAAM;4CACN,aAAY;4CACZ,UAAU,gBAAgB;4CAC1B,SAAS,IAAM,oBAAoB;;;;;;;;;;;;;;;;;;sCAKzC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAM,WAAU;8CAAsC;;;;;;8CAGvD,6LAAC;oCAAE,WAAU;8CAAgC;;;;;;8CAG7C,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,OAAM;4CACN,aAAY;4CACZ,UAAU,kBAAkB;4CAC5B,SAAS,IAAM,sBAAsB;;;;;;sDAEvC,6LAAC;4CACC,OAAM;4CACN,aAAY;4CACZ,UAAU,kBAAkB;4CAC5B,SAAS,IAAM,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;;8BAM7C,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,wIAAM;wBACL,SAAS,IAAM,aAAa;wBAC5B,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;MA9EgB"}},
    {"offset": {"line": 1332, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/korli-header.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useTheme } from \"next-themes\";\nimport { Moon, Sun, MessageSquare, Info } from \"lucide-react\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\nexport function KorliHeader() {\n  const pathname = usePathname();\n  const { resolvedTheme, setTheme } = useTheme();\n\n  const isChat = pathname === \"/\" || pathname.startsWith(\"/chat\");\n  const isInfo = pathname === \"/info\";\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"mx-auto flex h-14 max-w-5xl items-center justify-between px-4\">\n        <nav className=\"flex items-center gap-1\">\n          <Link href=\"/\">\n            <Button\n              variant={isChat ? \"secondary\" : \"ghost\"}\n              size=\"sm\"\n              className={cn(\n                \"gap-1.5 px-3\",\n                isChat && \"bg-accent text-accent-foreground\"\n              )}\n            >\n              <MessageSquare className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Chat</span>\n            </Button>\n          </Link>\n          <Link href=\"/info\">\n            <Button\n              variant={isInfo ? \"secondary\" : \"ghost\"}\n              size=\"sm\"\n              className={cn(\n                \"gap-1.5 px-3\",\n                isInfo && \"bg-accent text-accent-foreground\"\n              )}\n            >\n              <Info className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Info</span>\n            </Button>\n          </Link>\n        </nav>\n\n        <div className=\"absolute left-1/2 -translate-x-1/2\">\n          <Link href=\"/\" className=\"flex items-center\">\n            <Image\n              src={resolvedTheme === \"dark\" ? \"/korli-logo-white.png\" : \"/korli-logo.png\"}\n              alt=\"Korli\"\n              width={80}\n              height={28}\n              className=\"h-6 w-auto sm:h-7\"\n              priority\n            />\n          </Link>\n        </div>\n\n        <div className=\"flex items-center\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setTheme(resolvedTheme === \"dark\" ? \"light\" : \"dark\")}\n            className=\"h-8 w-8 p-0\"\n          >\n            <Sun className=\"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n            <Moon className=\"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n            <span className=\"sr-only\">Toggle theme</span>\n          </Button>\n        </div>\n      </div>\n    </header>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;;;AATA;;;;;;;;AAWO,SAAS;;IACd,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,aAAa,EAAE,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IAE5C,MAAM,SAAS,aAAa,OAAO,SAAS,UAAU,CAAC;IACvD,MAAM,SAAS,aAAa;IAE5B,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC,wIAAM;gCACL,SAAS,SAAS,cAAc;gCAChC,MAAK;gCACL,WAAW,IAAA,qHAAE,EACX,gBACA,UAAU;;kDAGZ,6LAAC,4OAAa;wCAAC,WAAU;;;;;;kDACzB,6LAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;;;;;;sCAGvC,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC,wIAAM;gCACL,SAAS,SAAS,cAAc;gCAChC,MAAK;gCACL,WAAW,IAAA,qHAAE,EACX,gBACA,UAAU;;kDAGZ,6LAAC,6MAAI;wCAAC,WAAU;;;;;;kDAChB,6LAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;;;;;;;;;;;;8BAKzC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,0KAAI;wBAAC,MAAK;wBAAI,WAAU;kCACvB,cAAA,6LAAC,2IAAK;4BACJ,KAAK,kBAAkB,SAAS,0BAA0B;4BAC1D,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;4BACV,QAAQ;;;;;;;;;;;;;;;;8BAKd,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,wIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,SAAS,kBAAkB,SAAS,UAAU;wBAC7D,WAAU;;0CAEV,6LAAC,0MAAG;gCAAC,WAAU;;;;;;0CACf,6LAAC,6MAAI;gCAAC,WAAU;;;;;;0CAChB,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;GAnEgB;;QACG,oJAAW;QACQ,+JAAQ;;;KAF9B"}},
    {"offset": {"line": 1539, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/lib/korli-api.ts"],"sourcesContent":["import type { \n  ChatConfig, \n  ContinueTextChatPayload, \n  SSEventPayload, \n  StartTextChatResponse, \n  VoiceChatPayload \n} from './types';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL ?? 'http://localhost:8000';\n\nexport type SSECallbacks = {\n  onEvent: (event: SSEventPayload) => void;\n  onError?: (error: Error) => void;\n  onComplete?: () => void;\n};\n\nconst safeJsonParse = (value: string) => {\n  if (!value) {\n    return null;\n  }\n\n  try {\n    return JSON.parse(value);\n  } catch {\n    return value;\n  }\n};\n\nconst buildJsonBody = (config: Record<string, unknown>) =>\n  JSON.stringify(\n    Object.entries(config).reduce<Record<string, unknown>>((acc, [key, value]) => {\n      if (value !== undefined && value !== null) {\n        acc[key] = value;\n      }\n\n      return acc;\n    }, {}),\n  );\n\nconst startSSE = (path: string, init: RequestInit, callbacks: SSECallbacks) => {\n  const controller = new AbortController();\n\n  const fetchStream = async () => {\n    try {\n      const response = await fetch(path, {\n        ...init,\n        signal: controller.signal,\n        headers: {\n          Accept: 'text/event-stream',\n          ...(init.headers ?? {}),\n        },\n      });\n\n      if (!response.ok) {\n        const message = await response.text();\n        throw new Error(message || 'Streaming request failed');\n      }\n\n      if (!response.body) {\n        throw new Error('Streaming response body is unavailable');\n      }\n\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder('utf-8');\n      let buffer = '';\n\n      const processBuffer = () => {\n        const chunks = buffer.split(/\\r?\\n\\r?\\n/);\n        buffer = chunks.pop() ?? '';\n\n        for (const chunk of chunks) {\n          if (!chunk.trim()) {\n            continue;\n          }\n\n          const lines = chunk.split(/\\r?\\n/);\n          let eventName = 'message';\n          const dataLines: string[] = [];\n\n          for (const line of lines) {\n            if (line.startsWith(':')) {\n              continue;\n            }\n\n            if (line.startsWith('event:')) {\n              eventName = line.slice(6).trim();\n              continue;\n            }\n\n            if (line.startsWith('data:')) {\n              dataLines.push(line.slice(5).trim());\n            }\n          }\n\n          const raw = dataLines.join('\\n');\n          callbacks.onEvent({\n            event: eventName,\n            data: safeJsonParse(raw),\n            raw,\n          });\n        }\n      };\n\n      const read = async (): Promise<void> => {\n        const { value, done } = await reader.read();\n\n        if (done) {\n          callbacks.onComplete?.();\n          return;\n        }\n\n        buffer += decoder.decode(value, { stream: true });\n        processBuffer();\n        await read();\n      };\n\n      await read();\n    } catch (error) {\n      if ((error as Error).name === 'AbortError') {\n        return;\n      }\n\n      callbacks.onError?.(error as Error);\n    }\n  };\n\n  void fetchStream();\n\n  return () => controller.abort();\n};\n\nconst toUrl = (path: string) => `${API_BASE_URL}${path}`;\n\nexport const startTextChat = async (config: ChatConfig): Promise<StartTextChatResponse> => {\n  const response = await fetch(toUrl('/api/chat/text'), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: buildJsonBody({\n      foreign_language: config.foreignLanguage,\n      native_language: config.nativeLanguage,\n      student_level: config.studentLevel,\n      tutor_gender: config.tutorGender,\n      student_gender: config.studentGender,\n    }),\n  });\n\n  if (!response.ok) {\n    const message = await response.text();\n    throw new Error(message || 'Unable to start chat session');\n  }\n\n  return (await response.json()) as StartTextChatResponse;\n};\n\nexport const continueTextChatSSE = (\n  payload: ContinueTextChatPayload,\n  callbacks: SSECallbacks,\n) => {\n  const body: Record<string, unknown> = {\n    thread_id: payload.threadId,\n    message: payload.message,\n    stream: true,\n    foreign_language: payload.foreignLanguage,\n  };\n\n  // Only include gender if provided\n  if (payload.tutorGender !== undefined) {\n    body.tutor_gender = payload.tutorGender;\n  }\n  if (payload.studentGender !== undefined) {\n    body.student_gender = payload.studentGender;\n  }\n\n  return startSSE(\n    toUrl('/api/chat/text'),\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: buildJsonBody(body),\n    },\n    callbacks,\n  );\n};\n\nexport const voiceChatSSE = (payload: VoiceChatPayload, callbacks: SSECallbacks) => {\n  const formData = new FormData();\n  formData.append('thread_id', payload.threadId);\n  formData.append('foreign_language', payload.foreignLanguage);\n  formData.append('stream', 'true');\n  formData.append('audio_file', payload.audioFile, 'message.webm');\n\n  // Only include gender if provided\n  if (payload.tutorGender !== undefined) {\n    formData.append('tutor_gender', payload.tutorGender);\n  }\n  if (payload.studentGender !== undefined) {\n    formData.append('student_gender', payload.studentGender);\n  }\n\n  return startSSE(\n    toUrl('/api/chat/voice'),\n    {\n      method: 'POST',\n      body: formData,\n    },\n    callbacks,\n  );\n};\n\nexport interface TranscribeAudioResponse {\n  text: string;\n  language_code: string;\n}\n\nexport const transcribeAudio = async (\n  audioFile: Blob,\n  foreignLanguage: string,\n): Promise<string> => {\n  const formData = new FormData();\n  formData.append('audio_file', audioFile, 'message.webm');\n  formData.append('foreign_language', foreignLanguage);\n\n  const response = await fetch(toUrl('/api/transcribe'), {\n    method: 'POST',\n    body: formData,\n  });\n\n  if (!response.ok) {\n    const message = await response.text();\n    throw new Error(message || 'Transcription failed');\n  }\n\n  const data = (await response.json()) as TranscribeAudioResponse;\n  return data.text;\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1725, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1759, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/elements/prompt-input.tsx"],"sourcesContent":["\"use client\";\n\nimport { Loader2Icon, SendIcon, SquareIcon, XIcon } from \"lucide-react\";\nimport type {\n  ComponentProps,\n  HTMLAttributes,\n  KeyboardEventHandler,\n} from \"react\";\nimport { Children } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { cn } from \"@/lib/utils\";\n\ntype ChatStatus = \"submitted\" | \"streaming\" | \"error\" | \"ready\";\n\nexport type PromptInputProps = HTMLAttributes<HTMLFormElement>;\n\nexport const PromptInput = ({ className, ...props }: PromptInputProps) => (\n  <form\n    className={cn(\n      \"w-full overflow-hidden rounded-xl border bg-background shadow-xs\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type PromptInputTextareaProps = ComponentProps<typeof Textarea> & {\n  minHeight?: number;\n  maxHeight?: number;\n  disableAutoResize?: boolean;\n  resizeOnNewLinesOnly?: boolean;\n};\n\nexport const PromptInputTextarea = ({\n  onChange,\n  className,\n  placeholder = \"What would you like to know?\",\n  minHeight = 48,\n  maxHeight = 164,\n  disableAutoResize = false,\n  resizeOnNewLinesOnly = false,\n  ...props\n}: PromptInputTextareaProps) => {\n  const handleKeyDown: KeyboardEventHandler<HTMLTextAreaElement> = (e) => {\n    if (e.key === \"Enter\") {\n      if (e.nativeEvent.isComposing) {\n        return;\n      }\n\n      if (e.shiftKey) {\n        return;\n      }\n\n      e.preventDefault();\n      const form = e.currentTarget.form;\n      if (form) {\n        form.requestSubmit();\n      }\n    }\n  };\n\n  return (\n    <Textarea\n      className={cn(\n        \"w-full resize-none rounded-none border-none p-3 shadow-none outline-hidden ring-0\",\n        disableAutoResize\n          ? \"field-sizing-fixed\"\n          : resizeOnNewLinesOnly\n            ? \"field-sizing-fixed\"\n            : \"field-sizing-content max-h-[6lh]\",\n        \"bg-transparent dark:bg-transparent\",\n        \"focus-visible:ring-0\",\n        className\n      )}\n      name=\"message\"\n      onChange={(e) => {\n        onChange?.(e);\n      }}\n      onKeyDown={handleKeyDown}\n      placeholder={placeholder}\n      {...props}\n    />\n  );\n};\n\nexport type PromptInputToolbarProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputToolbar = ({\n  className,\n  ...props\n}: PromptInputToolbarProps) => (\n  <div\n    className={cn(\"flex items-center justify-between p-1\", className)}\n    {...props}\n  />\n);\n\nexport type PromptInputToolsProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputTools = ({\n  className,\n  ...props\n}: PromptInputToolsProps) => (\n  <div\n    className={cn(\n      \"flex items-center gap-1\",\n      \"[&_button:first-child]:rounded-bl-xl\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type PromptInputButtonProps = ComponentProps<typeof Button>;\n\nexport const PromptInputButton = ({\n  variant = \"ghost\",\n  className,\n  size,\n  ...props\n}: PromptInputButtonProps) => {\n  const newSize =\n    (size ?? Children.count(props.children) > 1) ? \"default\" : \"icon\";\n\n  return (\n    <Button\n      className={cn(\n        \"shrink-0 gap-1.5 rounded-lg\",\n        variant === \"ghost\" && \"text-muted-foreground\",\n        newSize === \"default\" && \"px-3\",\n        className\n      )}\n      size={newSize}\n      type=\"button\"\n      variant={variant}\n      {...props}\n    />\n  );\n};\n\nexport type PromptInputSubmitProps = ComponentProps<typeof Button> & {\n  status?: ChatStatus;\n};\n\nexport const PromptInputSubmit = ({\n  className,\n  variant = \"default\",\n  size = \"icon\",\n  status,\n  children,\n  ...props\n}: PromptInputSubmitProps) => {\n  let Icon = <SendIcon className=\"size-4\" />;\n\n  if (status === \"submitted\") {\n    Icon = <Loader2Icon className=\"size-4 animate-spin\" />;\n  } else if (status === \"streaming\") {\n    Icon = <SquareIcon className=\"size-4\" />;\n  } else if (status === \"error\") {\n    Icon = <XIcon className=\"size-4\" />;\n  }\n\n  return (\n    <Button\n      className={cn(\"gap-1.5 rounded-lg\", className)}\n      size={size}\n      type=\"submit\"\n      variant={variant}\n      {...props}\n    >\n      {children ?? Icon}\n    </Button>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAXA;;;;;;;AAiBO,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAAyB,iBACnE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;KANA;AAiBN,MAAM,sBAAsB,CAAC,EAClC,QAAQ,EACR,SAAS,EACT,cAAc,8BAA8B,EAC5C,YAAY,EAAE,EACd,YAAY,GAAG,EACf,oBAAoB,KAAK,EACzB,uBAAuB,KAAK,EAC5B,GAAG,OACsB;IACzB,MAAM,gBAA2D,CAAC;QAChE,IAAI,EAAE,GAAG,KAAK,SAAS;YACrB,IAAI,EAAE,WAAW,CAAC,WAAW,EAAE;gBAC7B;YACF;YAEA,IAAI,EAAE,QAAQ,EAAE;gBACd;YACF;YAEA,EAAE,cAAc;YAChB,MAAM,OAAO,EAAE,aAAa,CAAC,IAAI;YACjC,IAAI,MAAM;gBACR,KAAK,aAAa;YACpB;QACF;IACF;IAEA,qBACE,6LAAC,4IAAQ;QACP,WAAW,IAAA,qHAAE,EACX,qFACA,oBACI,uBACA,uBACE,uBACA,oCACN,sCACA,wBACA;QAEF,MAAK;QACL,UAAU,CAAC;YACT,WAAW;QACb;QACA,WAAW;QACX,aAAa;QACZ,GAAG,KAAK;;;;;;AAGf;MAlDa;AAsDN,MAAM,qBAAqB,CAAC,EACjC,SAAS,EACT,GAAG,OACqB,iBACxB,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;MANA;AAYN,MAAM,mBAAmB,CAAC,EAC/B,SAAS,EACT,GAAG,OACmB,iBACtB,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,2BACA,wCACA;QAED,GAAG,KAAK;;;;;;MAVA;AAgBN,MAAM,oBAAoB,CAAC,EAChC,UAAU,OAAO,EACjB,SAAS,EACT,IAAI,EACJ,GAAG,OACoB;IACvB,MAAM,UACJ,AAAC,QAAQ,yKAAQ,CAAC,KAAK,CAAC,MAAM,QAAQ,IAAI,IAAK,YAAY;IAE7D,qBACE,6LAAC,wIAAM;QACL,WAAW,IAAA,qHAAE,EACX,+BACA,YAAY,WAAW,yBACvB,YAAY,aAAa,QACzB;QAEF,MAAM;QACN,MAAK;QACL,SAAS;QACR,GAAG,KAAK;;;;;;AAGf;MAvBa;AA6BN,MAAM,oBAAoB,CAAC,EAChC,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,MAAM,EACb,MAAM,EACN,QAAQ,EACR,GAAG,OACoB;IACvB,IAAI,qBAAO,6LAAC,qNAAQ;QAAC,WAAU;;;;;;IAE/B,IAAI,WAAW,aAAa;QAC1B,qBAAO,6LAAC,uOAAW;YAAC,WAAU;;;;;;IAChC,OAAO,IAAI,WAAW,aAAa;QACjC,qBAAO,6LAAC,2NAAU;YAAC,WAAU;;;;;;IAC/B,OAAO,IAAI,WAAW,SAAS;QAC7B,qBAAO,6LAAC,4MAAK;YAAC,WAAU;;;;;;IAC1B;IAEA,qBACE,6LAAC,wIAAM;QACL,WAAW,IAAA,qHAAE,EAAC,sBAAsB;QACpC,MAAM;QACN,MAAK;QACL,SAAS;QACR,GAAG,KAAK;kBAER,YAAY;;;;;;AAGnB;MA7Ba"}},
    {"offset": {"line": 1924, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/icons.tsx"],"sourcesContent":["export const SparklesIcon = ({ size = 16 }: { size?: number }) => (\n  <svg\n    height={size}\n    strokeLinejoin=\"round\"\n    style={{ color: \"currentcolor\" }}\n    viewBox=\"0 0 16 16\"\n    width={size}\n  >\n    <path\n      d=\"M2.5 0.5V0H3.5V0.5C3.5 1.60457 4.39543 2.5 5.5 2.5H6V3V3.5H5.5C4.39543 3.5 3.5 4.39543 3.5 5.5V6H3H2.5V5.5C2.5 4.39543 1.60457 3.5 0.5 3.5H0V3V2.5H0.5C1.60457 2.5 2.5 1.60457 2.5 0.5Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M14.5 4.5V5H13.5V4.5C13.5 3.94772 13.0523 3.5 12.5 3.5H12V3V2.5H12.5C13.0523 2.5 13.5 2.05228 13.5 1.5V1H14H14.5V1.5C14.5 2.05228 14.9477 2.5 15.5 2.5H16V3V3.5H15.5C14.9477 3.5 14.5 3.94772 14.5 4.5Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M8.40706 4.92939L8.5 4H9.5L9.59294 4.92939C9.82973 7.29734 11.7027 9.17027 14.0706 9.40706L15 9.5V10.5L14.0706 10.5929C11.7027 10.8297 9.82973 12.7027 9.59294 15.0706L9.5 16H8.5L8.40706 15.0706C8.17027 12.7027 6.29734 10.8297 3.92939 10.5929L3 10.5V9.5L3.92939 9.40706C6.29734 9.17027 8.17027 7.29734 8.40706 4.92939Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport const MicIcon = ({ size = 16 }: { size?: number }) => (\n  <svg\n    height={size}\n    style={{ color: \"currentcolor\" }}\n    viewBox=\"0 0 24 24\"\n    width={size}\n    fill=\"currentColor\"\n  >\n    <path d=\"M12 15a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v6a3 3 0 0 0 3 3zm6-3a1 1 0 0 1 2 0 8 8 0 0 1-7 7.94V22h-2v-2.06A8 8 0 0 1 4 12a1 1 0 0 1 2 0 6 6 0 0 0 12 0z\" />\n  </svg>\n);\n\nexport const CheckIcon = ({ size = 16 }: { size?: number }) => (\n  <svg\n    height={size}\n    style={{ color: \"currentcolor\" }}\n    viewBox=\"0 0 24 24\"\n    width={size}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path d=\"M20 6L9 17l-5-5\" />\n  </svg>\n);\n\nexport const PersonaIcon = ({ size = 16 }: { size?: number }) => (\n  <svg\n    height={size}\n    style={{ color: \"currentcolor\" }}\n    viewBox=\"0 0 24 24\"\n    width={size}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <circle cx=\"12\" cy=\"8\" r=\"5\" />\n    <path d=\"M20 21a8 8 0 1 0-16 0\" />\n  </svg>\n);\n\nexport const ArrowUpIcon = ({\n  size = 16,\n  ...props\n}: { size?: number } & React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg\n      height={size}\n      strokeLinejoin=\"round\"\n      style={{ color: \"currentcolor\", ...props.style }}\n      viewBox=\"0 0 16 16\"\n      width={size}\n      {...props}\n    >\n      <path\n        clipRule=\"evenodd\"\n        d=\"M8.70711 1.39644C8.31659 1.00592 7.68342 1.00592 7.2929 1.39644L2.21968 6.46966L1.68935 6.99999L2.75001 8.06065L3.28034 7.53032L7.25001 3.56065V14.25V15H8.75001V14.25V3.56065L12.7197 7.53032L13.25 8.06065L14.3107 6.99999L13.7803 6.46966L8.70711 1.39644Z\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\nexport const StopIcon = ({\n  size = 16,\n  ...props\n}: { size?: number } & React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg\n      height={size}\n      style={{ color: \"currentcolor\", ...props.style }}\n      viewBox=\"0 0 16 16\"\n      width={size}\n      {...props}\n    >\n      <path\n        clipRule=\"evenodd\"\n        d=\"M3 3H13V13H3V3Z\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAO,MAAM,eAAe,CAAC,EAAE,OAAO,EAAE,EAAqB,iBAC3D,6LAAC;QACC,QAAQ;QACR,gBAAe;QACf,OAAO;YAAE,OAAO;QAAe;QAC/B,SAAQ;QACR,OAAO;;0BAEP,6LAAC;gBACC,GAAE;gBACF,MAAK;;;;;;0BAEP,6LAAC;gBACC,GAAE;gBACF,MAAK;;;;;;0BAEP,6LAAC;gBACC,GAAE;gBACF,MAAK;;;;;;;;;;;;KAlBE;AAuBN,MAAM,UAAU,CAAC,EAAE,OAAO,EAAE,EAAqB,iBACtD,6LAAC;QACC,QAAQ;QACR,OAAO;YAAE,OAAO;QAAe;QAC/B,SAAQ;QACR,OAAO;QACP,MAAK;kBAEL,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;MARC;AAYN,MAAM,YAAY,CAAC,EAAE,OAAO,EAAE,EAAqB,iBACxD,6LAAC;QACC,QAAQ;QACR,OAAO;YAAE,OAAO;QAAe;QAC/B,SAAQ;QACR,OAAO;QACP,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;kBAEf,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;MAZC;AAgBN,MAAM,cAAc,CAAC,EAAE,OAAO,EAAE,EAAqB,iBAC1D,6LAAC;QACC,QAAQ;QACR,OAAO;YAAE,OAAO;QAAe;QAC/B,SAAQ;QACR,OAAO;QACP,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;;0BAEf,6LAAC;gBAAO,IAAG;gBAAK,IAAG;gBAAI,GAAE;;;;;;0BACzB,6LAAC;gBAAK,GAAE;;;;;;;;;;;;MAbC;AAiBN,MAAM,cAAc,CAAC,EAC1B,OAAO,EAAE,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC;QACC,QAAQ;QACR,gBAAe;QACf,OAAO;YAAE,OAAO;YAAgB,GAAG,MAAM,KAAK;QAAC;QAC/C,SAAQ;QACR,OAAO;QACN,GAAG,KAAK;kBAET,cAAA,6LAAC;YACC,UAAS;YACT,GAAE;YACF,MAAK;YACL,UAAS;;;;;;;;;;;AAIjB;MArBa;AAuBN,MAAM,WAAW,CAAC,EACvB,OAAO,EAAE,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC;QACC,QAAQ;QACR,OAAO;YAAE,OAAO;YAAgB,GAAG,MAAM,KAAK;QAAC;QAC/C,SAAQ;QACR,OAAO;QACN,GAAG,KAAK;kBAET,cAAA,6LAAC;YACC,UAAS;YACT,GAAE;YACF,MAAK;YACL,UAAS;;;;;;;;;;;AAIjB;MApBa"}},
    {"offset": {"line": 2131, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/korli-input.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport { useTheme } from \"next-themes\";\nimport { X } from \"lucide-react\";\n\nimport { transcribeAudio } from \"@/lib/korli-api\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  PromptInput,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputToolbar,\n  PromptInputTools,\n} from \"@/components/elements/prompt-input\";\nimport { ArrowUpIcon, CheckIcon, MicIcon, PersonaIcon, StopIcon } from \"@/components/icons\";\n\ntype RecordingState = \"idle\" | \"recording\";\n\nconst MAX_AUDIO_BYTES = 10 * 1024 * 1024;\n\ninterface KorliInputProps {\n  disabled: boolean;\n  hasSession: boolean;\n  isStreaming: boolean;\n  onSendText: (message: string) => Promise<void>;\n  foreignLanguage: string;\n  onOpenGenderSettings: () => void;\n}\n\nexport function KorliInput({\n  disabled,\n  hasSession,\n  isStreaming,\n  onSendText,\n  foreignLanguage,\n  onOpenGenderSettings,\n}: KorliInputProps) {\n  const { resolvedTheme } = useTheme();\n  const waveformColor = resolvedTheme === \"dark\" ? \"#ffffff\" : \"#475569\";\n\n  const [text, setText] = useState(\"\");\n  const [recordingState, setRecordingState] = useState<RecordingState>(\"idle\");\n  const [recordingError, setRecordingError] = useState<string | null>(null);\n  const [isTranscribing, setIsTranscribing] = useState(false);\n  const [transcribedAudioBlob, setTranscribedAudioBlob] = useState<Blob | null>(null);\n\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const mediaStreamRef = useRef<MediaStream | null>(null);\n  const chunksRef = useRef<Blob[]>([]);\n  const recordedSizeRef = useRef(0);\n  const sizeExceededRef = useRef(false);\n  const textareaRef = useRef<HTMLTextAreaElement | null>(null);\n  const liveWaveformRef = useRef<HTMLDivElement | null>(null);\n  const liveWaveSurferRef = useRef<WaveSurfer | null>(null);\n  const recordPluginRef = useRef<InstanceType<typeof RecordPlugin> | null>(null);\n  const shouldTranscribeRef = useRef(false);\n  const transcribedAudioUrlRef = useRef<string | null>(null);\n  const transcribedAudioRef = useRef<HTMLAudioElement | null>(null);\n  const [isPlayingTranscribedAudio, setIsPlayingTranscribedAudio] = useState(false);\n\n  const cleanupStream = () => {\n    mediaStreamRef.current?.getTracks().forEach((track) => track.stop());\n    mediaStreamRef.current = null;\n  };\n\n  const destroyLiveWaveform = useCallback(() => {\n    recordPluginRef.current?.destroy();\n    recordPluginRef.current = null;\n    liveWaveSurferRef.current?.destroy();\n    liveWaveSurferRef.current = null;\n  }, []);\n\n  const transcribeAndInsert = useCallback(\n    async (blob: Blob) => {\n      setIsTranscribing(true);\n      setRecordingError(null);\n\n      try {\n        const transcribedText = await transcribeAudio(blob, foreignLanguage);\n\n        if (!transcribedText) {\n          throw new Error(\"No transcription received\");\n        }\n\n        setTranscribedAudioBlob(blob);\n        setText((prev) => prev + transcribedText);\n        setRecordingState(\"idle\");\n        shouldTranscribeRef.current = false;\n      } catch (err) {\n        setRecordingError(\n          err instanceof Error ? err.message : \"Unable to transcribe audio.\"\n        );\n        shouldTranscribeRef.current = false;\n        setRecordingState(\"idle\");\n      } finally {\n        setIsTranscribing(false);\n      }\n    },\n    [foreignLanguage]\n  );\n\n  const stopRecording = useCallback(\n    (shouldAccept: boolean) => {\n      if (!mediaRecorderRef.current) return;\n\n      destroyLiveWaveform();\n\n      const acceptRecording = shouldAccept;\n\n      mediaRecorderRef.current.onstop = () => {\n        cleanupStream();\n\n        if (sizeExceededRef.current) {\n          chunksRef.current = [];\n          sizeExceededRef.current = false;\n          setRecordingState(\"idle\");\n          mediaRecorderRef.current = null;\n          return;\n        }\n\n        if (chunksRef.current.length === 0) {\n          setRecordingState(\"idle\");\n          mediaRecorderRef.current = null;\n          return;\n        }\n\n        if (!acceptRecording) {\n          chunksRef.current = [];\n          setRecordingState(\"idle\");\n          mediaRecorderRef.current = null;\n          return;\n        }\n\n        const blob = new Blob(chunksRef.current, { type: \"audio/webm\" });\n        chunksRef.current = [];\n\n        if (blob.size === 0) {\n          setRecordingState(\"idle\");\n          mediaRecorderRef.current = null;\n          return;\n        }\n\n        void transcribeAndInsert(blob);\n        mediaRecorderRef.current = null;\n      };\n\n      mediaRecorderRef.current.stop();\n    },\n    [destroyLiveWaveform, transcribeAndInsert]\n  );\n\n  const acceptRecording = useCallback(() => {\n    if (recordingState === \"recording\") {\n      shouldTranscribeRef.current = true;\n      stopRecording(true);\n    }\n  }, [stopRecording, recordingState]);\n\n  const cancelRecording = useCallback(() => {\n    stopRecording(false);\n  }, [stopRecording]);\n\n  const startRecording = async () => {\n    if (disabled || !hasSession) {\n      setRecordingError(\"Start the tutor session before recording.\");\n      return;\n    }\n\n    if (transcribedAudioUrlRef.current) {\n      URL.revokeObjectURL(transcribedAudioUrlRef.current);\n      transcribedAudioUrlRef.current = null;\n    }\n    setTranscribedAudioBlob(null);\n\n    if (\n      typeof MediaRecorder === \"undefined\" ||\n      typeof navigator === \"undefined\" ||\n      !navigator.mediaDevices?.getUserMedia\n    ) {\n      setRecordingError(\"Your browser does not support audio recording.\");\n      return;\n    }\n\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      mediaStreamRef.current = stream;\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: \"audio/webm\",\n      });\n\n      setRecordingError(null);\n      setRecordingState(\"recording\");\n      sizeExceededRef.current = false;\n      recordedSizeRef.current = 0;\n      chunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (!event.data || event.data.size === 0) {\n          return;\n        }\n\n        recordedSizeRef.current += event.data.size;\n        if (recordedSizeRef.current > MAX_AUDIO_BYTES) {\n          sizeExceededRef.current = true;\n          setRecordingError(\"Recording stopped: 10MB audio limit reached.\");\n          stopRecording(false);\n          return;\n        }\n\n        chunksRef.current.push(event.data);\n      };\n\n      mediaRecorder.onerror = () => {\n        setRecordingError(\"Microphone error occurred.\");\n        stopRecording(false);\n      };\n\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start(250);\n    } catch (err) {\n      setRecordingError(\n        err instanceof DOMException && err.name === \"NotAllowedError\"\n          ? \"Microphone permissions are required to record audio.\"\n          : \"Unable to access the microphone.\"\n      );\n      cleanupStream();\n      mediaRecorderRef.current = null;\n      setRecordingState(\"idle\");\n    }\n  };\n\n  useEffect(() => {\n    if (recordingState !== \"recording\") {\n      destroyLiveWaveform();\n      return;\n    }\n\n    if (!mediaStreamRef.current || !liveWaveformRef.current) {\n      return;\n    }\n\n    const recordPlugin = RecordPlugin.create({\n      renderRecordedAudio: false,\n      scrollingWaveform: true,\n      scrollingWaveformWindow: 0.5,\n      continuousWaveform: true,\n      continuousWaveformDuration: 0.5,\n      mediaRecorderTimeslice: 20,\n    });\n\n    const waveSurfer = WaveSurfer.create({\n      container: liveWaveformRef.current,\n      height: 26,\n      waveColor: waveformColor,\n      progressColor: waveformColor,\n      cursorWidth: 0,\n      barHeight: 1.7,\n      barWidth: 4,\n      barGap: 2,\n      barRadius: 4,\n      interact: false,\n      minPxPerSec: 300,\n      normalize: false,\n      autoScroll: true,\n      autoCenter: true,\n      fillParent: true,\n      hideScrollbar: true,\n      plugins: [recordPlugin],\n    });\n\n    recordPlugin.renderMicStream(mediaStreamRef.current);\n    liveWaveSurferRef.current = waveSurfer;\n    recordPluginRef.current = recordPlugin;\n\n    return () => {\n      destroyLiveWaveform();\n    };\n  }, [waveformColor, destroyLiveWaveform, recordingState]);\n\n  useEffect(\n    () => () => {\n      cleanupStream();\n      mediaRecorderRef.current?.stop();\n      destroyLiveWaveform();\n      if (transcribedAudioUrlRef.current) {\n        URL.revokeObjectURL(transcribedAudioUrlRef.current);\n      }\n    },\n    [destroyLiveWaveform]\n  );\n\n  useEffect(() => {\n    if (transcribedAudioBlob) {\n      if (transcribedAudioUrlRef.current) {\n        URL.revokeObjectURL(transcribedAudioUrlRef.current);\n      }\n      transcribedAudioUrlRef.current = URL.createObjectURL(transcribedAudioBlob);\n      if (transcribedAudioUrlRef.current) {\n        transcribedAudioRef.current = new Audio(transcribedAudioUrlRef.current);\n      }\n    } else {\n      if (transcribedAudioUrlRef.current) {\n        URL.revokeObjectURL(transcribedAudioUrlRef.current);\n        transcribedAudioUrlRef.current = null;\n      }\n      if (transcribedAudioRef.current) {\n        transcribedAudioRef.current.pause();\n        transcribedAudioRef.current = null;\n      }\n      setIsPlayingTranscribedAudio(false);\n    }\n\n    return () => {\n      if (transcribedAudioUrlRef.current) {\n        URL.revokeObjectURL(transcribedAudioUrlRef.current);\n      }\n    };\n  }, [transcribedAudioBlob]);\n\n  useEffect(() => {\n    const audio = transcribedAudioRef.current;\n    if (!audio) return;\n\n    const handlePlay = () => setIsPlayingTranscribedAudio(true);\n    const handlePause = () => setIsPlayingTranscribedAudio(false);\n    const handleEnded = () => setIsPlayingTranscribedAudio(false);\n\n    audio.addEventListener(\"play\", handlePlay);\n    audio.addEventListener(\"pause\", handlePause);\n    audio.addEventListener(\"ended\", handleEnded);\n\n    return () => {\n      audio.removeEventListener(\"play\", handlePlay);\n      audio.removeEventListener(\"pause\", handlePause);\n      audio.removeEventListener(\"ended\", handleEnded);\n    };\n  }, [transcribedAudioBlob]);\n\n  const toggleTranscribedAudio = useCallback(async () => {\n    const audio = transcribedAudioRef.current;\n    if (!audio || !transcribedAudioBlob) return;\n\n    if (audio.paused) {\n      try {\n        await audio.play();\n      } catch (err) {\n        console.error(\"Error playing audio:\", err);\n      }\n    } else {\n      audio.pause();\n    }\n  }, [transcribedAudioBlob]);\n\n  const sendText = async () => {\n    const value = text.trim();\n    if (!value || disabled || recordingState !== \"idle\" || isStreaming) {\n      return;\n    }\n\n    try {\n      await onSendText(value);\n      setText(\"\");\n      if (transcribedAudioUrlRef.current) {\n        URL.revokeObjectURL(transcribedAudioUrlRef.current);\n        transcribedAudioUrlRef.current = null;\n      }\n      setTranscribedAudioBlob(null);\n      if (transcribedAudioRef.current) {\n        transcribedAudioRef.current.pause();\n        transcribedAudioRef.current = null;\n      }\n      setIsPlayingTranscribedAudio(false);\n    } catch (err) {\n      setRecordingError(\n        err instanceof Error ? err.message : \"Unable to send message.\"\n      );\n    }\n  };\n\n  const textDisabled = disabled || recordingState !== \"idle\" || isTranscribing;\n  const micDisabled = disabled || isTranscribing || isStreaming;\n  const canSend = recordingState === \"idle\" && text.trim() && !isTranscribing && !isStreaming;\n\n  return (\n    <div className=\"relative flex w-full flex-col gap-3\">\n      {transcribedAudioBlob && (\n        <div className=\"flex items-center justify-center\">\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={toggleTranscribedAudio}\n            className=\"gap-1.5\"\n          >\n            {isPlayingTranscribedAudio ? (\n              <StopIcon size={14} />\n            ) : (\n              <svg viewBox=\"0 0 24 24\" className=\"h-3.5 w-3.5\" fill=\"currentColor\">\n                <path d=\"M7 4.5v15l11-7.5z\" />\n              </svg>\n            )}\n            <span>Transcribed audio</span>\n          </Button>\n        </div>\n      )}\n\n      <PromptInput\n        className=\"rounded-xl border border-border bg-background p-3 shadow-xs transition-all duration-200 focus-within:border-border hover:border-muted-foreground/50\"\n        onSubmit={(event) => {\n          event.preventDefault();\n          if (canSend) {\n            void sendText();\n          }\n        }}\n      >\n        {recordingState === \"recording\" ? (\n          <div className=\"flex items-center gap-2 py-2\">\n            <div\n              ref={liveWaveformRef}\n              className=\"flex-1 overflow-hidden\"\n              style={{ minHeight: \"26px\" }}\n            />\n          </div>\n        ) : (\n          <div className=\"flex flex-row items-start gap-1 sm:gap-2\">\n            <PromptInputTextarea\n              autoFocus\n              className=\"grow resize-none border-0 border-none bg-transparent p-2 text-sm outline-none ring-0 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0\"\n              data-testid=\"korli-input\"\n              disableAutoResize={false}\n              maxHeight={200}\n              minHeight={44}\n              onChange={(e) => setText(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && !e.shiftKey) {\n                  e.preventDefault();\n                  if (canSend) {\n                    void sendText();\n                  }\n                }\n              }}\n              placeholder={\n                hasSession\n                  ? \"Type your message...\"\n                  : \"Start the session to begin chatting\"\n              }\n              ref={textareaRef}\n              rows={1}\n              value={text}\n              disabled={textDisabled}\n            />\n          </div>\n        )}\n\n        <PromptInputToolbar className=\"border-t-0 p-0 shadow-none\">\n          <PromptInputTools className=\"gap-0 sm:gap-0.5\">\n            {recordingState === \"recording\" ? (\n              <>\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={cancelRecording}\n                  disabled={isTranscribing}\n                  className=\"h-8 w-8 rounded-lg p-1 text-destructive hover:bg-destructive/10 hover:text-destructive\"\n                >\n                  <X size={16} />\n                </Button>\n                {isTranscribing ? (\n                  <div className=\"flex h-8 w-8 items-center justify-center\">\n                    <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent\" />\n                  </div>\n                ) : (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={acceptRecording}\n                    className=\"h-8 w-8 rounded-lg p-1 text-green-600 hover:bg-green-600/10 hover:text-green-600 dark:text-green-400 dark:hover:text-green-400\"\n                  >\n                    <CheckIcon size={16} />\n                  </Button>\n                )}\n              </>\n            ) : (\n              <>\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={onOpenGenderSettings}\n                  disabled={!hasSession}\n                  className=\"h-8 w-8 rounded-lg p-1\"\n                >\n                  <PersonaIcon size={16} />\n                </Button>\n\n                {isTranscribing ? (\n                  <div className=\"flex h-8 w-8 items-center justify-center\">\n                    <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent\" />\n                  </div>\n                ) : (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={startRecording}\n                    disabled={micDisabled || !hasSession}\n                    className=\"h-8 w-8 rounded-lg p-1\"\n                  >\n                    <MicIcon size={16} />\n                  </Button>\n                )}\n              </>\n            )}\n          </PromptInputTools>\n\n          {isStreaming ? (\n            <Button\n              type=\"button\"\n              size=\"sm\"\n              onClick={() => {}}\n              className=\"h-8 w-8 rounded-full bg-foreground p-1 text-background hover:bg-foreground/90\"\n            >\n              <StopIcon size={14} />\n            </Button>\n          ) : (\n            <PromptInputSubmit\n              className=\"h-8 w-8 rounded-full bg-primary text-primary-foreground transition-colors duration-200 hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground\"\n              data-testid=\"send-button\"\n              disabled={!canSend}\n            >\n              <ArrowUpIcon size={14} />\n            </PromptInputSubmit>\n          )}\n        </PromptInputToolbar>\n      </PromptInput>\n\n      {recordingError && (\n        <p className=\"text-xs text-destructive\">{recordingError}</p>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2804, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/audio-player.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Pause, Play } from \"lucide-react\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface AudioPlayerProps {\n  src?: string;\n  label?: string;\n  size?: \"sm\" | \"md\";\n}\n\nexport function AudioPlayer({ src, label, size = \"md\" }: AudioPlayerProps) {\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const handlePlay = () => setIsPlaying(true);\n    const handlePause = () => setIsPlaying(false);\n    const handleEnded = () => setIsPlaying(false);\n\n    audio.addEventListener(\"play\", handlePlay);\n    audio.addEventListener(\"pause\", handlePause);\n    audio.addEventListener(\"ended\", handleEnded);\n\n    return () => {\n      audio.removeEventListener(\"play\", handlePlay);\n      audio.removeEventListener(\"pause\", handlePause);\n      audio.removeEventListener(\"ended\", handleEnded);\n    };\n  }, []);\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    audio.pause();\n    audio.currentTime = 0;\n    setIsPlaying(false);\n  }, [src]);\n\n  useEffect(() => {\n    if (typeof document === \"undefined\") return;\n\n    const pauseOthers = (event: Event) => {\n      const audio = audioRef.current;\n      if (!audio) return;\n\n      const target = event.target as HTMLAudioElement;\n      if (target !== audio) {\n        audio.pause();\n      }\n    };\n\n    document.addEventListener(\"play\", pauseOthers, true);\n    return () => document.removeEventListener(\"play\", pauseOthers, true);\n  }, []);\n\n  const togglePlayback = async () => {\n    const audio = audioRef.current;\n    if (!audio || !src) return;\n\n    if (audio.paused) {\n      try {\n        await audio.play();\n      } catch (err) {\n        console.error(err);\n      }\n      return;\n    }\n\n    audio.pause();\n  };\n\n  return (\n    <Button\n      type=\"button\"\n      variant=\"outline\"\n      size={size === \"sm\" ? \"sm\" : \"default\"}\n      onClick={togglePlayback}\n      disabled={!src}\n      className={cn(\n        \"gap-1.5\",\n        size === \"sm\" && \"h-7 px-2 text-xs\"\n      )}\n    >\n      {isPlaying ? (\n        <Pause className={cn(\"h-3.5 w-3.5\", size === \"md\" && \"h-4 w-4\")} />\n      ) : (\n        <Play className={cn(\"h-3.5 w-3.5\", size === \"md\" && \"h-4 w-4\")} />\n      )}\n      {label && <span className=\"hidden sm:inline\">{label}</span>}\n      <audio ref={audioRef} src={src} preload=\"none\" className=\"hidden\" />\n    </Button>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAEA;AACA;;;AANA;;;;;AAcO,SAAS,YAAY,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,IAAI,EAAoB;;IACvE,MAAM,WAAW,IAAA,uKAAM,EAA0B;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;iCAAC;YACR,MAAM,QAAQ,SAAS,OAAO;YAC9B,IAAI,CAAC,OAAO;YAEZ,MAAM;oDAAa,IAAM,aAAa;;YACtC,MAAM;qDAAc,IAAM,aAAa;;YACvC,MAAM;qDAAc,IAAM,aAAa;;YAEvC,MAAM,gBAAgB,CAAC,QAAQ;YAC/B,MAAM,gBAAgB,CAAC,SAAS;YAChC,MAAM,gBAAgB,CAAC,SAAS;YAEhC;yCAAO;oBACL,MAAM,mBAAmB,CAAC,QAAQ;oBAClC,MAAM,mBAAmB,CAAC,SAAS;oBACnC,MAAM,mBAAmB,CAAC,SAAS;gBACrC;;QACF;gCAAG,EAAE;IAEL,IAAA,0KAAS;iCAAC;YACR,MAAM,QAAQ,SAAS,OAAO;YAC9B,IAAI,CAAC,OAAO;YAEZ,MAAM,KAAK;YACX,MAAM,WAAW,GAAG;YACpB,aAAa;QACf;gCAAG;QAAC;KAAI;IAER,IAAA,0KAAS;iCAAC;YACR,IAAI,OAAO,aAAa,aAAa;YAErC,MAAM;qDAAc,CAAC;oBACnB,MAAM,QAAQ,SAAS,OAAO;oBAC9B,IAAI,CAAC,OAAO;oBAEZ,MAAM,SAAS,MAAM,MAAM;oBAC3B,IAAI,WAAW,OAAO;wBACpB,MAAM,KAAK;oBACb;gBACF;;YAEA,SAAS,gBAAgB,CAAC,QAAQ,aAAa;YAC/C;yCAAO,IAAM,SAAS,mBAAmB,CAAC,QAAQ,aAAa;;QACjE;gCAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,SAAS,CAAC,KAAK;QAEpB,IAAI,MAAM,MAAM,EAAE;YAChB,IAAI;gBACF,MAAM,MAAM,IAAI;YAClB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB;YACA;QACF;QAEA,MAAM,KAAK;IACb;IAEA,qBACE,6LAAC,wIAAM;QACL,MAAK;QACL,SAAQ;QACR,MAAM,SAAS,OAAO,OAAO;QAC7B,SAAS;QACT,UAAU,CAAC;QACX,WAAW,IAAA,qHAAE,EACX,WACA,SAAS,QAAQ;;YAGlB,0BACC,6LAAC,gNAAK;gBAAC,WAAW,IAAA,qHAAE,EAAC,eAAe,SAAS,QAAQ;;;;;qCAErD,6LAAC,6MAAI;gBAAC,WAAW,IAAA,qHAAE,EAAC,eAAe,SAAS,QAAQ;;;;;;YAErD,uBAAS,6LAAC;gBAAK,WAAU;0BAAoB;;;;;;0BAC9C,6LAAC;gBAAM,KAAK;gBAAU,KAAK;gBAAK,SAAQ;gBAAO,WAAU;;;;;;;;;;;;AAG/D;GAtFgB;KAAA"}},
    {"offset": {"line": 2950, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/message-bubble.tsx"],"sourcesContent":["\"use client\";\n\nimport { Languages, Shield } from \"lucide-react\";\n\nimport { AudioPlayer } from \"@/components/audio-player\";\nimport { Button } from \"@/components/ui/button\";\nimport { SparklesIcon } from \"@/components/icons\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MessageBubbleProps {\n  message: ChatMessage;\n  previousUserMessage?: ChatMessage;\n  showTranslation?: boolean;\n  showCorrection?: boolean;\n  onToggleTranslation?: () => void;\n  onToggleCorrection?: () => void;\n}\n\nfunction UserMessage({ message }: { message: ChatMessage }) {\n  if (message.role !== \"user\") return null;\n\n  return (\n    <div className=\"flex justify-end\" data-message-id={message.id}>\n      <div className=\"max-w-[85%] sm:max-w-[70%]\">\n        <div className=\"rounded-2xl bg-primary px-3 py-2 text-sm text-primary-foreground\">\n          <p className=\"whitespace-pre-wrap\">{message.content}</p>\n          {message.status === \"transcribing\" && (\n            <span className=\"mt-2 inline-flex items-center gap-2 text-xs opacity-80\">\n              <span className=\"h-2 w-2 animate-spin rounded-full border-2 border-current border-t-transparent\" />\n              Transcribing audio…\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction AssistantMessage({\n  message,\n  showTranslation,\n  onToggleTranslation,\n  previousUserMessage,\n  showCorrection,\n  onToggleCorrection,\n}: {\n  message: ChatMessage;\n  showTranslation?: boolean;\n  onToggleTranslation?: () => void;\n  previousUserMessage?: ChatMessage;\n  showCorrection?: boolean;\n  onToggleCorrection?: () => void;\n}) {\n  if (message.role !== \"ai\") return null;\n\n  const translationAvailable = Boolean(message.translation);\n  const correctionAvailable =\n    previousUserMessage?.role === \"user\" &&\n    Boolean(previousUserMessage.correction?.corrected);\n  const userTTSAvailable =\n    previousUserMessage?.role === \"user\" &&\n    Boolean(previousUserMessage.correction?.audioUrl);\n\n  return (\n    <div className=\"flex justify-start\" data-message-id={message.id}>\n      <div className=\"flex w-full gap-3\">\n        <div className=\"flex size-8 shrink-0 items-center justify-center rounded-full bg-background ring-1 ring-border\">\n          <SparklesIcon size={14} />\n        </div>\n\n        <div className=\"flex-1 space-y-2\">\n          <div className=\"text-sm leading-relaxed text-foreground\">\n            <p className=\"whitespace-pre-wrap\">{message.content}</p>\n            {message.isStreaming && !message.content && (\n              <span className=\"inline-flex items-center gap-2 text-xs text-muted-foreground\">\n                <span className=\"h-2 w-2 animate-pulse rounded-full bg-primary\" />\n                Korli is responding…\n              </span>\n            )}\n          </div>\n\n          <div className=\"flex flex-wrap items-center justify-between gap-2\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              {message.iconsLoading ? (\n                <div className=\"flex items-center gap-1.5 rounded-md px-2 py-1\">\n                  <div className=\"h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent\" />\n                  <span className=\"hidden text-xs text-muted-foreground sm:inline\">\n                    Loading...\n                  </span>\n                </div>\n              ) : (\n                <>\n                  {translationAvailable && (\n                    <Button\n                      type=\"button\"\n                      variant={showTranslation ? \"secondary\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={onToggleTranslation}\n                      className=\"h-7 gap-1.5 px-2 text-xs\"\n                    >\n                      <Languages\n                        className={cn(\n                          \"h-3.5 w-3.5\",\n                          showTranslation && \"text-blue-600 dark:text-blue-400\"\n                        )}\n                      />\n                      <span className=\"hidden sm:inline\">Translate</span>\n                    </Button>\n                  )}\n\n                  {message.audioUrl && (\n                    <AudioPlayer\n                      src={message.audioUrl}\n                      label=\"Play\"\n                      size=\"sm\"\n                    />\n                  )}\n\n                  {correctionAvailable && (\n                    <Button\n                      type=\"button\"\n                      variant={showCorrection ? \"secondary\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={onToggleCorrection}\n                      className=\"h-7 gap-1.5 px-2 text-xs\"\n                    >\n                      <Shield\n                        className={cn(\n                          \"h-3.5 w-3.5\",\n                          showCorrection && \"text-amber-600 dark:text-amber-400\"\n                        )}\n                      />\n                      <span className=\"hidden sm:inline\">Correction</span>\n                    </Button>\n                  )}\n                </>\n              )}\n            </div>\n\n            {userTTSAvailable && !correctionAvailable && previousUserMessage?.role === \"user\" && (\n              <div className=\"ml-auto\">\n                <AudioPlayer\n                  src={previousUserMessage.correction?.audioUrl}\n                  label=\"Your message\"\n                  size=\"sm\"\n                />\n              </div>\n            )}\n          </div>\n\n          {showTranslation && message.translation && (\n            <div className=\"rounded-lg border border-blue-200 bg-blue-50 p-3 dark:border-blue-800 dark:bg-blue-950/50\">\n              <p className=\"text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300\">\n                Translation\n              </p>\n              <p className=\"mt-1 whitespace-pre-wrap text-sm leading-relaxed text-foreground\">\n                {message.translation}\n              </p>\n            </div>\n          )}\n\n          {showCorrection &&\n            previousUserMessage?.role === \"user\" &&\n            previousUserMessage.correction && (\n              <div className=\"relative rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-800 dark:bg-amber-950/50\">\n                <p className=\"text-xs font-semibold uppercase tracking-wide text-amber-700 dark:text-amber-300\">\n                  Corrections\n                </p>\n\n                {previousUserMessage.correction.audioUrl && (\n                  <div className=\"absolute right-3 top-3 sm:hidden\">\n                    <AudioPlayer\n                      src={previousUserMessage.correction.audioUrl}\n                      size=\"sm\"\n                    />\n                  </div>\n                )}\n\n                {previousUserMessage.correction.correctedMessage && (\n                  <p className=\"mt-1 whitespace-pre-wrap text-sm font-medium leading-relaxed text-foreground\">\n                    {previousUserMessage.correction.correctedMessage}\n                  </p>\n                )}\n\n                {previousUserMessage.correction.translation && (\n                  <p className=\"mt-0.5 whitespace-pre-wrap text-sm leading-relaxed text-muted-foreground\">\n                    {previousUserMessage.correction.translation}\n                  </p>\n                )}\n\n                {previousUserMessage.correction.audioUrl && (\n                  <div className=\"mt-2 hidden sm:block\">\n                    <AudioPlayer\n                      src={previousUserMessage.correction.audioUrl}\n                      label=\"Listen\"\n                      size=\"sm\"\n                    />\n                  </div>\n                )}\n              </div>\n            )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function MessageBubble({\n  message,\n  showTranslation,\n  showCorrection,\n  onToggleTranslation,\n  onToggleCorrection,\n  previousUserMessage,\n}: MessageBubbleProps) {\n  if (message.role === \"user\") {\n    return <UserMessage message={message} />;\n  }\n\n  return (\n    <AssistantMessage\n      message={message}\n      showTranslation={showTranslation}\n      showCorrection={showCorrection}\n      onToggleTranslation={onToggleTranslation}\n      onToggleCorrection={onToggleCorrection}\n      previousUserMessage={previousUserMessage}\n    />\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3350, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/korli-messages.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\nimport { MessageBubble } from \"@/components/message-bubble\";\nimport type { ChatMessage, OverlayState } from \"@/lib/types\";\n\ninterface KorliMessagesProps {\n  messages: ChatMessage[];\n  activeOverlay: OverlayState | null;\n  onToggleOverlay: (messageId: string, type: \"translation\" | \"correction\") => void;\n}\n\nexport function KorliMessages({\n  messages,\n  activeOverlay,\n  onToggleOverlay,\n}: KorliMessagesProps) {\n  const scrollRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const el = scrollRef.current;\n    if (!el) return;\n\n    el.scrollTo({\n      top: el.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }, [messages]);\n\n  useEffect(() => {\n    const el = scrollRef.current;\n    if (!el || !activeOverlay) return;\n\n    setTimeout(() => {\n      const activeElement = el.querySelector(\n        `[data-message-id=\"${activeOverlay.messageId}\"]`\n      );\n      if (activeElement) {\n        activeElement.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n      }\n    }, 50);\n  }, [activeOverlay]);\n\n  if (messages.length === 0) {\n    return (\n      <div className=\"flex h-full flex-col items-center justify-center gap-3 text-center text-muted-foreground\">\n        <p className=\"text-lg font-semibold\">Your tutor is ready</p>\n        <p className=\"max-w-sm text-sm\">\n          Start typing or recording to begin your conversation\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={scrollRef}\n      className=\"flex-1 overflow-y-auto rounded-xl bg-muted/30 px-4 py-3\"\n    >\n      <div className=\"flex flex-col gap-4\">\n        {messages.map((message, index) => {\n          let previousUserMessage: ChatMessage | undefined;\n          if (message.role === \"ai\" && index > 0) {\n            for (let i = index - 1; i >= 0; i--) {\n              if (messages[i].role === \"user\") {\n                previousUserMessage = messages[i];\n                break;\n              }\n            }\n          }\n\n          return (\n            <MessageBubble\n              key={message.id}\n              message={message}\n              previousUserMessage={previousUserMessage}\n              showTranslation={\n                activeOverlay?.messageId === message.id &&\n                activeOverlay.type === \"translation\"\n              }\n              showCorrection={\n                activeOverlay?.messageId === message.id &&\n                activeOverlay.type === \"correction\"\n              }\n              onToggleTranslation={\n                message.role === \"ai\"\n                  ? () => onToggleOverlay(message.id, \"translation\")\n                  : undefined\n              }\n              onToggleCorrection={\n                message.role === \"ai\"\n                  ? () => onToggleOverlay(message.id, \"correction\")\n                  : undefined\n              }\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAEA;;;AAJA;;;AAaO,SAAS,cAAc,EAC5B,QAAQ,EACR,aAAa,EACb,eAAe,EACI;;IACnB,MAAM,YAAY,IAAA,uKAAM,EAAwB;IAEhD,IAAA,0KAAS;mCAAC;YACR,MAAM,KAAK,UAAU,OAAO;YAC5B,IAAI,CAAC,IAAI;YAET,GAAG,QAAQ,CAAC;gBACV,KAAK,GAAG,YAAY;gBACpB,UAAU;YACZ;QACF;kCAAG;QAAC;KAAS;IAEb,IAAA,0KAAS;mCAAC;YACR,MAAM,KAAK,UAAU,OAAO;YAC5B,IAAI,CAAC,MAAM,CAAC,eAAe;YAE3B;2CAAW;oBACT,MAAM,gBAAgB,GAAG,aAAa,CACpC,CAAC,kBAAkB,EAAE,cAAc,SAAS,CAAC,EAAE,CAAC;oBAElD,IAAI,eAAe;wBACjB,cAAc,cAAc,CAAC;4BAAE,UAAU;4BAAU,OAAO;wBAAU;oBACtE;gBACF;0CAAG;QACL;kCAAG;QAAC;KAAc;IAElB,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAE,WAAU;8BAAwB;;;;;;8BACrC,6LAAC;oBAAE,WAAU;8BAAmB;;;;;;;;;;;;IAKtC;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,WAAU;kBAEV,cAAA,6LAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC,SAAS;gBACtB,IAAI;gBACJ,IAAI,QAAQ,IAAI,KAAK,QAAQ,QAAQ,GAAG;oBACtC,IAAK,IAAI,IAAI,QAAQ,GAAG,KAAK,GAAG,IAAK;wBACnC,IAAI,QAAQ,CAAC,EAAE,CAAC,IAAI,KAAK,QAAQ;4BAC/B,sBAAsB,QAAQ,CAAC,EAAE;4BACjC;wBACF;oBACF;gBACF;gBAEA,qBACE,6LAAC,oJAAa;oBAEZ,SAAS;oBACT,qBAAqB;oBACrB,iBACE,eAAe,cAAc,QAAQ,EAAE,IACvC,cAAc,IAAI,KAAK;oBAEzB,gBACE,eAAe,cAAc,QAAQ,EAAE,IACvC,cAAc,IAAI,KAAK;oBAEzB,qBACE,QAAQ,IAAI,KAAK,OACb,IAAM,gBAAgB,QAAQ,EAAE,EAAE,iBAClC;oBAEN,oBACE,QAAQ,IAAI,KAAK,OACb,IAAM,gBAAgB,QAAQ,EAAE,EAAE,gBAClC;mBAnBD,QAAQ,EAAE;;;;;YAuBrB;;;;;;;;;;;AAIR;GAxFgB;KAAA"}},
    {"offset": {"line": 3473, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/hooks/use-korli-chat.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { continueTextChatSSE, startTextChat } from '@/lib/korli-api';\nimport type {\n  AIMessage,\n  ChatConfig,\n  ChatMessage,\n  GenderOption,\n  OverlayState,\n  OverlayType,\n  SSEventPayload,\n  StartTextChatResponse,\n  UserMessage,\n} from '@/lib/types';\nimport { generateUUID } from '@/lib/utils';\n\nconst releaseAudioFromMessages = (messages: ChatMessage[]) => {\n  if (typeof URL === 'undefined' || typeof URL.revokeObjectURL !== 'function') {\n    return;\n  }\n\n  messages.forEach((message) => {\n    if (message.role === 'user' && message.userAudio?.localUrl) {\n      URL.revokeObjectURL(message.userAudio.localUrl);\n    }\n  });\n};\n\nexport const useKorliChat = () => {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [threadId, setThreadId] = useState<string | null>(null);\n  const [config, setConfig] = useState<ChatConfig | null>(null);\n  const [activeOverlay, setActiveOverlay] = useState<OverlayState | null>(null);\n  const [status, setStatus] = useState({ isStarting: false, isStreaming: false });\n  const [error, setError] = useState<string | null>(null);\n\n  const messagesRef = useRef<ChatMessage[]>([]);\n  const streamAbortRef = useRef<(() => void) | null>(null);\n  const currentUserMessageIdRef = useRef<string | null>(null);\n  const currentAIMessageIdRef = useRef<string | null>(null);\n  const pendingAIDataRef = useRef<{ translation?: string; audioUrl?: string } | null>(null);\n  const pendingCorrectionRef = useRef<{\n    corrected?: boolean;\n    correctedMessage?: string;\n    translation?: string;\n    audioUrl?: string;\n  } | null>(null);\n\n  useEffect(() => {\n    messagesRef.current = messages;\n  }, [messages]);\n\n  useEffect(\n    () => () => {\n      streamAbortRef.current?.();\n      releaseAudioFromMessages(messagesRef.current);\n    },\n    [],\n  );\n\n  const finishStream = useCallback(() => {\n    // Apply pending translation and audioUrl to AI message\n    if (currentAIMessageIdRef.current) {\n      const aiMessageId = currentAIMessageIdRef.current;\n      const pendingData = pendingAIDataRef.current;\n\n      setMessages((prev) =>\n        prev.map((message) => {\n          if (message.id !== aiMessageId || message.role !== 'ai') {\n            return message;\n          }\n\n          return {\n            ...message,\n            translation: pendingData?.translation ?? message.translation,\n            audioUrl: pendingData?.audioUrl ?? message.audioUrl,\n            isStreaming: false,\n            iconsLoading: false,\n          };\n        }),\n      );\n    }\n\n    // Apply pending correction to user message\n    if (currentUserMessageIdRef.current && pendingCorrectionRef.current) {\n      const userId = currentUserMessageIdRef.current;\n      const correctionData = pendingCorrectionRef.current;\n\n      setMessages((prev) =>\n        prev.map((message) => {\n          if (message.id !== userId || message.role !== 'user') {\n            return message;\n          }\n\n          return {\n            ...message,\n            correction: {\n              corrected: Boolean(correctionData.corrected),\n              correctedMessage: correctionData.correctedMessage ?? message.correction?.correctedMessage,\n              translation: correctionData.translation ?? message.correction?.translation,\n              audioUrl: correctionData.audioUrl ?? message.correction?.audioUrl,\n            },\n            status: 'complete',\n          };\n        }),\n      );\n    }\n\n    // Clean up\n    streamAbortRef.current?.();\n    streamAbortRef.current = null;\n    currentUserMessageIdRef.current = null;\n    currentAIMessageIdRef.current = null;\n    pendingAIDataRef.current = null;\n    pendingCorrectionRef.current = null;\n\n    setStatus((prev) =>\n      prev.isStreaming ? { ...prev, isStreaming: false } : prev,\n    );\n  }, []);\n\n  const handleStreamError = useCallback(\n    (err: Error) => {\n      console.error(err);\n      setError(err.message || 'Streaming request failed');\n      finishStream();\n    },\n    [finishStream],\n  );\n\n  const handleStreamComplete = useCallback(() => {\n    finishStream();\n  }, [finishStream]);\n\n  const toggleOverlay = useCallback((messageId: string, type: OverlayType) => {\n    setActiveOverlay((prev) => {\n      if (prev && prev.messageId === messageId && prev.type === type) {\n        return null;\n      }\n\n      return { messageId, type };\n    });\n  }, []);\n\n  const resetChat = useCallback(() => {\n    streamAbortRef.current?.();\n    streamAbortRef.current = null;\n    currentUserMessageIdRef.current = null;\n    currentAIMessageIdRef.current = null;\n    pendingAIDataRef.current = null;\n    pendingCorrectionRef.current = null;\n\n    setMessages((prev) => {\n      releaseAudioFromMessages(prev);\n      return [];\n    });\n\n    setThreadId(null);\n    setConfig(null);\n    setActiveOverlay(null);\n    setStatus({ isStarting: false, isStreaming: false });\n    setError(null);\n  }, []);\n\n  const applyToCurrentUserMessage = useCallback(\n    (updater: (message: UserMessage) => UserMessage) => {\n      const targetId = currentUserMessageIdRef.current;\n      if (!targetId) {\n        return;\n      }\n\n      setMessages((prev) =>\n        prev.map((message) => {\n          if (message.id !== targetId || message.role !== 'user') {\n            return message;\n          }\n\n          return updater(message);\n        }),\n      );\n    },\n    [],\n  );\n\n  const handleAssistantStart = useCallback((id: string) => {\n    currentAIMessageIdRef.current = id;\n    pendingAIDataRef.current = null;\n\n    setMessages((prev) => {\n      if (prev.some((message) => message.id === id)) {\n        return prev;\n      }\n\n      return [\n        ...prev,\n        {\n          id,\n          role: 'ai',\n          content: '',\n          createdAt: Date.now(),\n          translation: undefined,\n          isStreaming: true,\n          iconsLoading: true,\n        } as AIMessage,\n      ];\n    });\n  }, []);\n\n  const handleAssistantDelta = useCallback((id: string, text: string) => {\n    if (!text) {\n      return;\n    }\n\n    setMessages((prev) => {\n      let touched = false;\n\n      const next = prev.map((message) => {\n        if (message.id !== id || message.role !== 'ai') {\n          return message;\n        }\n\n        touched = true;\n        return {\n          ...message,\n          content: `${message.content}${text}`,\n        };\n      });\n\n      if (!touched) {\n        currentAIMessageIdRef.current = id;\n        next.push({\n          id,\n          role: 'ai',\n          content: text,\n          translation: undefined,\n          createdAt: Date.now(),\n          isStreaming: true,\n          iconsLoading: true,\n        });\n      }\n\n      return next;\n    });\n  }, []);\n\n  const handleAssistantEnd = useCallback((payload: unknown) => {\n    if (!payload || typeof payload !== 'object') {\n      return;\n    }\n\n    const data = payload as {\n      id?: string;\n      ai_message?: string;\n      translation?: string;\n      audio_url?: string;\n    };\n\n    if (!data.id) {\n      return;\n    }\n\n    // Store translation and audioUrl to apply when \"done\" event is received\n    currentAIMessageIdRef.current = data.id;\n    pendingAIDataRef.current = {\n      translation: data.translation,\n      audioUrl: data.audio_url,\n    };\n\n    // Only update content if needed, but don't set translation/audioUrl yet\n    setMessages((prev) => {\n      const exists = prev.find((message) => message.id === data.id && message.role === 'ai');\n\n      if (!exists) {\n        return [\n          ...prev,\n          {\n            id: data.id,\n            role: 'ai',\n            content: data.ai_message ?? '',\n            translation: undefined,\n            createdAt: Date.now(),\n            isStreaming: true,\n            iconsLoading: true,\n          } as AIMessage,\n        ];\n      }\n\n      return prev.map((message) => {\n        if (message.id !== data.id || message.role !== 'ai') {\n          return message;\n        }\n\n        return {\n          ...message,\n          content: message.content || data.ai_message || '',\n          // Keep isStreaming true until \"done\" event\n        };\n      });\n    });\n  }, []);\n\n  const handleCorrection = useCallback(\n    (payload: unknown) => {\n      if (!payload || typeof payload !== 'object') {\n        return;\n      }\n\n      const data = payload as {\n        corrected?: boolean;\n        corrected_message?: string;\n        correctedMessage?: string;\n        translation?: string;\n        audio_url?: string;\n        audioUrl?: string;\n      };\n\n      // Store correction data to apply when \"done\" event is received\n      pendingCorrectionRef.current = {\n        corrected: data.corrected,\n        correctedMessage: data.corrected_message ?? data.correctedMessage,\n        translation: data.translation,\n        audioUrl: data.audio_url ?? data.audioUrl,\n      };\n    },\n    [],\n  );\n\n  const handleTranscript = useCallback(\n    (payload: unknown) => {\n      if (!payload || typeof payload !== 'object') {\n        return;\n      }\n\n      const data = payload as { text?: string };\n\n      if (!data.text) {\n        return;\n      }\n\n      const transcript = data.text;\n\n      applyToCurrentUserMessage((message) => ({\n        ...message,\n        content: transcript,\n        status: message.status === 'transcribing' ? 'pending' : message.status,\n      }));\n    },\n    [applyToCurrentUserMessage],\n  );\n\n  const handleStreamEvent = useCallback(\n    (event: SSEventPayload) => {\n      switch (event.event) {\n        case 'thread':\n          if (event.data && typeof (event.data as { thread_id?: string }).thread_id === 'string') {\n            setThreadId((event.data as { thread_id: string }).thread_id);\n          }\n          break;\n        case 'assistant_start':\n          if (event.data && typeof (event.data as { id?: string }).id === 'string') {\n            handleAssistantStart((event.data as { id: string }).id);\n          }\n          break;\n        case 'assistant_delta':\n          {\n            const data = event.data as { id?: string; channel?: string; text?: string };\n            if (data?.id && data.channel === 'foreign' && typeof data.text === 'string') {\n              handleAssistantDelta(data.id, data.text);\n            }\n          }\n          break;\n        case 'assistant_end':\n          handleAssistantEnd(event.data);\n          break;\n        case 'correction':\n          handleCorrection(event.data);\n          break;\n        case 'transcript':\n          handleTranscript(event.data);\n          break;\n        case 'done':\n          finishStream();\n          break;\n        default:\n          break;\n      }\n    },\n    [finishStream, handleAssistantDelta, handleAssistantEnd, handleAssistantStart, handleCorrection, handleTranscript],\n  );\n\n  const startConversation = useCallback(\n    async (chatConfig: ChatConfig) => {\n      streamAbortRef.current?.();\n      streamAbortRef.current = null;\n      currentUserMessageIdRef.current = null;\n      currentAIMessageIdRef.current = null;\n      pendingAIDataRef.current = null;\n      pendingCorrectionRef.current = null;\n\n      setActiveOverlay(null);\n      setStatus({ isStarting: true, isStreaming: false });\n      setError(null);\n\n      setMessages((prev) => {\n        releaseAudioFromMessages(prev);\n        return [];\n      });\n\n      try {\n        const response: StartTextChatResponse = await startTextChat(chatConfig);\n        setThreadId(response.thread_id);\n        setConfig(chatConfig);\n\n        setMessages([\n          {\n            id: response.thread_id ? `assistant-${response.thread_id}` : generateUUID(),\n            role: 'ai',\n            content: response.ai_message?.content ?? '',\n            translation: response.ai_message?.translation,\n            audioUrl: response.ai_message?.audio_url,\n            createdAt: Date.now(),\n            isStreaming: false,\n          },\n        ]);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Unable to start chat');\n        throw err;\n      } finally {\n        setStatus((prev) => ({ ...prev, isStarting: false }));\n      }\n    },\n    [],\n  );\n\n  const sendTextMessage = useCallback(\n    async (rawMessage: string, tutorGender?: GenderOption, studentGender?: GenderOption) => {\n      if (!threadId || !config) {\n        throw new Error('Start the session before sending a message.');\n      }\n\n      const message = rawMessage.trim();\n      if (!message || status.isStreaming) {\n        return;\n      }\n\n      const userMessageId = generateUUID();\n      currentUserMessageIdRef.current = userMessageId;\n      currentAIMessageIdRef.current = null;\n      pendingAIDataRef.current = null;\n      pendingCorrectionRef.current = null;\n\n      const newMessage: UserMessage = {\n        id: userMessageId,\n        role: 'user',\n        type: 'text',\n        content: message,\n        createdAt: Date.now(),\n        status: 'pending',\n      };\n\n      setMessages((prev) => [...prev, newMessage]);\n      setActiveOverlay(null);\n      setStatus((prev) => ({ ...prev, isStreaming: true }));\n\n      streamAbortRef.current = continueTextChatSSE(\n        {\n          threadId,\n          message,\n          foreignLanguage: config.foreignLanguage,\n          tutorGender,\n          studentGender,\n        },\n        {\n          onEvent: handleStreamEvent,\n          onError: handleStreamError,\n          onComplete: handleStreamComplete,\n        },\n      );\n    },\n    [config, handleStreamComplete, handleStreamError, handleStreamEvent, status.isStreaming, threadId],\n  );\n\n  const clearError = useCallback(() => setError(null), []);\n\n  return {\n    threadId,\n    config,\n    messages,\n    activeOverlay,\n    isStarting: status.isStarting,\n    isStreaming: status.isStreaming,\n    error,\n    startConversation,\n    sendTextMessage,\n    toggleOverlay,\n    resetChat,\n    clearError,\n  };\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3986, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/components/korli-chat.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useState, type FormEvent } from \"react\";\n\nimport { ConfigurationForm } from \"@/components/configuration-form\";\nimport { GenderSettings } from \"@/components/gender-settings\";\nimport { KorliHeader } from \"@/components/korli-header\";\nimport { KorliInput } from \"@/components/korli-input\";\nimport { KorliMessages } from \"@/components/korli-messages\";\nimport { useKorliChat } from \"@/hooks/use-korli-chat\";\nimport type { ChatConfig, GenderOption, StudentLevel } from \"@/lib/types\";\n\nconst DEFAULT_CONFIG: ChatConfig = {\n  foreignLanguage: \"Spanish\",\n  nativeLanguage: \"English\",\n  studentLevel: \"B1\" as StudentLevel,\n  tutorGender: \"female\",\n  studentGender: \"male\",\n};\n\nexport function KorliChat() {\n  const {\n    threadId,\n    config,\n    messages,\n    activeOverlay,\n    isStarting,\n    isStreaming,\n    error,\n    startConversation,\n    sendTextMessage,\n    toggleOverlay,\n    resetChat,\n  } = useKorliChat();\n\n  const [formConfig, setFormConfig] = useState<ChatConfig>(DEFAULT_CONFIG);\n  const [tutorGender, setTutorGender] = useState<GenderOption>(\"female\");\n  const [studentGender, setStudentGender] = useState<GenderOption>(\"male\");\n  const [showGenderSettings, setShowGenderSettings] = useState(false);\n\n  const hasSession = Boolean(threadId);\n\n  const handleConfigChange = useCallback(\n    (field: keyof ChatConfig) => (value: string) => {\n      setFormConfig((prev) => ({ ...prev, [field]: value }));\n    },\n    []\n  );\n\n  const handleStartSession = useCallback(\n    async (event: FormEvent) => {\n      event.preventDefault();\n      try {\n        await startConversation({\n          ...formConfig,\n          tutorGender,\n          studentGender,\n        });\n      } catch (err) {\n        console.error(\"Failed to start session:\", err);\n      }\n    },\n    [formConfig, tutorGender, studentGender, startConversation]\n  );\n\n  const handleReset = useCallback(() => {\n    resetChat();\n    setFormConfig(DEFAULT_CONFIG);\n    setTutorGender(\"female\");\n    setStudentGender(\"male\");\n  }, [resetChat]);\n\n  const handleSendText = useCallback(\n    async (message: string) => {\n      await sendTextMessage(message, tutorGender, studentGender);\n    },\n    [sendTextMessage, tutorGender, studentGender]\n  );\n\n  return (\n    <div className=\"flex h-dvh flex-col bg-background\">\n      <KorliHeader />\n\n      <div className=\"flex flex-1 flex-col overflow-hidden\">\n        {!hasSession ? (\n          <ConfigurationForm\n            config={formConfig}\n            onChange={handleConfigChange}\n            onSubmit={handleStartSession}\n            onReset={handleReset}\n            hasSession={hasSession}\n            isStarting={isStarting}\n          />\n        ) : (\n          <div className=\"flex flex-1 flex-col overflow-hidden\">\n            <ConfigurationForm\n              config={config || formConfig}\n              onChange={handleConfigChange}\n              onSubmit={handleStartSession}\n              onReset={handleReset}\n              hasSession={hasSession}\n              isStarting={isStarting}\n            />\n\n            <div className=\"flex-1 overflow-hidden px-4 py-3\">\n              <div className=\"mx-auto flex h-full max-w-3xl flex-col\">\n                <KorliMessages\n                  messages={messages}\n                  activeOverlay={activeOverlay}\n                  onToggleOverlay={toggleOverlay}\n                />\n              </div>\n            </div>\n\n            <div className=\"border-t border-border bg-background px-4 py-3\">\n              <div className=\"mx-auto max-w-3xl\">\n                {error && (\n                  <p className=\"mb-2 text-sm text-destructive\">{error}</p>\n                )}\n                <KorliInput\n                  disabled={isStarting}\n                  hasSession={hasSession}\n                  isStreaming={isStreaming}\n                  onSendText={handleSendText}\n                  foreignLanguage={config?.foreignLanguage || formConfig.foreignLanguage}\n                  onOpenGenderSettings={() => setShowGenderSettings(true)}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <GenderSettings\n        open={showGenderSettings}\n        onOpenChange={setShowGenderSettings}\n        tutorGender={tutorGender}\n        studentGender={studentGender}\n        onTutorGenderChange={setTutorGender}\n        onStudentGenderChange={setStudentGender}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;AAYA,MAAM,iBAA6B;IACjC,iBAAiB;IACjB,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,eAAe;AACjB;AAEO,SAAS;;IACd,MAAM,EACJ,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,aAAa,EACb,UAAU,EACV,WAAW,EACX,KAAK,EACL,iBAAiB,EACjB,eAAe,EACf,aAAa,EACb,SAAS,EACV,GAAG,IAAA,gJAAY;IAEhB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAa;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAe;IAC7D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAe;IACjE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC;IAE7D,MAAM,aAAa,QAAQ;IAE3B,MAAM,qBAAqB,IAAA,4KAAW;qDACpC,CAAC;6DAA4B,CAAC;oBAC5B;qEAAc,CAAC,OAAS,CAAC;gCAAE,GAAG,IAAI;gCAAE,CAAC,MAAM,EAAE;4BAAM,CAAC;;gBACtD;;oDACA,EAAE;IAGJ,MAAM,qBAAqB,IAAA,4KAAW;qDACpC,OAAO;YACL,MAAM,cAAc;YACpB,IAAI;gBACF,MAAM,kBAAkB;oBACtB,GAAG,UAAU;oBACb;oBACA;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;oDACA;QAAC;QAAY;QAAa;QAAe;KAAkB;IAG7D,MAAM,cAAc,IAAA,4KAAW;8CAAC;YAC9B;YACA,cAAc;YACd,eAAe;YACf,iBAAiB;QACnB;6CAAG;QAAC;KAAU;IAEd,MAAM,iBAAiB,IAAA,4KAAW;iDAChC,OAAO;YACL,MAAM,gBAAgB,SAAS,aAAa;QAC9C;gDACA;QAAC;QAAiB;QAAa;KAAc;IAG/C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,gJAAW;;;;;0BAEZ,6LAAC;gBAAI,WAAU;0BACZ,CAAC,2BACA,6LAAC,4JAAiB;oBAChB,QAAQ;oBACR,UAAU;oBACV,UAAU;oBACV,SAAS;oBACT,YAAY;oBACZ,YAAY;;;;;yCAGd,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,4JAAiB;4BAChB,QAAQ,UAAU;4BAClB,UAAU;4BACV,UAAU;4BACV,SAAS;4BACT,YAAY;4BACZ,YAAY;;;;;;sCAGd,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,oJAAa;oCACZ,UAAU;oCACV,eAAe;oCACf,iBAAiB;;;;;;;;;;;;;;;;sCAKvB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;oCACZ,uBACC,6LAAC;wCAAE,WAAU;kDAAiC;;;;;;kDAEhD,6LAAC,8IAAU;wCACT,UAAU;wCACV,YAAY;wCACZ,aAAa;wCACb,YAAY;wCACZ,iBAAiB,QAAQ,mBAAmB,WAAW,eAAe;wCACtE,sBAAsB,IAAM,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ9D,6LAAC,sJAAc;gBACb,MAAM;gBACN,cAAc;gBACd,aAAa;gBACb,eAAe;gBACf,qBAAqB;gBACrB,uBAAuB;;;;;;;;;;;;AAI/B;GA3HgB;;QAaV,gJAAY;;;KAbF"}},
    {"offset": {"line": 4213, "column": 0}, "map": {"version":3,"sources":["file:///Users/georgewiggam/Documents/korli-fe/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { KorliChat } from \"@/components/korli-chat\";\n\nexport default function ChatPage() {\n  return <KorliChat />;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6LAAC,4IAAS;;;;;AACnB;KAFwB"}}]
}